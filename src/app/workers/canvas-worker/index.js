!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=93)}([function(t,e,i){"use strict";i.d(e,"CullFaceNone",function(){return r}),i.d(e,"CullFaceBack",function(){return n}),i.d(e,"CullFaceFront",function(){return s}),i.d(e,"PCFShadowMap",function(){return a}),i.d(e,"VSMShadowMap",function(){return o}),i.d(e,"FrontSide",function(){return h}),i.d(e,"BackSide",function(){return u}),i.d(e,"DoubleSide",function(){return l}),i.d(e,"FlatShading",function(){return c}),i.d(e,"NoBlending",function(){return d}),i.d(e,"NormalBlending",function(){return p}),i.d(e,"AdditiveBlending",function(){return m}),i.d(e,"SubtractiveBlending",function(){return f}),i.d(e,"MultiplyBlending",function(){return g}),i.d(e,"CustomBlending",function(){return x}),i.d(e,"AddEquation",function(){return y}),i.d(e,"SubtractEquation",function(){return b}),i.d(e,"ReverseSubtractEquation",function(){return M}),i.d(e,"MinEquation",function(){return v}),i.d(e,"MaxEquation",function(){return _}),i.d(e,"ZeroFactor",function(){return w}),i.d(e,"OneFactor",function(){return T}),i.d(e,"SrcColorFactor",function(){return S}),i.d(e,"OneMinusSrcColorFactor",function(){return E}),i.d(e,"SrcAlphaFactor",function(){return A}),i.d(e,"OneMinusSrcAlphaFactor",function(){return R}),i.d(e,"DstAlphaFactor",function(){return F}),i.d(e,"OneMinusDstAlphaFactor",function(){return L}),i.d(e,"DstColorFactor",function(){return B}),i.d(e,"OneMinusDstColorFactor",function(){return C}),i.d(e,"SrcAlphaSaturateFactor",function(){return U}),i.d(e,"NeverDepth",function(){return P}),i.d(e,"AlwaysDepth",function(){return N}),i.d(e,"LessDepth",function(){return O}),i.d(e,"LessEqualDepth",function(){return z}),i.d(e,"EqualDepth",function(){return V}),i.d(e,"GreaterEqualDepth",function(){return G}),i.d(e,"GreaterDepth",function(){return D}),i.d(e,"NotEqualDepth",function(){return I}),i.d(e,"MultiplyOperation",function(){return W}),i.d(e,"NoToneMapping",function(){return k}),i.d(e,"UVMapping",function(){return H}),i.d(e,"CubeReflectionMapping",function(){return j}),i.d(e,"CubeRefractionMapping",function(){return X}),i.d(e,"EquirectangularReflectionMapping",function(){return q}),i.d(e,"EquirectangularRefractionMapping",function(){return Y}),i.d(e,"CubeUVReflectionMapping",function(){return Z}),i.d(e,"CubeUVRefractionMapping",function(){return J}),i.d(e,"RepeatWrapping",function(){return Q}),i.d(e,"ClampToEdgeWrapping",function(){return K}),i.d(e,"MirroredRepeatWrapping",function(){return $}),i.d(e,"NearestFilter",function(){return tt}),i.d(e,"NearestMipmapNearestFilter",function(){return et}),i.d(e,"NearestMipmapLinearFilter",function(){return it}),i.d(e,"LinearFilter",function(){return rt}),i.d(e,"LinearMipmapNearestFilter",function(){return nt}),i.d(e,"LinearMipmapLinearFilter",function(){return st}),i.d(e,"UnsignedByteType",function(){return at}),i.d(e,"ByteType",function(){return ot}),i.d(e,"ShortType",function(){return ht}),i.d(e,"UnsignedShortType",function(){return ut}),i.d(e,"IntType",function(){return lt}),i.d(e,"UnsignedIntType",function(){return ct}),i.d(e,"FloatType",function(){return dt}),i.d(e,"HalfFloatType",function(){return pt}),i.d(e,"UnsignedShort4444Type",function(){return mt}),i.d(e,"UnsignedShort5551Type",function(){return ft}),i.d(e,"UnsignedShort565Type",function(){return gt}),i.d(e,"UnsignedInt248Type",function(){return xt}),i.d(e,"AlphaFormat",function(){return yt}),i.d(e,"RGBFormat",function(){return bt}),i.d(e,"RGBAFormat",function(){return Mt}),i.d(e,"LuminanceFormat",function(){return vt}),i.d(e,"LuminanceAlphaFormat",function(){return _t}),i.d(e,"DepthFormat",function(){return wt}),i.d(e,"DepthStencilFormat",function(){return Tt}),i.d(e,"RedFormat",function(){return St}),i.d(e,"RedIntegerFormat",function(){return Et}),i.d(e,"RGFormat",function(){return At}),i.d(e,"RGIntegerFormat",function(){return Rt}),i.d(e,"RGBIntegerFormat",function(){return Ft}),i.d(e,"RGBAIntegerFormat",function(){return Lt}),i.d(e,"RGB_S3TC_DXT1_Format",function(){return Bt}),i.d(e,"RGBA_S3TC_DXT1_Format",function(){return Ct}),i.d(e,"RGBA_S3TC_DXT3_Format",function(){return Ut}),i.d(e,"RGBA_S3TC_DXT5_Format",function(){return Pt}),i.d(e,"RGB_PVRTC_4BPPV1_Format",function(){return Nt}),i.d(e,"RGB_PVRTC_2BPPV1_Format",function(){return Ot}),i.d(e,"RGBA_PVRTC_4BPPV1_Format",function(){return zt}),i.d(e,"RGBA_PVRTC_2BPPV1_Format",function(){return Vt}),i.d(e,"RGB_ETC1_Format",function(){return Gt}),i.d(e,"RGB_ETC2_Format",function(){return Dt}),i.d(e,"RGBA_ETC2_EAC_Format",function(){return It}),i.d(e,"RGBA_ASTC_4x4_Format",function(){return Wt}),i.d(e,"RGBA_ASTC_5x4_Format",function(){return kt}),i.d(e,"RGBA_ASTC_5x5_Format",function(){return Ht}),i.d(e,"RGBA_ASTC_6x5_Format",function(){return jt}),i.d(e,"RGBA_ASTC_6x6_Format",function(){return Xt}),i.d(e,"RGBA_ASTC_8x5_Format",function(){return qt}),i.d(e,"RGBA_ASTC_8x6_Format",function(){return Yt}),i.d(e,"RGBA_ASTC_8x8_Format",function(){return Zt}),i.d(e,"RGBA_ASTC_10x5_Format",function(){return Jt}),i.d(e,"RGBA_ASTC_10x6_Format",function(){return Qt}),i.d(e,"RGBA_ASTC_10x8_Format",function(){return Kt}),i.d(e,"RGBA_ASTC_10x10_Format",function(){return $t}),i.d(e,"RGBA_ASTC_12x10_Format",function(){return te}),i.d(e,"RGBA_ASTC_12x12_Format",function(){return ee}),i.d(e,"RGBA_BPTC_Format",function(){return ie}),i.d(e,"SRGB8_ALPHA8_ASTC_4x4_Format",function(){return re}),i.d(e,"SRGB8_ALPHA8_ASTC_5x4_Format",function(){return ne}),i.d(e,"SRGB8_ALPHA8_ASTC_5x5_Format",function(){return se}),i.d(e,"SRGB8_ALPHA8_ASTC_6x5_Format",function(){return ae}),i.d(e,"SRGB8_ALPHA8_ASTC_6x6_Format",function(){return oe}),i.d(e,"SRGB8_ALPHA8_ASTC_8x5_Format",function(){return he}),i.d(e,"SRGB8_ALPHA8_ASTC_8x6_Format",function(){return ue}),i.d(e,"SRGB8_ALPHA8_ASTC_8x8_Format",function(){return le}),i.d(e,"SRGB8_ALPHA8_ASTC_10x5_Format",function(){return ce}),i.d(e,"SRGB8_ALPHA8_ASTC_10x6_Format",function(){return de}),i.d(e,"SRGB8_ALPHA8_ASTC_10x8_Format",function(){return pe}),i.d(e,"SRGB8_ALPHA8_ASTC_10x10_Format",function(){return me}),i.d(e,"SRGB8_ALPHA8_ASTC_12x10_Format",function(){return fe}),i.d(e,"SRGB8_ALPHA8_ASTC_12x12_Format",function(){return ge}),i.d(e,"LinearEncoding",function(){return xe}),i.d(e,"BasicDepthPacking",function(){return ye}),i.d(e,"RGBADepthPacking",function(){return be}),i.d(e,"TangentSpaceNormalMap",function(){return Me}),i.d(e,"ObjectSpaceNormalMap",function(){return ve}),i.d(e,"KeepStencilOp",function(){return _e}),i.d(e,"AlwaysStencilFunc",function(){return we}),i.d(e,"StaticDrawUsage",function(){return Te});const r=0,n=1,s=2,a=1,o=3,h=0,u=1,l=2,c=1,d=0,p=1,m=2,f=3,g=4,x=5,y=100,b=101,M=102,v=103,_=104,w=200,T=201,S=202,E=203,A=204,R=205,F=206,L=207,B=208,C=209,U=210,P=0,N=1,O=2,z=3,V=4,G=5,D=6,I=7,W=0,k=0,H=300,j=301,X=302,q=303,Y=304,Z=306,J=307,Q=1e3,K=1001,$=1002,tt=1003,et=1004,it=1005,rt=1006,nt=1007,st=1008,at=1009,ot=1010,ht=1011,ut=1012,lt=1013,ct=1014,dt=1015,pt=1016,mt=1017,ft=1018,gt=1019,xt=1020,yt=1021,bt=1022,Mt=1023,vt=1024,_t=1025,wt=1026,Tt=1027,St=1028,Et=1029,At=1030,Rt=1031,Ft=1032,Lt=1033,Bt=33776,Ct=33777,Ut=33778,Pt=33779,Nt=35840,Ot=35841,zt=35842,Vt=35843,Gt=36196,Dt=37492,It=37496,Wt=37808,kt=37809,Ht=37810,jt=37811,Xt=37812,qt=37813,Yt=37814,Zt=37815,Jt=37816,Qt=37817,Kt=37818,$t=37819,te=37820,ee=37821,ie=36492,re=37840,ne=37841,se=37842,ae=37843,oe=37844,he=37845,ue=37846,le=37847,ce=37848,de=37849,pe=37850,me=37851,fe=37852,ge=37853,xe=3e3,ye=3200,be=3201,Me=0,ve=1,_e=7680,we=519,Te=35044},function(t,e,i){"use strict";i.d(e,"Vector3",function(){return s});var r=i(6),n=i(21);class s{constructor(t=0,e=0,i=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=e,this.z=i}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(o.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(o.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,r=this.z,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6]*r,this.y=n[1]*e+n[4]*i+n[7]*r,this.z=n[2]*e+n[5]*i+n[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,r=this.z,n=t.elements,s=1/(n[3]*e+n[7]*i+n[11]*r+n[15]);return this.x=(n[0]*e+n[4]*i+n[8]*r+n[12])*s,this.y=(n[1]*e+n[5]*i+n[9]*r+n[13])*s,this.z=(n[2]*e+n[6]*i+n[10]*r+n[14])*s,this}applyQuaternion(t){const e=this.x,i=this.y,r=this.z,n=t.x,s=t.y,a=t.z,o=t.w,h=o*e+s*r-a*i,u=o*i+a*e-n*r,l=o*r+n*i-s*e,c=-n*e-s*i-a*r;return this.x=h*o+c*-n+u*-a-l*-s,this.y=u*o+c*-s+l*-n-h*-a,this.z=l*o+c*-a+h*-s-u*-n,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,r=this.z,n=t.elements;return this.x=n[0]*e+n[4]*i+n[8]*r,this.y=n[1]*e+n[5]*i+n[9]*r,this.z=n[2]*e+n[6]*i+n[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,r=t.y,n=t.z,s=e.x,a=e.y,o=e.z;return this.x=r*o-n*a,this.y=n*s-i*o,this.z=i*a-r*s,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return a.copy(this).projectOnVector(t),this.sub(a)}reflect(t){return this.sub(a.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(r.MathUtils.clamp(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const a=new s,o=new n.Quaternion},function(t,e,i){"use strict";i.d(e,"UniformsLib",function(){return a});var r=i(5),n=i(3),s=i(10);const a={common:{diffuse:{value:new r.Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new s.Matrix3},uv2Transform:{value:new s.Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new n.Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new r.Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new r.Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new s.Matrix3}},sprite:{diffuse:{value:new r.Color(15658734)},opacity:{value:1},center:{value:new n.Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new s.Matrix3}}}},function(t,e,i){"use strict";i.d(e,"Vector2",function(){return r});class r{constructor(t=0,e=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),r=Math.sin(e),n=this.x-t.x,s=this.y-t.y;return this.x=n*i-s*r+t.x,this.y=n*r+s*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}},function(t,e,i){"use strict";i.d(e,"Float32BufferAttribute",function(){return y}),i.d(e,"Uint32BufferAttribute",function(){return x}),i.d(e,"Uint16BufferAttribute",function(){return f}),i.d(e,"BufferAttribute",function(){return l});var r=i(11),n=i(1),s=i(3),a=i(5),o=i(0);const h=new n.Vector3,u=new s.Vector2;function l(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.usage=o.StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}function c(t,e,i){l.call(this,new Int8Array(t),e,i)}function d(t,e,i){l.call(this,new Uint8Array(t),e,i)}function p(t,e,i){l.call(this,new Uint8ClampedArray(t),e,i)}function m(t,e,i){l.call(this,new Int16Array(t),e,i)}function f(t,e,i){l.call(this,new Uint16Array(t),e,i)}function g(t,e,i){l.call(this,new Int32Array(t),e,i)}function x(t,e,i){l.call(this,new Uint32Array(t),e,i)}function y(t,e,i){l.call(this,new Float32Array(t),e,i)}function b(t,e,i){l.call(this,new Float64Array(t),e,i)}Object.defineProperty(l.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(l.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let r=0,n=this.itemSize;r<n;r++)this.array[t+r]=e.array[i+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){const e=this.array;let i=0;for(let r=0,n=t.length;r<n;r++){let n=t[r];void 0===n&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),n=new a.Color),e[i++]=n.r,e[i++]=n.g,e[i++]=n.b}return this},copyVector2sArray:function(t){const e=this.array;let i=0;for(let r=0,n=t.length;r<n;r++){let n=t[r];void 0===n&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),n=new s.Vector2),e[i++]=n.x,e[i++]=n.y}return this},copyVector3sArray:function(t){const e=this.array;let i=0;for(let r=0,s=t.length;r<s;r++){let s=t[r];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),s=new n.Vector3),e[i++]=s.x,e[i++]=s.y,e[i++]=s.z}return this},copyVector4sArray:function(t){const e=this.array;let i=0;for(let n=0,s=t.length;n<s;n++){let s=t[n];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),s=new r.Vector4),e[i++]=s.x,e[i++]=s.y,e[i++]=s.z,e[i++]=s.w}return this},applyMatrix3:function(t){if(2===this.itemSize)for(let e=0,i=this.count;e<i;e++)u.fromBufferAttribute(this,e),u.applyMatrix3(t),this.setXY(e,u.x,u.y);else if(3===this.itemSize)for(let e=0,i=this.count;e<i;e++)h.fromBufferAttribute(this,e),h.applyMatrix3(t),this.setXYZ(e,h.x,h.y,h.z);return this},applyMatrix4:function(t){for(let e=0,i=this.count;e<i;e++)h.x=this.getX(e),h.y=this.getY(e),h.z=this.getZ(e),h.applyMatrix4(t),this.setXYZ(e,h.x,h.y,h.z);return this},applyNormalMatrix:function(t){for(let e=0,i=this.count;e<i;e++)h.x=this.getX(e),h.y=this.getY(e),h.z=this.getZ(e),h.applyNormalMatrix(t),this.setXYZ(e,h.x,h.y,h.z);return this},transformDirection:function(t){for(let e=0,i=this.count;e<i;e++)h.x=this.getX(e),h.y=this.getY(e),h.z=this.getZ(e),h.transformDirection(t),this.setXYZ(e,h.x,h.y,h.z);return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this},setXYZW:function(t,e,i,r,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=n,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),c.prototype=Object.create(l.prototype),c.prototype.constructor=c,d.prototype=Object.create(l.prototype),d.prototype.constructor=d,p.prototype=Object.create(l.prototype),p.prototype.constructor=p,m.prototype=Object.create(l.prototype),m.prototype.constructor=m,f.prototype=Object.create(l.prototype),f.prototype.constructor=f,g.prototype=Object.create(l.prototype),g.prototype.constructor=g,x.prototype=Object.create(l.prototype),x.prototype.constructor=x,y.prototype=Object.create(l.prototype),y.prototype.constructor=y,b.prototype=Object.create(l.prototype),b.prototype.constructor=b},function(t,e,i){"use strict";i.d(e,"Color",function(){return l});var r=i(6);const n={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},s={h:0,s:0,l:0},a={h:0,s:0,l:0};function o(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}function h(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function u(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class l{constructor(t,e,i){return Object.defineProperty(this,"isColor",{value:!0}),void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,e,i){return this.r=t,this.g=e,this.b=i,this}setHSL(t,e,i){if(t=r.MathUtils.euclideanModulo(t,1),e=r.MathUtils.clamp(e,0,1),i=r.MathUtils.clamp(i,0,1),0===e)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+e):i+e-i*e,n=2*i-r;this.r=o(n,r,t+1/3),this.g=o(n,r,t),this.b=o(n,r,t-1/3)}return this}setStyle(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){let t;const r=i[1],n=i[2];switch(r){case"rgb":case"rgba":if(t=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,e(t[5]),this;if(t=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,e(t[5]),this;break;case"hsl":case"hsla":if(t=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){const i=parseFloat(t[1])/360,r=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100;return e(t[5]),this.setHSL(i,r,n)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){const t=i[1],e=t.length;if(3===e)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===e)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=n[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t,e){void 0===e&&(e=2);const i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=h(t.r),this.g=h(t.g),this.b=h(t.b),this}copyLinearToSRGB(t){return this.r=u(t.r),this.g=u(t.g),this.b=u(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});const e=this.r,i=this.g,r=this.b,n=Math.max(e,i,r),s=Math.min(e,i,r);let a,o;const h=(s+n)/2;if(s===n)a=0,o=0;else{const t=n-s;switch(o=h<=.5?t/(n+s):t/(2-n-s),n){case e:a=(i-r)/t+(i<r?6:0);break;case i:a=(r-e)/t+2;break;case r:a=(e-i)/t+4}a/=6}return t.h=a,t.s=o,t.l=h,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,e,i){return this.getHSL(s),s.h+=t,s.s+=e,s.l+=i,this.setHSL(s.h,s.s,s.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpHSL(t,e){this.getHSL(s),t.getHSL(a);const i=r.MathUtils.lerp(s.h,a.h,e),n=r.MathUtils.lerp(s.s,a.s,e),o=r.MathUtils.lerp(s.l,a.l,e);return this.setHSL(i,n,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}l.NAMES=n,l.prototype.r=1,l.prototype.g=1,l.prototype.b=1},function(t,e,i){"use strict";i.d(e,"MathUtils",function(){return s});const r=[];for(let t=0;t<256;t++)r[t]=(t<16?"0":"")+t.toString(16);let n=1234567;const s={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(r[255&t]+r[t>>8&255]+r[t>>16&255]+r[t>>24&255]+"-"+r[255&e]+r[e>>8&255]+"-"+r[e>>16&15|64]+r[e>>24&255]+"-"+r[63&i|128]+r[i>>8&255]+"-"+r[i>>16&255]+r[i>>24&255]+r[255&n]+r[n>>8&255]+r[n>>16&255]+r[n>>24&255]).toUpperCase()},clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,r,n){return r+(t-e)*(n-r)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(n=t%2147483647),((n=16807*n%2147483647)-1)/2147483646},degToRad:function(t){return t*s.DEG2RAD},radToDeg:function(t){return t*s.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,i,r,n){const s=Math.cos,a=Math.sin,o=s(i/2),h=a(i/2),u=s((e+r)/2),l=a((e+r)/2),c=s((e-r)/2),d=a((e-r)/2),p=s((r-e)/2),m=a((r-e)/2);switch(n){case"XYX":t.set(o*l,h*c,h*d,o*u);break;case"YZY":t.set(h*d,o*l,h*c,o*u);break;case"ZXZ":t.set(h*c,h*d,o*l,o*u);break;case"XZX":t.set(o*l,h*m,h*p,o*u);break;case"YXY":t.set(h*p,o*l,h*m,o*u);break;case"ZYZ":t.set(h*m,h*p,o*l,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}}},function(t,e,i){"use strict";function r(t){const e={};for(const i in t){e[i]={};for(const r in t[i]){const n=t[i][r];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)?e[i][r]=n.clone():Array.isArray(n)?e[i][r]=n.slice():e[i][r]=n}}return e}function n(t){const e={};for(let i=0;i<t.length;i++){const n=r(t[i]);for(const t in n)e[t]=n[t]}return e}i.d(e,"cloneUniforms",function(){return r}),i.d(e,"mergeUniforms",function(){return n}),i.d(e,"UniformsUtils",function(){return s});const s={clone:r,merge:n}},function(t,e,i){"use strict";i.d(e,"Object3D",function(){return T});var r=i(21),n=i(1),s=i(9),a=i(15),o=i(83),h=i(82),u=i(10),l=i(6);let c=0;const d=new n.Vector3,p=new r.Quaternion,m=new s.Matrix4,f=new n.Vector3,g=new n.Vector3,x=new n.Vector3,y=new r.Quaternion,b=new n.Vector3(1,0,0),M=new n.Vector3(0,1,0),v=new n.Vector3(0,0,1),_={type:"added"},w={type:"removed"};function T(){Object.defineProperty(this,"id",{value:c++}),this.uuid=l.MathUtils.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=T.DefaultUp.clone();const t=new n.Vector3,e=new o.Euler,i=new r.Quaternion,a=new n.Vector3(1,1,1);e._onChange(function(){i.setFromEuler(e,!1)}),i._onChange(function(){e.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new s.Matrix4},normalMatrix:{value:new u.Matrix3}}),this.matrix=new s.Matrix4,this.matrixWorld=new s.Matrix4,this.matrixAutoUpdate=T.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new h.Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}T.DefaultUp=new n.Vector3(0,1,0),T.DefaultMatrixAutoUpdate=!0,T.prototype=Object.assign(Object.create(a.EventDispatcher.prototype),{constructor:T,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return p.setFromAxisAngle(t,e),this.quaternion.multiply(p),this},rotateOnWorldAxis:function(t,e){return p.setFromAxisAngle(t,e),this.quaternion.premultiply(p),this},rotateX:function(t){return this.rotateOnAxis(b,t)},rotateY:function(t){return this.rotateOnAxis(M,t)},rotateZ:function(t){return this.rotateOnAxis(v,t)},translateOnAxis:function(t,e){return d.copy(t).applyQuaternion(this.quaternion),this.position.add(d.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(b,t)},translateY:function(t){return this.translateOnAxis(M,t)},translateZ:function(t){return this.translateOnAxis(v,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(m.getInverse(this.matrixWorld))},lookAt:function(t,e,i){t.isVector3?f.copy(t):f.set(t,e,i);const r=this.parent;this.updateWorldMatrix(!0,!1),g.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?m.lookAt(g,f,this.up):m.lookAt(f,g,this.up),this.quaternion.setFromRotationMatrix(m),r&&(m.extractRotation(r.matrixWorld),p.setFromRotationMatrix(m),this.quaternion.premultiply(p.inverse()))},add:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(_)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(w)),this},removeAll:function(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(w)}return this.children.length=0,this},attach:function(t){return this.updateWorldMatrix(!0,!1),m.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),m.multiply(t.parent.matrixWorld)),t.applyMatrix4(m),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(let i=0,r=this.children.length;i<r;i++){const r=this.children[i].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new n.Vector3),this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new r.Quaternion),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(g,t,x),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new n.Vector3),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(g,y,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new n.Vector3),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1===this.visible)return;t(this);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].traverseVisible(t)},traverseAncestors:function(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){const i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,i=t.length;e<i;e++)t[e].updateWorldMatrix(!1,!0)}},toJSON:function(t){const e=void 0===t||"string"==typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function n(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){r.geometry=n(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const i=e.shapes;if(Array.isArray(i))for(let e=0,r=i.length;e<r;e++){const r=i[e];n(t.shapes,r)}else n(t.shapes,i)}}if(void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let i=0,r=this.material.length;i<r;i++)e.push(n(t.materials,this.material[i]));r.material=e}else r.material=n(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(e){const e=s(t.geometries),r=s(t.materials),n=s(t.textures),a=s(t.images),o=s(t.shapes);e.length>0&&(i.geometries=e),r.length>0&&(i.materials=r),n.length>0&&(i.textures=n),a.length>0&&(i.images=a),o.length>0&&(i.shapes=o)}return i.object=r,i;function s(t){const e=[];for(const i in t){const r=t[i];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const i=t.children[e];this.add(i.clone())}return this}})},function(t,e,i){"use strict";i.d(e,"Matrix4",function(){return n});var r=i(1);class n{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,i,r,n,s,a,o,h,u,l,c,d,p,m,f){const g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=r,g[1]=n,g[5]=s,g[9]=a,g[13]=o,g[2]=h,g[6]=u,g[10]=l,g[14]=c,g[3]=d,g[7]=p,g[11]=m,g[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new n).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,r=1/s.setFromMatrixColumn(t,0).length(),n=1/s.setFromMatrixColumn(t,1).length(),a=1/s.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*n,e[5]=i[5]*n,e[6]=i[6]*n,e[7]=0,e[8]=i[8]*a,e[9]=i[9]*a,e[10]=i[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,i=t.x,r=t.y,n=t.z,s=Math.cos(i),a=Math.sin(i),o=Math.cos(r),h=Math.sin(r),u=Math.cos(n),l=Math.sin(n);if("XYZ"===t.order){const t=s*u,i=s*l,r=a*u,n=a*l;e[0]=o*u,e[4]=-o*l,e[8]=h,e[1]=i+r*h,e[5]=t-n*h,e[9]=-a*o,e[2]=n-t*h,e[6]=r+i*h,e[10]=s*o}else if("YXZ"===t.order){const t=o*u,i=o*l,r=h*u,n=h*l;e[0]=t+n*a,e[4]=r*a-i,e[8]=s*h,e[1]=s*l,e[5]=s*u,e[9]=-a,e[2]=i*a-r,e[6]=n+t*a,e[10]=s*o}else if("ZXY"===t.order){const t=o*u,i=o*l,r=h*u,n=h*l;e[0]=t-n*a,e[4]=-s*l,e[8]=r+i*a,e[1]=i+r*a,e[5]=s*u,e[9]=n-t*a,e[2]=-s*h,e[6]=a,e[10]=s*o}else if("ZYX"===t.order){const t=s*u,i=s*l,r=a*u,n=a*l;e[0]=o*u,e[4]=r*h-i,e[8]=t*h+n,e[1]=o*l,e[5]=n*h+t,e[9]=i*h-r,e[2]=-h,e[6]=a*o,e[10]=s*o}else if("YZX"===t.order){const t=s*o,i=s*h,r=a*o,n=a*h;e[0]=o*u,e[4]=n-t*l,e[8]=r*l+i,e[1]=l,e[5]=s*u,e[9]=-a*u,e[2]=-h*u,e[6]=i*l+r,e[10]=t-n*l}else if("XZY"===t.order){const t=s*o,i=s*h,r=a*o,n=a*h;e[0]=o*u,e[4]=-l,e[8]=h*u,e[1]=t*l+n,e[5]=s*u,e[9]=i*l-r,e[2]=r*l-i,e[6]=a*u,e[10]=n*l+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(o,t,h)}lookAt(t,e,i){const r=this.elements;return c.subVectors(t,e),0===c.lengthSq()&&(c.z=1),c.normalize(),u.crossVectors(i,c),0===u.lengthSq()&&(1===Math.abs(i.z)?c.x+=1e-4:c.z+=1e-4,c.normalize(),u.crossVectors(i,c)),u.normalize(),l.crossVectors(c,u),r[0]=u.x,r[4]=l.x,r[8]=c.x,r[1]=u.y,r[5]=l.y,r[9]=c.y,r[2]=u.z,r[6]=l.z,r[10]=c.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,r=e.elements,n=this.elements,s=i[0],a=i[4],o=i[8],h=i[12],u=i[1],l=i[5],c=i[9],d=i[13],p=i[2],m=i[6],f=i[10],g=i[14],x=i[3],y=i[7],b=i[11],M=i[15],v=r[0],_=r[4],w=r[8],T=r[12],S=r[1],E=r[5],A=r[9],R=r[13],F=r[2],L=r[6],B=r[10],C=r[14],U=r[3],P=r[7],N=r[11],O=r[15];return n[0]=s*v+a*S+o*F+h*U,n[4]=s*_+a*E+o*L+h*P,n[8]=s*w+a*A+o*B+h*N,n[12]=s*T+a*R+o*C+h*O,n[1]=u*v+l*S+c*F+d*U,n[5]=u*_+l*E+c*L+d*P,n[9]=u*w+l*A+c*B+d*N,n[13]=u*T+l*R+c*C+d*O,n[2]=p*v+m*S+f*F+g*U,n[6]=p*_+m*E+f*L+g*P,n[10]=p*w+m*A+f*B+g*N,n[14]=p*T+m*R+f*C+g*O,n[3]=x*v+y*S+b*F+M*U,n[7]=x*_+y*E+b*L+M*P,n[11]=x*w+y*A+b*B+M*N,n[15]=x*T+y*R+b*C+M*O,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],r=t[8],n=t[12],s=t[1],a=t[5],o=t[9],h=t[13],u=t[2],l=t[6],c=t[10],d=t[14];return t[3]*(+n*o*l-r*h*l-n*a*c+i*h*c+r*a*d-i*o*d)+t[7]*(+e*o*d-e*h*c+n*s*c-r*s*d+r*h*u-n*o*u)+t[11]*(+e*h*l-e*a*d-n*s*l+i*s*d+n*a*u-i*h*u)+t[15]*(-r*a*u-e*o*l+e*a*c+r*s*l-i*s*c+i*o*u)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this}getInverse(t,e){void 0!==e&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");const i=this.elements,r=t.elements,n=r[0],s=r[1],a=r[2],o=r[3],h=r[4],u=r[5],l=r[6],c=r[7],d=r[8],p=r[9],m=r[10],f=r[11],g=r[12],x=r[13],y=r[14],b=r[15],M=p*y*c-x*m*c+x*l*f-u*y*f-p*l*b+u*m*b,v=g*m*c-d*y*c-g*l*f+h*y*f+d*l*b-h*m*b,_=d*x*c-g*p*c+g*u*f-h*x*f-d*u*b+h*p*b,w=g*p*l-d*x*l-g*u*m+h*x*m+d*u*y-h*p*y,T=n*M+s*v+a*_+o*w;if(0===T)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/T;return i[0]=M*S,i[1]=(x*m*o-p*y*o-x*a*f+s*y*f+p*a*b-s*m*b)*S,i[2]=(u*y*o-x*l*o+x*a*c-s*y*c-u*a*b+s*l*b)*S,i[3]=(p*l*o-u*m*o-p*a*c+s*m*c+u*a*f-s*l*f)*S,i[4]=v*S,i[5]=(d*y*o-g*m*o+g*a*f-n*y*f-d*a*b+n*m*b)*S,i[6]=(g*l*o-h*y*o-g*a*c+n*y*c+h*a*b-n*l*b)*S,i[7]=(h*m*o-d*l*o+d*a*c-n*m*c-h*a*f+n*l*f)*S,i[8]=_*S,i[9]=(g*p*o-d*x*o-g*s*f+n*x*f+d*s*b-n*p*b)*S,i[10]=(h*x*o-g*u*o+g*s*c-n*x*c-h*s*b+n*u*b)*S,i[11]=(d*u*o-h*p*o-d*s*c+n*p*c+h*s*f-n*u*f)*S,i[12]=w*S,i[13]=(d*x*a-g*p*a+g*s*m-n*x*m-d*s*y+n*p*y)*S,i[14]=(g*u*a-h*x*a-g*s*l+n*x*l+h*s*y-n*u*y)*S,i[15]=(h*p*a-d*u*a+d*s*l-n*p*l-h*s*m+n*u*m)*S,this}scale(t){const e=this.elements,i=t.x,r=t.y,n=t.z;return e[0]*=i,e[4]*=r,e[8]*=n,e[1]*=i,e[5]*=r,e[9]*=n,e[2]*=i,e[6]*=r,e[10]*=n,e[3]*=i,e[7]*=r,e[11]*=n,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),r=Math.sin(e),n=1-i,s=t.x,a=t.y,o=t.z,h=n*s,u=n*a;return this.set(h*s+i,h*a-r*o,h*o+r*a,0,h*a+r*o,u*a+i,u*o-r*s,0,h*o-r*a,u*o+r*s,n*o*o+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this}compose(t,e,i){const r=this.elements,n=e._x,s=e._y,a=e._z,o=e._w,h=n+n,u=s+s,l=a+a,c=n*h,d=n*u,p=n*l,m=s*u,f=s*l,g=a*l,x=o*h,y=o*u,b=o*l,M=i.x,v=i.y,_=i.z;return r[0]=(1-(m+g))*M,r[1]=(d+b)*M,r[2]=(p-y)*M,r[3]=0,r[4]=(d-b)*v,r[5]=(1-(c+g))*v,r[6]=(f+x)*v,r[7]=0,r[8]=(p+y)*_,r[9]=(f-x)*_,r[10]=(1-(c+m))*_,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,i){const r=this.elements;let n=s.set(r[0],r[1],r[2]).length();const o=s.set(r[4],r[5],r[6]).length(),h=s.set(r[8],r[9],r[10]).length();this.determinant()<0&&(n=-n),t.x=r[12],t.y=r[13],t.z=r[14],a.copy(this);const u=1/n,l=1/o,c=1/h;return a.elements[0]*=u,a.elements[1]*=u,a.elements[2]*=u,a.elements[4]*=l,a.elements[5]*=l,a.elements[6]*=l,a.elements[8]*=c,a.elements[9]*=c,a.elements[10]*=c,e.setFromRotationMatrix(a),i.x=n,i.y=o,i.z=h,this}makePerspective(t,e,i,r,n,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,o=2*n/(e-t),h=2*n/(i-r),u=(e+t)/(e-t),l=(i+r)/(i-r),c=-(s+n)/(s-n),d=-2*s*n/(s-n);return a[0]=o,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=h,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,i,r,n,s){const a=this.elements,o=1/(e-t),h=1/(i-r),u=1/(s-n),l=(e+t)*o,c=(i+r)*h,d=(s+n)*u;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*h,a[9]=0,a[13]=-c,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<16;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const s=new r.Vector3,a=new n,o=new r.Vector3(0,0,0),h=new r.Vector3(1,1,1),u=new r.Vector3,l=new r.Vector3,c=new r.Vector3},function(t,e,i){"use strict";i.d(e,"Matrix3",function(){return r});class r{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,i,r,n,s,a,o,h){const u=this.elements;return u[0]=t,u[1]=r,u[2]=a,u[3]=e,u[4]=n,u[5]=o,u[6]=i,u[7]=s,u[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,r=e.elements,n=this.elements,s=i[0],a=i[3],o=i[6],h=i[1],u=i[4],l=i[7],c=i[2],d=i[5],p=i[8],m=r[0],f=r[3],g=r[6],x=r[1],y=r[4],b=r[7],M=r[2],v=r[5],_=r[8];return n[0]=s*m+a*x+o*M,n[3]=s*f+a*y+o*v,n[6]=s*g+a*b+o*_,n[1]=h*m+u*x+l*M,n[4]=h*f+u*y+l*v,n[7]=h*g+u*b+l*_,n[2]=c*m+d*x+p*M,n[5]=c*f+d*y+p*v,n[8]=c*g+d*b+p*_,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],a=t[5],o=t[6],h=t[7],u=t[8];return e*s*u-e*a*h-i*n*u+i*a*o+r*n*h-r*s*o}getInverse(t,e){void 0!==e&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");const i=t.elements,r=this.elements,n=i[0],s=i[1],a=i[2],o=i[3],h=i[4],u=i[5],l=i[6],c=i[7],d=i[8],p=d*h-u*c,m=u*l-d*o,f=c*o-h*l,g=n*p+s*m+a*f;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);const x=1/g;return r[0]=p*x,r[1]=(a*c-d*s)*x,r[2]=(u*s-a*h)*x,r[3]=m*x,r[4]=(d*n-a*l)*x,r[5]=(a*o-u*n)*x,r[6]=f*x,r[7]=(s*l-c*n)*x,r[8]=(h*n-s*o)*x,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).getInverse(this).transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,r,n,s,a){const o=Math.cos(n),h=Math.sin(n);this.set(i*o,i*h,-i*(o*s+h*a)+s+t,-r*h,r*o,-r*(-h*s+o*a)+a+e,0,0,1)}scale(t,e){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),r=this.elements,n=r[0],s=r[3],a=r[6],o=r[1],h=r[4],u=r[7];return r[0]=e*n+i*o,r[3]=e*s+i*h,r[6]=e*a+i*u,r[1]=-i*n+e*o,r[4]=-i*s+e*h,r[7]=-i*a+e*u,this}translate(t,e){const i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<9;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}}},function(t,e,i){"use strict";i.d(e,"Vector4",function(){return r});class r{constructor(t=0,e=0,i=0,r=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=t,this.y=e,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,r=this.z,n=this.w,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r+s[12]*n,this.y=s[1]*e+s[5]*i+s[9]*r+s[13]*n,this.z=s[2]*e+s[6]*i+s[10]*r+s[14]*n,this.w=s[3]*e+s[7]*i+s[11]*r+s[15]*n,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,r,n;const s=t.elements,a=s[0],o=s[4],h=s[8],u=s[1],l=s[5],c=s[9],d=s[2],p=s[6],m=s[10];if(Math.abs(o-u)<.01&&Math.abs(h-d)<.01&&Math.abs(c-p)<.01){if(Math.abs(o+u)<.1&&Math.abs(h+d)<.1&&Math.abs(c+p)<.1&&Math.abs(a+l+m-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const t=(a+1)/2,s=(l+1)/2,f=(m+1)/2,g=(o+u)/4,x=(h+d)/4,y=(c+p)/4;return t>s&&t>f?t<.01?(i=0,r=.707106781,n=.707106781):(r=g/(i=Math.sqrt(t)),n=x/i):s>f?s<.01?(i=.707106781,r=0,n=.707106781):(i=g/(r=Math.sqrt(s)),n=y/r):f<.01?(i=.707106781,r=.707106781,n=0):(i=x/(n=Math.sqrt(f)),r=y/n),this.set(i,r,n,e),this}let f=Math.sqrt((p-c)*(p-c)+(h-d)*(h-d)+(u-o)*(u-o));return Math.abs(f)<.001&&(f=1),this.x=(p-c)/f,this.y=(h-d)/f,this.z=(u-o)/f,this.w=Math.acos((a+l+m-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}},function(t,e,i){"use strict";i.d(e,"Material",function(){return o});var r=i(15),n=i(0),s=i(6);let a=0;function o(){Object.defineProperty(this,"id",{value:a++}),this.uuid=s.MathUtils.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=n.NormalBlending,this.side=n.FrontSide,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=n.SrcAlphaFactor,this.blendDst=n.OneMinusSrcAlphaFactor,this.blendEquation=n.AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=n.LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=n.AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=n.KeepStencilOp,this.stencilZFail=n.KeepStencilOp,this.stencilZPass=n.KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}o.prototype=Object.assign(Object.create(r.EventDispatcher.prototype),{constructor:o,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(void 0!==t)for(const e in t){const i=t[e];if(void 0===i){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===n.FlatShading;continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[e]=i:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}},toJSON:function(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const i in t){const r=t[i];delete r.metadata,e.push(r)}return e}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(i.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,i.reflectivity=this.reflectivity,i.refractionRatio=this.refractionRatio,void 0!==this.combine&&(i.combine=this.combine),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==n.NormalBlending&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==n.FrontSide&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.morphNormals&&(i.morphNormals=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),e){const e=r(t.textures),n=r(t.images);e.length>0&&(i.textures=e),n.length>0&&(i.images=n)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(null!==e){const t=e.length;i=new Array(t);for(let r=0;r!==t;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(o.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}})},function(t,e,i){"use strict";i.d(e,"Texture",function(){return l});var r=i(15),n=i(0),s=i(6),a=i(3),o=i(10),h=i(36);let u=0;function l(t,e,i,r,h,c,d,p,m,f){Object.defineProperty(this,"id",{value:u++}),this.uuid=s.MathUtils.generateUUID(),this.name="",this.image=void 0!==t?t:l.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:l.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:n.ClampToEdgeWrapping,this.wrapT=void 0!==r?r:n.ClampToEdgeWrapping,this.magFilter=void 0!==h?h:n.LinearFilter,this.minFilter=void 0!==c?c:n.LinearMipmapLinearFilter,this.anisotropy=void 0!==m?m:1,this.format=void 0!==d?d:n.RGBAFormat,this.internalFormat=null,this.type=void 0!==p?p:n.UnsignedByteType,this.offset=new a.Vector2(0,0),this.repeat=new a.Vector2(1,1),this.center=new a.Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new o.Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==f?f:n.LinearEncoding,this.version=0,this.onUpdate=null}l.DEFAULT_IMAGE=void 0,l.DEFAULT_MAPPING=n.UVMapping,l.prototype=Object.assign(Object.create(r.EventDispatcher.prototype),{constructor:l,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=s.MathUtils.generateUUID()),!e&&void 0===t.images[r.uuid]){let e;if(Array.isArray(r)){e=[];for(let t=0,i=r.length;t<i;t++)e.push(h.ImageUtils.getDataURL(r[t]))}else e=h.ImageUtils.getDataURL(r);t.images[r.uuid]={uuid:r.uuid,url:e}}i.image=r.uuid}return e||(t.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==n.UVMapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case n.RepeatWrapping:t.x=t.x-Math.floor(t.x);break;case n.ClampToEdgeWrapping:t.x=t.x<0?0:1;break;case n.MirroredRepeatWrapping:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case n.RepeatWrapping:t.y=t.y-Math.floor(t.y);break;case n.ClampToEdgeWrapping:t.y=t.y<0?0:1;break;case n.MirroredRepeatWrapping:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(l.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}})},function(t,e,i){"use strict";i.d(e,"BufferGeometry",function(){return v});var r=i(1),n=i(20),s=i(15),a=i(4),o=i(23),h=i(76),u=i(8),l=i(9),c=i(10),d=i(6),p=i(30);let m=1;const f=new l.Matrix4,g=new u.Object3D,x=new r.Vector3,y=new n.Box3,b=new n.Box3,M=new r.Vector3;function v(){Object.defineProperty(this,"id",{value:m+=2}),this.uuid=d.MathUtils.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}v.prototype=Object.assign(Object.create(s.EventDispatcher.prototype),{constructor:v,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){return Array.isArray(t)?this.index=new(Object(p.arrayMax)(t)>65535?a.Uint32BufferAttribute:a.Uint16BufferAttribute)(t,1):this.index=t,this},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const e=(new c.Matrix3).getNormalMatrix(t);i.applyNormalMatrix(e),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return f.makeRotationX(t),this.applyMatrix4(f),this},rotateY:function(t){return f.makeRotationY(t),this.applyMatrix4(f),this},rotateZ:function(t){return f.makeRotationZ(t),this.applyMatrix4(f),this},translate:function(t,e,i){return f.makeTranslation(t,e,i),this.applyMatrix4(f),this},scale:function(t,e,i){return f.makeScale(t,e,i),this.applyMatrix4(f),this},lookAt:function(t){return g.lookAt(t),g.updateMatrix(),this.applyMatrix4(g.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(x).negate(),this.translate(x.x,x.y,x.z),this},setFromObject:function(t){const e=t.geometry;if(t.isPoints||t.isLine){const t=new a.Float32BufferAttribute(3*e.vertices.length,3),i=new a.Float32BufferAttribute(3*e.colors.length,3);if(this.setAttribute("position",t.copyVector3sArray(e.vertices)),this.setAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){const t=new a.Float32BufferAttribute(e.lineDistances.length,1);this.setAttribute("lineDistance",t.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){const e=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new a.Float32BufferAttribute(e,3)),this},updateFromObject:function(t){let e=t.geometry;if(t.isMesh){let t=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(t=void 0,e.elementsNeedUpdate=!1),void 0===t)return this.fromGeometry(e);t.verticesNeedUpdate=e.verticesNeedUpdate,t.normalsNeedUpdate=e.normalsNeedUpdate,t.colorsNeedUpdate=e.colorsNeedUpdate,t.uvsNeedUpdate=e.uvsNeedUpdate,t.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=t}if(!0===e.verticesNeedUpdate){const t=this.attributes.position;void 0!==t&&(t.copyVector3sArray(e.vertices),t.needsUpdate=!0),e.verticesNeedUpdate=!1}if(!0===e.normalsNeedUpdate){const t=this.attributes.normal;void 0!==t&&(t.copyVector3sArray(e.normals),t.needsUpdate=!0),e.normalsNeedUpdate=!1}if(!0===e.colorsNeedUpdate){const t=this.attributes.color;void 0!==t&&(t.copyColorsArray(e.colors),t.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){const t=this.attributes.uv;void 0!==t&&(t.copyVector2sArray(e.uvs),t.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){const t=this.attributes.lineDistance;void 0!==t&&(t.copyArray(e.lineDistances),t.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new h.DirectGeometry).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){const e=new Float32Array(3*t.vertices.length);if(this.setAttribute("position",new a.BufferAttribute(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){const e=new Float32Array(3*t.normals.length);this.setAttribute("normal",new a.BufferAttribute(e,3).copyVector3sArray(t.normals))}if(t.colors.length>0){const e=new Float32Array(3*t.colors.length);this.setAttribute("color",new a.BufferAttribute(e,3).copyColorsArray(t.colors))}if(t.uvs.length>0){const e=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new a.BufferAttribute(e,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){const e=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new a.BufferAttribute(e,2).copyVector2sArray(t.uvs2))}this.groups=t.groups;for(const e in t.morphTargets){const i=[],r=t.morphTargets[e];for(let t=0,e=r.length;t<e;t++){const e=r[t],n=new a.Float32BufferAttribute(3*e.data.length,3);n.name=e.name,i.push(n.copyVector3sArray(e.data))}this.morphAttributes[e]=i}if(t.skinIndices.length>0){const e=new a.Float32BufferAttribute(4*t.skinIndices.length,4);this.setAttribute("skinIndex",e.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){const e=new a.Float32BufferAttribute(4*t.skinWeights.length,4);this.setAttribute("skinWeight",e.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new n.Box3);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new r.Vector3(-1/0,-1/0,-1/0),new r.Vector3(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const i=e[t];y.setFromBufferAttribute(i),this.morphTargetsRelative?(M.addVectors(this.boundingBox.min,y.min),this.boundingBox.expandByPoint(M),M.addVectors(this.boundingBox.max,y.max),this.boundingBox.expandByPoint(M)):(this.boundingBox.expandByPoint(y.min),this.boundingBox.expandByPoint(y.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new o.Sphere);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new r.Vector3,1/0);if(t){const i=this.boundingSphere.center;if(y.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const i=e[t];b.setFromBufferAttribute(i),this.morphTargetsRelative?(M.addVectors(y.min,b.min),y.expandByPoint(M),M.addVectors(y.max,b.max),y.expandByPoint(M)):(y.expandByPoint(b.min),y.expandByPoint(b.max))}y.getCenter(i);let r=0;for(let e=0,n=t.count;e<n;e++)M.fromBufferAttribute(t,e),r=Math.max(r,i.distanceToSquared(M));if(e)for(let n=0,s=e.length;n<s;n++){const s=e[n],a=this.morphTargetsRelative;for(let e=0,n=s.count;e<n;e++)M.fromBufferAttribute(s,e),a&&(x.fromBufferAttribute(t,e),M.add(x)),r=Math.max(r,i.distanceToSquared(M))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let i=this.getAttribute("normal");if(void 0===i)i=new a.BufferAttribute(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(let t=0,e=i.count;t<e;t++)i.setXYZ(t,0,0,0);const n=new r.Vector3,s=new r.Vector3,o=new r.Vector3,h=new r.Vector3,u=new r.Vector3,l=new r.Vector3,c=new r.Vector3,d=new r.Vector3;if(t)for(let r=0,a=t.count;r<a;r+=3){const a=t.getX(r+0),p=t.getX(r+1),m=t.getX(r+2);n.fromBufferAttribute(e,a),s.fromBufferAttribute(e,p),o.fromBufferAttribute(e,m),c.subVectors(o,s),d.subVectors(n,s),c.cross(d),h.fromBufferAttribute(i,a),u.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),h.add(c),u.add(c),l.add(c),i.setXYZ(a,h.x,h.y,h.z),i.setXYZ(p,u.x,u.y,u.z),i.setXYZ(m,l.x,l.y,l.z)}else for(let t=0,r=e.count;t<r;t+=3)n.fromBufferAttribute(e,t+0),s.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),c.subVectors(o,s),d.subVectors(n,s),c.cross(d),i.setXYZ(t+0,c.x,c.y,c.z),i.setXYZ(t+1,c.x,c.y,c.z),i.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}},merge:function(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(void 0===t.attributes[r])continue;const n=i[r].array,s=t.attributes[r],a=s.array,o=s.itemSize*e,h=Math.min(a.length,n.length-o);for(let t=0,e=o;t<h;t++,e++)n[e]=a[t]}return this},normalizeNormals:function(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)M.fromBufferAttribute(t,e),M.normalize(),t.setXYZ(e,M.x,M.y,M.z)},toNonIndexed:function(){function t(t,e){const i=t.array,r=t.itemSize,n=t.normalized,s=new i.constructor(e.length*r);let o=0,h=0;for(let t=0,n=e.length;t<n;t++){o=e[t]*r;for(let t=0;t<r;t++)s[h++]=i[o++]}return new a.BufferAttribute(s,r,n)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const e=new v,i=this.index.array,r=this.attributes;for(const n in r){const s=t(r[n],i);e.setAttribute(n,s)}const n=this.morphAttributes;for(const r in n){const s=[],a=n[r];for(let e=0,r=a.length;e<r;e++){const r=t(a[e],i);s.push(r)}e.morphAttributes[r]=s}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let t=0,i=s.length;t<i;t++){const i=s[t];e.addGroup(i.start,i.count,i.materialIndex)}return e},toJSON:function(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const e in i){const r=i[e],n=r.toJSON(t.data);""!==r.name&&(n.name=r.name),t.data.attributes[e]=n}const r={};let n=!1;for(const e in this.morphAttributes){const i=this.morphAttributes[e],s=[];for(let e=0,r=i.length;e<r;e++){const r=i[e],n=r.toJSON(t.data);""!==r.name&&(n.name=r.name),s.push(n)}s.length>0&&(r[e]=s,n=!0)}n&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t},clone:function(){return(new v).copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;null!==i&&this.setIndex(i.clone(e));const r=t.attributes;for(const t in r){const i=r[t];this.setAttribute(t,i.clone(e))}const n=t.morphAttributes;for(const t in n){const i=[],r=n[t];for(let t=0,n=r.length;t<n;t++)i.push(r[t].clone(e));this.morphAttributes[t]=i}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let t=0,e=s.length;t<e;t++){const e=s[t];this.addGroup(e.start,e.count,e.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=t.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}})},function(t,e,i){"use strict";function r(){}i.d(e,"EventDispatcher",function(){return r}),Object.assign(r.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){if(void 0===this._listeners)return;const i=this._listeners[t];if(void 0!==i){const t=i.indexOf(e);-1!==t&&i.splice(t,1)}},dispatchEvent:function(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const i=e.slice(0);for(let e=0,r=i.length;e<r;e++)i[e].call(this,t)}}})},function(t,e,i){"use strict";i.d(e,"ShaderMaterial",function(){return s});var r=i(12),n=i(7);function s(t){r.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=null,this.fragmentShader=null,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}s.prototype=Object.create(r.Material.prototype),s.prototype.constructor=s,s.prototype.isShaderMaterial=!0,s.prototype.copy=function(t){return r.Material.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Object(n.cloneUniforms)(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this},s.prototype.toJSON=function(t){const e=r.Material.prototype.toJSON.call(this,t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const r=this.uniforms[i].value;r&&r.isTexture?e.uniforms[i]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[i]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[i]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[i]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[i]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[i]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[i]={type:"m4",value:r.toArray()}:e.uniforms[i]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const i={};for(const t in this.extensions)!0===this.extensions[t]&&(i[t]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}},function(t,e,i){"use strict";i.d(e,"Plane",function(){return h});var r=i(10),n=i(1);const s=new n.Vector3,a=new n.Vector3,o=new r.Matrix3;class h{constructor(t,e){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==t?t:new n.Vector3(1,0,0),this.constant=void 0!==e?e:0}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const r=s.subVectors(i,e).cross(a.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new n.Vector3),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new n.Vector3);const i=t.delta(s),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;const a=-(t.start.dot(this.normal)+this.constant)/r;return a<0||a>1?void 0:e.copy(i).multiplyScalar(a).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new n.Vector3),t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||o.getNormalMatrix(t),r=this.coplanarPoint(s).applyMatrix4(t),n=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(n),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}},function(t,e,i){"use strict";i.d(e,"ShaderLib",function(){return l});var r=i(7),n=i(3),s=i(1),a=i(2),o=i(5),h=i(10);const u={},l={basic:{uniforms:Object(r.mergeUniforms)([a.UniformsLib.common,a.UniformsLib.specularmap,a.UniformsLib.envmap,a.UniformsLib.aomap,a.UniformsLib.lightmap,a.UniformsLib.fog]),vertexShader:u.meshbasic_vert,fragmentShader:u.meshbasic_frag},lambert:{uniforms:Object(r.mergeUniforms)([a.UniformsLib.common,a.UniformsLib.specularmap,a.UniformsLib.envmap,a.UniformsLib.aomap,a.UniformsLib.lightmap,a.UniformsLib.emissivemap,a.UniformsLib.fog,a.UniformsLib.lights,{emissive:{value:new o.Color(0)}}]),vertexShader:u.meshlambert_vert,fragmentShader:u.meshlambert_frag},phong:{uniforms:Object(r.mergeUniforms)([a.UniformsLib.common,a.UniformsLib.specularmap,a.UniformsLib.envmap,a.UniformsLib.aomap,a.UniformsLib.lightmap,a.UniformsLib.emissivemap,a.UniformsLib.bumpmap,a.UniformsLib.normalmap,a.UniformsLib.displacementmap,a.UniformsLib.fog,a.UniformsLib.lights,{emissive:{value:new o.Color(0)},specular:{value:new o.Color(1118481)},shininess:{value:30}}]),vertexShader:u.meshphong_vert,fragmentShader:u.meshphong_frag},standard:{uniforms:Object(r.mergeUniforms)([a.UniformsLib.common,a.UniformsLib.envmap,a.UniformsLib.aomap,a.UniformsLib.lightmap,a.UniformsLib.emissivemap,a.UniformsLib.bumpmap,a.UniformsLib.normalmap,a.UniformsLib.displacementmap,a.UniformsLib.roughnessmap,a.UniformsLib.metalnessmap,a.UniformsLib.fog,a.UniformsLib.lights,{emissive:{value:new o.Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:u.meshphysical_vert,fragmentShader:u.meshphysical_frag},toon:{uniforms:Object(r.mergeUniforms)([a.UniformsLib.common,a.UniformsLib.aomap,a.UniformsLib.lightmap,a.UniformsLib.emissivemap,a.UniformsLib.bumpmap,a.UniformsLib.normalmap,a.UniformsLib.displacementmap,a.UniformsLib.gradientmap,a.UniformsLib.fog,a.UniformsLib.lights,{emissive:{value:new o.Color(0)}}]),vertexShader:u.meshtoon_vert,fragmentShader:u.meshtoon_frag},matcap:{uniforms:Object(r.mergeUniforms)([a.UniformsLib.common,a.UniformsLib.bumpmap,a.UniformsLib.normalmap,a.UniformsLib.displacementmap,a.UniformsLib.fog,{matcap:{value:null}}]),vertexShader:u.meshmatcap_vert,fragmentShader:u.meshmatcap_frag},points:{uniforms:Object(r.mergeUniforms)([a.UniformsLib.points,a.UniformsLib.fog]),vertexShader:u.points_vert,fragmentShader:u.points_frag},dashed:{uniforms:Object(r.mergeUniforms)([a.UniformsLib.common,a.UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:u.linedashed_vert,fragmentShader:u.linedashed_frag},depth:{uniforms:Object(r.mergeUniforms)([a.UniformsLib.common,a.UniformsLib.displacementmap]),vertexShader:u.depth_vert,fragmentShader:u.depth_frag},normal:{uniforms:Object(r.mergeUniforms)([a.UniformsLib.common,a.UniformsLib.bumpmap,a.UniformsLib.normalmap,a.UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:u.normal_vert,fragmentShader:u.normal_frag},sprite:{uniforms:Object(r.mergeUniforms)([a.UniformsLib.sprite,a.UniformsLib.fog]),vertexShader:u.sprite_vert,fragmentShader:u.sprite_frag},background:{uniforms:{uvTransform:{value:new h.Matrix3},t2D:{value:null}},vertexShader:u.background_vert,fragmentShader:u.background_frag},cube:{uniforms:Object(r.mergeUniforms)([a.UniformsLib.envmap,{opacity:{value:1}}]),vertexShader:u.cube_vert,fragmentShader:u.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:u.equirect_vert,fragmentShader:u.equirect_frag},distanceRGBA:{uniforms:Object(r.mergeUniforms)([a.UniformsLib.common,a.UniformsLib.displacementmap,{referencePosition:{value:new s.Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:u.distanceRGBA_vert,fragmentShader:u.distanceRGBA_frag},shadow:{uniforms:Object(r.mergeUniforms)([a.UniformsLib.lights,a.UniformsLib.fog,{color:{value:new o.Color(0)},opacity:{value:1}}]),vertexShader:u.shadow_vert,fragmentShader:u.shadow_frag}};l.physical={uniforms:Object(r.mergeUniforms)([l.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new n.Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new o.Color(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:u.meshphysical_vert,fragmentShader:u.meshphysical_frag}},function(t,e,i){"use strict";i.d(e,"Mesh",function(){return B});var r=i(1),n=i(3),s=i(23),a=i(74),o=i(9),h=i(8),u=i(28),l=i(26),c=i(0),d=i(73),p=i(14);const m=new o.Matrix4,f=new a.Ray,g=new s.Sphere,x=new r.Vector3,y=new r.Vector3,b=new r.Vector3,M=new r.Vector3,v=new r.Vector3,_=new r.Vector3,w=new r.Vector3,T=new r.Vector3,S=new r.Vector3,E=new n.Vector2,A=new n.Vector2,R=new n.Vector2,F=new r.Vector3,L=new r.Vector3;function B(t,e){h.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new p.BufferGeometry,this.material=void 0!==e?e:new d.MeshBasicMaterial,this.updateMorphTargets()}function C(t,e,i,r,n,s,a,o){let h;if(null===(h=e.side===c.BackSide?r.intersectTriangle(a,s,n,!0,o):r.intersectTriangle(n,s,a,e.side!==c.DoubleSide,o)))return null;L.copy(o),L.applyMatrix4(t.matrixWorld);const u=i.ray.origin.distanceTo(L);return u<i.near||u>i.far?null:{distance:u,point:L.clone(),object:t}}function U(t,e,i,r,s,a,o,h,c,d,p,m){x.fromBufferAttribute(s,d),y.fromBufferAttribute(s,p),b.fromBufferAttribute(s,m);const f=t.morphTargetInfluences;if(e.morphTargets&&a&&f){w.set(0,0,0),T.set(0,0,0),S.set(0,0,0);for(let t=0,e=a.length;t<e;t++){const e=f[t],i=a[t];0!==e&&(M.fromBufferAttribute(i,d),v.fromBufferAttribute(i,p),_.fromBufferAttribute(i,m),o?(w.addScaledVector(M,e),T.addScaledVector(v,e),S.addScaledVector(_,e)):(w.addScaledVector(M.sub(x),e),T.addScaledVector(v.sub(y),e),S.addScaledVector(_.sub(b),e)))}x.add(w),y.add(T),b.add(S)}t.isSkinnedMesh&&(t.boneTransform(d,x),t.boneTransform(p,y),t.boneTransform(m,b));const g=C(t,e,i,r,x,y,b,F);if(g){h&&(E.fromBufferAttribute(h,d),A.fromBufferAttribute(h,p),R.fromBufferAttribute(h,m),g.uv=u.Triangle.getUV(F,x,y,b,E,A,R,new n.Vector2)),c&&(E.fromBufferAttribute(c,d),A.fromBufferAttribute(c,p),R.fromBufferAttribute(c,m),g.uv2=u.Triangle.getUV(F,x,y,b,E,A,R,new n.Vector2));const t=new l.Face3(d,p,m);u.Triangle.getNormal(x,y,b,t.normal),g.face=t}return g}B.prototype=Object.assign(Object.create(h.Object3D.prototype),{constructor:B,isMesh:!0,copy:function(t){return h.Object3D.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const t=e[i[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,i=t.length;e<i;e++){const i=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){const i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r)return;if(null===i.boundingSphere&&i.computeBoundingSphere(),g.copy(i.boundingSphere),g.applyMatrix4(s),!1===t.ray.intersectsSphere(g))return;if(m.getInverse(s),f.copy(t.ray).applyMatrix4(m),null!==i.boundingBox&&!1===f.intersectsBox(i.boundingBox))return;let a;if(i.isBufferGeometry){const n=i.index,s=i.attributes.position,o=i.morphAttributes.position,h=i.morphTargetsRelative,u=i.attributes.uv,l=i.attributes.uv2,c=i.groups,d=i.drawRange;if(null!==n)if(Array.isArray(r))for(let i=0,p=c.length;i<p;i++){const p=c[i],m=r[p.materialIndex];for(let i=Math.max(p.start,d.start),r=Math.min(p.start+p.count,d.start+d.count);i<r;i+=3){const r=n.getX(i),c=n.getX(i+1),d=n.getX(i+2);(a=U(this,m,t,f,s,o,h,u,l,r,c,d))&&(a.faceIndex=Math.floor(i/3),a.face.materialIndex=p.materialIndex,e.push(a))}}else{for(let i=Math.max(0,d.start),c=Math.min(n.count,d.start+d.count);i<c;i+=3){const c=n.getX(i),d=n.getX(i+1),p=n.getX(i+2);(a=U(this,r,t,f,s,o,h,u,l,c,d,p))&&(a.faceIndex=Math.floor(i/3),e.push(a))}}else if(void 0!==s)if(Array.isArray(r))for(let i=0,n=c.length;i<n;i++){const n=c[i],p=r[n.materialIndex];for(let i=Math.max(n.start,d.start),r=Math.min(n.start+n.count,d.start+d.count);i<r;i+=3){(a=U(this,p,t,f,s,o,h,u,l,i,i+1,i+2))&&(a.faceIndex=Math.floor(i/3),a.face.materialIndex=n.materialIndex,e.push(a))}}else{for(let i=Math.max(0,d.start),n=Math.min(s.count,d.start+d.count);i<n;i+=3){(a=U(this,r,t,f,s,o,h,u,l,i,i+1,i+2))&&(a.faceIndex=Math.floor(i/3),e.push(a))}}}else if(i.isGeometry){const s=Array.isArray(r),o=i.vertices,h=i.faces;let l;const c=i.faceVertexUvs[0];c.length>0&&(l=c);for(let i=0,c=h.length;i<c;i++){const c=h[i],d=s?r[c.materialIndex]:r;if(void 0===d)continue;const p=o[c.a],m=o[c.b],g=o[c.c];if(a=C(this,d,t,f,p,m,g,F)){if(l&&l[i]){const t=l[i];E.copy(t[0]),A.copy(t[1]),R.copy(t[2]),a.uv=u.Triangle.getUV(F,p,m,g,E,A,R,new n.Vector2)}a.face=c,a.faceIndex=i,e.push(a)}}}}})},function(t,e,i){"use strict";i.d(e,"Box3",function(){return n});var r=i(1);class n{constructor(t,e){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==t?t:new r.Vector3(1/0,1/0,1/0),this.max=void 0!==e?e:new r.Vector3(-1/0,-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,i=1/0,r=1/0,n=-1/0,s=-1/0,a=-1/0;for(let o=0,h=t.length;o<h;o+=3){const h=t[o],u=t[o+1],l=t[o+2];h<e&&(e=h),u<i&&(i=u),l<r&&(r=l),h>n&&(n=h),u>s&&(s=u),l>a&&(a=l)}return this.min.set(e,i,r),this.max.set(n,s,a),this}setFromBufferAttribute(t){let e=1/0,i=1/0,r=1/0,n=-1/0,s=-1/0,a=-1/0;for(let o=0,h=t.count;o<h;o++){const h=t.getX(o),u=t.getY(o),l=t.getZ(o);h<e&&(e=h),u<i&&(i=u),l<r&&(r=l),h>n&&(n=h),u>s&&(s=u),l>a&&(a=l)}return this.min.set(e,i,r),this.max.set(n,s,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=o.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new r.Vector3),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new r.Vector3),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),h.copy(e.boundingBox),h.applyMatrix4(t.matrixWorld),this.union(h));const i=t.children;for(let t=0,e=i.length;t<e;t++)this.expandByObject(i[t]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new r.Vector3),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,o),o.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(f),g.subVectors(this.max,f),u.subVectors(t.a,f),l.subVectors(t.b,f),c.subVectors(t.c,f),d.subVectors(l,u),p.subVectors(c,l),m.subVectors(u,c);let e=[0,-d.z,d.y,0,-p.z,p.y,0,-m.z,m.y,d.z,0,-d.x,p.z,0,-p.x,m.z,0,-m.x,-d.y,d.x,0,-p.y,p.x,0,-m.y,m.x,0];return!!s(e,u,l,c,g)&&(!!s(e=[1,0,0,0,1,0,0,0,1],u,l,c,g)&&(x.crossVectors(d,p),s(e=[x.x,x.y,x.z],u,l,c,g)))}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new r.Vector3),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return o.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(o).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(a),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}function s(t,e,i,r,n){for(let s=0,a=t.length-3;s<=a;s+=3){y.fromArray(t,s);const a=n.x*Math.abs(y.x)+n.y*Math.abs(y.y)+n.z*Math.abs(y.z),o=e.dot(y),h=i.dot(y),u=r.dot(y);if(Math.max(-Math.max(o,h,u),Math.min(o,h,u))>a)return!1}return!0}const a=[new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3],o=new r.Vector3,h=new n,u=new r.Vector3,l=new r.Vector3,c=new r.Vector3,d=new r.Vector3,p=new r.Vector3,m=new r.Vector3,f=new r.Vector3,g=new r.Vector3,x=new r.Vector3,y=new r.Vector3},function(t,e,i){"use strict";i.d(e,"Quaternion",function(){return n});var r=i(6);class n{constructor(t=0,e=0,i=0,r=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=e,this._z=i,this._w=r}static slerp(t,e,i,r){return i.copy(t).slerp(e,r)}static slerpFlat(t,e,i,r,n,s,a){let o=i[r+0],h=i[r+1],u=i[r+2],l=i[r+3];const c=n[s+0],d=n[s+1],p=n[s+2],m=n[s+3];if(l!==m||o!==c||h!==d||u!==p){let t=1-a;const e=o*c+h*d+u*p+l*m,i=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const n=Math.sqrt(r),s=Math.atan2(n,e*i);t=Math.sin(t*s)/n,a=Math.sin(a*s)/n}const n=a*i;if(o=o*t+c*n,h=h*t+d*n,u=u*t+p*n,l=l*t+m*n,t===1-a){const t=1/Math.sqrt(o*o+h*h+u*u+l*l);o*=t,h*=t,u*=t,l*=t}}t[e]=o,t[e+1]=h,t[e+2]=u,t[e+3]=l}static multiplyQuaternionsFlat(t,e,i,r,n,s){const a=i[r],o=i[r+1],h=i[r+2],u=i[r+3],l=n[s],c=n[s+1],d=n[s+2],p=n[s+3];return t[e]=a*p+u*l+o*d-h*c,t[e+1]=o*p+u*c+h*l-a*d,t[e+2]=h*p+u*d+a*c-o*l,t[e+3]=u*p-a*l-o*c-h*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=t._x,r=t._y,n=t._z,s=t._order,a=Math.cos,o=Math.sin,h=a(i/2),u=a(r/2),l=a(n/2),c=o(i/2),d=o(r/2),p=o(n/2);switch(s){case"XYZ":this._x=c*u*l+h*d*p,this._y=h*d*l-c*u*p,this._z=h*u*p+c*d*l,this._w=h*u*l-c*d*p;break;case"YXZ":this._x=c*u*l+h*d*p,this._y=h*d*l-c*u*p,this._z=h*u*p-c*d*l,this._w=h*u*l+c*d*p;break;case"ZXY":this._x=c*u*l-h*d*p,this._y=h*d*l+c*u*p,this._z=h*u*p+c*d*l,this._w=h*u*l-c*d*p;break;case"ZYX":this._x=c*u*l-h*d*p,this._y=h*d*l+c*u*p,this._z=h*u*p-c*d*l,this._w=h*u*l+c*d*p;break;case"YZX":this._x=c*u*l+h*d*p,this._y=h*d*l+c*u*p,this._z=h*u*p-c*d*l,this._w=h*u*l-c*d*p;break;case"XZY":this._x=c*u*l-h*d*p,this._y=h*d*l-c*u*p,this._z=h*u*p+c*d*l,this._w=h*u*l+c*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],r=e[4],n=e[8],s=e[1],a=e[5],o=e[9],h=e[2],u=e[6],l=e[10],c=i+a+l;if(c>0){const t=.5/Math.sqrt(c+1);this._w=.25/t,this._x=(u-o)*t,this._y=(n-h)*t,this._z=(s-r)*t}else if(i>a&&i>l){const t=2*Math.sqrt(1+i-a-l);this._w=(u-o)/t,this._x=.25*t,this._y=(r+s)/t,this._z=(n+h)/t}else if(a>l){const t=2*Math.sqrt(1+a-i-l);this._w=(n-h)/t,this._x=(r+s)/t,this._y=.25*t,this._z=(o+u)/t}else{const t=2*Math.sqrt(1+l-i-a);this._w=(s-r)/t,this._x=(n+h)/t,this._y=(o+u)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(r.MathUtils.clamp(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(0===i)return this;const r=Math.min(1,e/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}inverse(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,r=t._y,n=t._z,s=t._w,a=e._x,o=e._y,h=e._z,u=e._w;return this._x=i*u+s*a+r*h-n*o,this._y=r*u+s*o+n*a-i*h,this._z=n*u+s*h+i*o-r*a,this._w=s*u-i*a-r*o-n*h,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const i=this._x,r=this._y,n=this._z,s=this._w;let a=s*t._w+i*t._x+r*t._y+n*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=i,this._y=r,this._z=n,this;const o=1-a*a;if(o<=Number.EPSILON){const t=1-e;return this._w=t*s+e*this._w,this._x=t*i+e*this._x,this._y=t*r+e*this._y,this._z=t*n+e*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(o),u=Math.atan2(h,a),l=Math.sin((1-e)*u)/h,c=Math.sin(e*u)/h;return this._w=s*l+this._w*c,this._x=i*l+this._x*c,this._y=r*l+this._y*c,this._z=n*l+this._z*c,this._onChangeCallback(),this}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}},function(t,e,i){"use strict";i.d(e,"PerspectiveCamera",function(){return a});var r=i(33),n=i(8),s=i(6);function a(t,e,i,n){r.Camera.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}a.prototype=Object.assign(Object.create(r.Camera.prototype),{constructor:a,isPerspectiveCamera:!0,copy:function(t,e){return r.Camera.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){const e=.5*this.getFilmHeight()/t;this.fov=2*s.MathUtils.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){const t=Math.tan(.5*s.MathUtils.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*s.MathUtils.RAD2DEG*Math.atan(Math.tan(.5*s.MathUtils.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,r,n,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=this.near;let e=t*Math.tan(.5*s.MathUtils.DEG2RAD*this.fov)/this.zoom,i=2*e,r=this.aspect*i,n=-.5*r;const a=this.view;if(null!==this.view&&this.view.enabled){const t=a.fullWidth,s=a.fullHeight;n+=a.offsetX*r/t,e-=a.offsetY*i/s,r*=a.width/t,i*=a.height/s}const o=this.filmOffset;0!==o&&(n+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+r,e,e-i,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){const e=n.Object3D.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}})},function(t,e,i){"use strict";i.d(e,"Sphere",function(){return a});var r=i(20),n=i(1);const s=new r.Box3;class a{constructor(t,e){this.center=void 0!==t?t:new n.Vector3,this.radius=void 0!==e?e:-1}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;void 0!==e?i.copy(e):s.setFromPoints(t).getCenter(i);let r=0;for(let e=0,n=t.length;e<n;e++)r=Math.max(r,i.distanceToSquared(t[e]));return this.radius=Math.sqrt(r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new n.Vector3),e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new r.Box3),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}}},function(t,e,i){"use strict";i.d(e,"WebGLRenderTarget",function(){return o});var r=i(15),n=i(13),s=i(0),a=i(11);function o(t,e,i){this.width=t,this.height=e,this.scissor=new a.Vector4(0,0,t,e),this.scissorTest=!1,this.viewport=new a.Vector4(0,0,t,e),i=i||{},this.texture=new n.Texture(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:s.LinearFilter,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}o.prototype=Object.assign(Object.create(r.EventDispatcher.prototype),{constructor:o,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}})},function(t,e,i){"use strict";i.d(e,"WebGLUniforms",function(){return et});var r=i(29),n=i(13),s=i(57),a=i(56);const o=new n.Texture,h=new s.DataTexture2DArray,u=new a.DataTexture3D,l=new r.CubeTexture,c=[],d=[],p=new Float32Array(16),m=new Float32Array(9),f=new Float32Array(4);function g(t,e,i){const r=t[0];if(r<=0||r>0)return t;const n=e*i;let s=c[n];if(void 0===s&&(s=new Float32Array(n),c[n]=s),0!==e){r.toArray(s,0);for(let r=1,n=0;r!==e;++r)n+=i,t[r].toArray(s,n)}return s}function x(t,e){if(t.length!==e.length)return!1;for(let i=0,r=t.length;i<r;i++)if(t[i]!==e[i])return!1;return!0}function y(t,e){for(let i=0,r=e.length;i<r;i++)t[i]=e[i]}function b(t,e){let i=d[e];void 0===i&&(i=new Int32Array(e),d[e]=i);for(let r=0;r!==e;++r)i[r]=t.allocateTextureUnit();return i}function M(t,e){const i=this.cache;i[0]!==e&&(t.uniform1f(this.addr,e),i[0]=e)}function v(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(x(i,e))return;t.uniform2fv(this.addr,e),y(i,e)}}function _(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else if(void 0!==e.r)i[0]===e.r&&i[1]===e.g&&i[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b);else{if(x(i,e))return;t.uniform3fv(this.addr,e),y(i,e)}}function w(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(x(i,e))return;t.uniform4fv(this.addr,e),y(i,e)}}function T(t,e){const i=this.cache,r=e.elements;if(void 0===r){if(x(i,e))return;t.uniformMatrix2fv(this.addr,!1,e),y(i,e)}else{if(x(i,r))return;f.set(r),t.uniformMatrix2fv(this.addr,!1,f),y(i,r)}}function S(t,e){const i=this.cache,r=e.elements;if(void 0===r){if(x(i,e))return;t.uniformMatrix3fv(this.addr,!1,e),y(i,e)}else{if(x(i,r))return;m.set(r),t.uniformMatrix3fv(this.addr,!1,m),y(i,r)}}function E(t,e){const i=this.cache,r=e.elements;if(void 0===r){if(x(i,e))return;t.uniformMatrix4fv(this.addr,!1,e),y(i,e)}else{if(x(i,r))return;p.set(r),t.uniformMatrix4fv(this.addr,!1,p),y(i,r)}}function A(t,e,i){const r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(t.uniform1i(this.addr,n),r[0]=n),i.safeSetTexture2D(e||o,n)}function R(t,e,i){const r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(t.uniform1i(this.addr,n),r[0]=n),i.setTexture2DArray(e||h,n)}function F(t,e,i){const r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(t.uniform1i(this.addr,n),r[0]=n),i.setTexture3D(e||u,n)}function L(t,e,i){const r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(t.uniform1i(this.addr,n),r[0]=n),i.safeSetTextureCube(e||l,n)}function B(t,e){const i=this.cache;i[0]!==e&&(t.uniform1i(this.addr,e),i[0]=e)}function C(t,e){const i=this.cache;x(i,e)||(t.uniform2iv(this.addr,e),y(i,e))}function U(t,e){const i=this.cache;x(i,e)||(t.uniform3iv(this.addr,e),y(i,e))}function P(t,e){const i=this.cache;x(i,e)||(t.uniform4iv(this.addr,e),y(i,e))}function N(t,e){const i=this.cache;i[0]!==e&&(t.uniform1ui(this.addr,e),i[0]=e)}function O(t,e){t.uniform1fv(this.addr,e)}function z(t,e){t.uniform1iv(this.addr,e)}function V(t,e){t.uniform2iv(this.addr,e)}function G(t,e){t.uniform3iv(this.addr,e)}function D(t,e){t.uniform4iv(this.addr,e)}function I(t,e){const i=g(e,this.size,2);t.uniform2fv(this.addr,i)}function W(t,e){const i=g(e,this.size,3);t.uniform3fv(this.addr,i)}function k(t,e){const i=g(e,this.size,4);t.uniform4fv(this.addr,i)}function H(t,e){const i=g(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,i)}function j(t,e){const i=g(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,i)}function X(t,e){const i=g(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,i)}function q(t,e,i){const r=e.length,n=b(i,r);t.uniform1iv(this.addr,n);for(let t=0;t!==r;++t)i.safeSetTexture2D(e[t]||o,n[t])}function Y(t,e,i){const r=e.length,n=b(i,r);t.uniform1iv(this.addr,n);for(let t=0;t!==r;++t)i.safeSetTextureCube(e[t]||l,n[t])}function Z(t,e,i){this.id=t,this.addr=i,this.cache=[],this.setValue=function(t){switch(t){case 5126:return M;case 35664:return v;case 35665:return _;case 35666:return w;case 35674:return T;case 35675:return S;case 35676:return E;case 5124:case 35670:return B;case 35667:case 35671:return C;case 35668:case 35672:return U;case 35669:case 35673:return P;case 5125:return N;case 35678:case 36198:case 36298:case 36306:case 35682:return A;case 35679:case 36299:case 36307:return F;case 35680:case 36300:case 36308:case 36293:return L;case 36289:case 36303:case 36311:case 36292:return R}}(e.type)}function J(t,e,i){this.id=t,this.addr=i,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return O;case 35664:return I;case 35665:return W;case 35666:return k;case 35674:return H;case 35675:return j;case 35676:return X;case 5124:case 35670:return z;case 35667:case 35671:return V;case 35668:case 35672:return G;case 35669:case 35673:return D;case 35678:case 36198:case 36298:case 36306:case 35682:return q;case 35680:case 36300:case 36308:case 36293:return Y}}(e.type)}function Q(t){this.id=t,this.seq=[],this.map={}}J.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),y(e,t)},Q.prototype.setValue=function(t,e,i){const r=this.seq;for(let n=0,s=r.length;n!==s;++n){const s=r[n];s.setValue(t,e[s.id],i)}};const K=/([\w\d_]+)(\])?(\[|\.)?/g;function $(t,e){t.seq.push(e),t.map[e.id]=e}function tt(t,e,i){const r=t.name,n=r.length;for(K.lastIndex=0;;){const s=K.exec(r),a=K.lastIndex;let o=s[1];const h="]"===s[2],u=s[3];if(h&&(o|=0),void 0===u||"["===u&&a+2===n){$(i,void 0===u?new Z(o,t,e):new J(o,t,e));break}{let t=i.map[o];void 0===t&&$(i,t=new Q(o)),i=t}}}function et(t,e){this.seq=[],this.map={};const i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const i=t.getActiveUniform(e,r);tt(i,t.getUniformLocation(e,i.name),this)}}et.prototype.setValue=function(t,e,i,r){const n=this.map[e];void 0!==n&&n.setValue(t,i,r)},et.prototype.setOptional=function(t,e,i){const r=e[i];void 0!==r&&this.setValue(t,i,r)},et.upload=function(t,e,i,r){for(let n=0,s=e.length;n!==s;++n){const s=e[n],a=i[s.id];!1!==a.needsUpdate&&s.setValue(t,a.value,r)}},et.seqWithValue=function(t,e){const i=[];for(let r=0,n=t.length;r!==n;++r){const n=t[r];n.id in e&&i.push(n)}return i}},function(t,e,i){"use strict";i.d(e,"Face3",function(){return s});var r=i(5),n=i(1);class s{constructor(t,e,i,s,a,o){this.a=t,this.b=e,this.c=i,this.normal=s&&s.isVector3?s:new n.Vector3,this.vertexNormals=Array.isArray(s)?s:[],this.color=a&&a.isColor?a:new r.Color,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=void 0!==o?o:0}clone(){return(new this.constructor).copy(this)}copy(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(let e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(let e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}},function(t,e,i){"use strict";e.default=((t,e)=>Math.random()*(e-t)+t)},function(t,e,i){"use strict";i.d(e,"Triangle",function(){return f});var r=i(1),n=i(17);const s=new r.Vector3,a=new r.Vector3,o=new r.Vector3,h=new r.Vector3,u=new r.Vector3,l=new r.Vector3,c=new r.Vector3,d=new r.Vector3,p=new r.Vector3,m=new r.Vector3;class f{constructor(t,e,i){this.a=void 0!==t?t:new r.Vector3,this.b=void 0!==e?e:new r.Vector3,this.c=void 0!==i?i:new r.Vector3}static getNormal(t,e,i,n){void 0===n&&(console.warn("THREE.Triangle: .getNormal() target is now required"),n=new r.Vector3),n.subVectors(i,e),s.subVectors(t,e),n.cross(s);const a=n.lengthSq();return a>0?n.multiplyScalar(1/Math.sqrt(a)):n.set(0,0,0)}static getBarycoord(t,e,i,n,h){s.subVectors(n,e),a.subVectors(i,e),o.subVectors(t,e);const u=s.dot(s),l=s.dot(a),c=s.dot(o),d=a.dot(a),p=a.dot(o),m=u*d-l*l;if(void 0===h&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),h=new r.Vector3),0===m)return h.set(-2,-1,-1);const f=1/m,g=(d*c-l*p)*f,x=(u*p-l*c)*f;return h.set(1-g-x,x,g)}static containsPoint(t,e,i,r){return this.getBarycoord(t,e,i,r,h),h.x>=0&&h.y>=0&&h.x+h.y<=1}static getUV(t,e,i,r,n,s,a,o){return this.getBarycoord(t,e,i,r,h),o.set(0,0),o.addScaledVector(n,h.x),o.addScaledVector(s,h.y),o.addScaledVector(a,h.z),o}static isFrontFacing(t,e,i,r){return s.subVectors(i,e),a.subVectors(t,e),s.cross(a).dot(r)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return s.subVectors(this.c,this.b),a.subVectors(this.a,this.b),.5*s.cross(a).length()}getMidpoint(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new r.Vector3),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return f.getNormal(this.a,this.b,this.c,t)}getPlane(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new n.Plane),t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return f.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,i,r,n){return f.getUV(t,this.a,this.b,this.c,e,i,r,n)}containsPoint(t){return f.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return f.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new r.Vector3);const i=this.a,n=this.b,s=this.c;let a,o;u.subVectors(n,i),l.subVectors(s,i),d.subVectors(t,i);const h=u.dot(d),f=l.dot(d);if(h<=0&&f<=0)return e.copy(i);p.subVectors(t,n);const g=u.dot(p),x=l.dot(p);if(g>=0&&x<=g)return e.copy(n);const y=h*x-g*f;if(y<=0&&h>=0&&g<=0)return a=h/(h-g),e.copy(i).addScaledVector(u,a);m.subVectors(t,s);const b=u.dot(m),M=l.dot(m);if(M>=0&&b<=M)return e.copy(s);const v=b*f-h*M;if(v<=0&&f>=0&&M<=0)return o=f/(f-M),e.copy(i).addScaledVector(l,o);const _=g*M-b*x;if(_<=0&&x-g>=0&&b-M>=0)return c.subVectors(s,n),o=(x-g)/(x-g+(b-M)),e.copy(n).addScaledVector(c,o);const w=1/(_+v+y);return a=v*w,o=y*w,e.copy(i).addScaledVector(u,a).addScaledVector(l,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}},function(t,e,i){"use strict";i.d(e,"CubeTexture",function(){return s});var r=i(13),n=i(0);function s(t,e,i,s,a,o,h,u,l,c){t=void 0!==t?t:[],e=void 0!==e?e:n.CubeReflectionMapping,h=void 0!==h?h:n.RGBFormat,r.Texture.call(this,t,e,i,s,a,o,h,u,l,c),this.flipY=!1,this._needsFlipEnvMap=!0}s.prototype=Object.create(r.Texture.prototype),s.prototype.constructor=s,s.prototype.isCubeTexture=!0,Object.defineProperty(s.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}})},function(t,e,i){"use strict";function r(t){if(0===t.length)return-1/0;let e=t[0];for(let i=1,r=t.length;i<r;++i)t[i]>e&&(e=t[i]);return e}i.d(e,"arrayMax",function(){return r})},function(t,e,i){"use strict";i.d(e,"BoxBufferGeometry",function(){return a});var r=i(14),n=i(4),s=i(1);class a extends r.BufferGeometry{constructor(t=1,e=1,i=1,r=1,a=1,o=1){super(),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:r,heightSegments:a,depthSegments:o};const h=this;r=Math.floor(r),a=Math.floor(a),o=Math.floor(o);const u=[],l=[],c=[],d=[];let p=0,m=0;function f(t,e,i,r,n,a,o,f,g,x,y){const b=a/g,M=o/x,v=a/2,_=o/2,w=f/2,T=g+1,S=x+1;let E=0,A=0;const R=new s.Vector3;for(let s=0;s<S;s++){const a=s*M-_;for(let o=0;o<T;o++){const h=o*b-v;R[t]=h*r,R[e]=a*n,R[i]=w,l.push(R.x,R.y,R.z),R[t]=0,R[e]=0,R[i]=f>0?1:-1,c.push(R.x,R.y,R.z),d.push(o/g),d.push(1-s/x),E+=1}}for(let t=0;t<x;t++)for(let e=0;e<g;e++){const i=p+e+T*t,r=p+e+T*(t+1),n=p+(e+1)+T*(t+1),s=p+(e+1)+T*t;u.push(i,r,s),u.push(r,n,s),A+=6}h.addGroup(m,A,y),m+=A,p+=E}f("z","y","x",-1,-1,i,e,t,o,a,0),f("z","y","x",1,-1,i,e,-t,o,a,1),f("x","z","y",1,1,t,i,e,r,o,2),f("x","z","y",1,-1,t,i,-e,r,o,3),f("x","y","z",1,-1,t,e,i,r,a,4),f("x","y","z",-1,-1,t,e,-i,r,a,5),this.setIndex(u),this.setAttribute("position",new n.Float32BufferAttribute(l,3)),this.setAttribute("normal",new n.Float32BufferAttribute(c,3)),this.setAttribute("uv",new n.Float32BufferAttribute(d,2))}}},function(t,e,i){"use strict";i.d(e,"Frustum",function(){return h});var r=i(1),n=i(23),s=i(17);const a=new n.Sphere,o=new r.Vector3;class h{constructor(t,e,i,r,n,a){this.planes=[void 0!==t?t:new s.Plane,void 0!==e?e:new s.Plane,void 0!==i?i:new s.Plane,void 0!==r?r:new s.Plane,void 0!==n?n:new s.Plane,void 0!==a?a:new s.Plane]}set(t,e,i,r,n,s){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(r),a[4].copy(n),a[5].copy(s),this}clone(){return(new this.constructor).copy(this)}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const e=this.planes,i=t.elements,r=i[0],n=i[1],s=i[2],a=i[3],o=i[4],h=i[5],u=i[6],l=i[7],c=i[8],d=i[9],p=i[10],m=i[11],f=i[12],g=i[13],x=i[14],y=i[15];return e[0].setComponents(a-r,l-o,m-c,y-f).normalize(),e[1].setComponents(a+r,l+o,m+c,y+f).normalize(),e[2].setComponents(a+n,l+h,m+d,y+g).normalize(),e[3].setComponents(a-n,l-h,m-d,y-g).normalize(),e[4].setComponents(a-s,l-u,m-p,y-x).normalize(),e[5].setComponents(a+s,l+u,m+p,y+x).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),a.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(a)}intersectsSprite(t){return a.center.set(0,0,0),a.radius=.7071067811865476,a.applyMatrix4(t.matrixWorld),this.intersectsSphere(a)}intersectsSphere(t){const e=this.planes,i=t.center,r=-t.radius;for(let t=0;t<6;t++){if(e[t].distanceToPoint(i)<r)return!1}return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const r=e[i];if(o.x=r.normal.x>0?t.max.x:t.min.x,o.y=r.normal.y>0?t.max.y:t.min.y,o.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(o)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}}},function(t,e,i){"use strict";i.d(e,"Camera",function(){return a});var r=i(9),n=i(8),s=i(1);function a(){n.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new r.Matrix4,this.projectionMatrix=new r.Matrix4,this.projectionMatrixInverse=new r.Matrix4}a.prototype=Object.assign(Object.create(n.Object3D.prototype),{constructor:a,isCamera:!0,copy:function(t,e){return n.Object3D.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new s.Vector3),this.updateMatrixWorld(!0);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){n.Object3D.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){n.Object3D.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}})},function(t,e,i){"use strict";var r=i(37);i.o(r,"MeshLine")&&i.d(e,"MeshLine",function(){return r.MeshLine}),i.o(r,"MeshLineMaterial")&&i.d(e,"MeshLineMaterial",function(){return r.MeshLineMaterial})},function(t,e,i){"use strict";function r(t,e,i){const r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),r}i.d(e,"WebGLShader",function(){return r})},function(t,e,i){"use strict";let r;i.d(e,"ImageUtils",function(){return n});const n={getDataURL:function(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===r&&(r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),r.width=t.width,r.height=t.height;const i=r.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=r}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}}},function(t,e,i){"use strict";i.d(e,"MeshLineMaterial",function(){return m}),i.d(e,"MeshLine",function(){return c});var r=i(14),n=i(4),s=i(1),a=i(16),o=i(2),h=i(40),u=i(5),l=i(3);function c(){r.BufferGeometry.call(this),this.type="MeshLine",this.positions=[],this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],this.counters=[],this._points=[],this._geom=null,this.widthCallback=null,Object.defineProperties(this,{geometry:{enumerable:!0,get:function(){return this}},geom:{enumerable:!0,get:function(){return this._geom},set:function(t){this.setGeometry(t,this.widthCallback)}},points:{enumerable:!0,get:function(){return this._points},set:function(t){this.setPoints(t,this.widthCallback)}}})}function d(t,e,i,r,n){let s;if(t=t.subarray||t.slice?t:t.buffer,i=i.subarray||i.slice?i:i.buffer,t=e?t.subarray?t.subarray(e,n&&e+n):t.slice(e,n&&e+n):t,i.set)i.set(t,r);else for(s=0;s<t.length;s++)i[s+r]=t[s];return i}c.prototype=Object.create(r.BufferGeometry.prototype),c.prototype.constructor=c,c.prototype.isMeshLine=!0,c.prototype.setGeometry=function(t,e){this._geometry=t,t instanceof h.Geometry?this.setPoints(t.vertices,e):t instanceof r.BufferGeometry?this.setPoints(t.getAttribute("position").array,e):this.setPoints(t,e)},c.prototype.setPoints=function(t,e){if(t instanceof Float32Array||t instanceof Array){if(this._points=t,this.widthCallback=e,this.positions=[],this.counters=[],t.length&&t[0]instanceof s.Vector3)for(let e=0;e<t.length;e++){let i=t[e],r=e/t.length;this.positions.push(i.x,i.y,i.z),this.positions.push(i.x,i.y,i.z),this.counters.push(r),this.counters.push(r)}else for(let e=0;e<t.length;e+=3){let i=e/t.length;this.positions.push(t[e],t[e+1],t[e+2]),this.positions.push(t[e],t[e+1],t[e+2]),this.counters.push(i),this.counters.push(i)}this.process()}else console.error("ERROR: The BufferArray of points is not instancied correctly.")},c.prototype.compareV3=function(t,e){let i=6*t,r=6*e;return this.positions[i]===this.positions[r]&&this.positions[i+1]===this.positions[r+1]&&this.positions[i+2]===this.positions[r+2]},c.prototype.copyV3=function(t){let e=6*t;return[this.positions[e],this.positions[e+1],this.positions[e+2]]},c.prototype.process=function(){let t,e,i=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],e=this.compareV3(0,i-1)?this.copyV3(i-2):this.copyV3(0),this.previous.push(e[0],e[1],e[2]),this.previous.push(e[0],e[1],e[2]);for(let r=0;r<i;r++){if(this.side.push(1),this.side.push(-1),t=this.widthCallback?this.widthCallback(r/(i-1)):1,this.width.push(t),this.width.push(t),this.uvs.push(r/(i-1),0),this.uvs.push(r/(i-1),1),r<i-1){e=this.copyV3(r),this.previous.push(e[0],e[1],e[2]),this.previous.push(e[0],e[1],e[2]);let t=2*r;this.indices_array.push(t,t+1,t+2),this.indices_array.push(t+2,t+1,t+3)}r>0&&(e=this.copyV3(r),this.next.push(e[0],e[1],e[2]),this.next.push(e[0],e[1],e[2]))}e=this.compareV3(i-1,0)?this.copyV3(1):this.copyV3(i-1),this.next.push(e[0],e[1],e[2]),this.next.push(e[0],e[1],e[2]),this._attributes&&this._attributes.position.count===this.positions.length?(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0):this._attributes={position:new n.BufferAttribute(new Float32Array(this.positions),3),previous:new n.BufferAttribute(new Float32Array(this.previous),3),next:new n.BufferAttribute(new Float32Array(this.next),3),side:new n.BufferAttribute(new Float32Array(this.side),1),width:new n.BufferAttribute(new Float32Array(this.width),1),uv:new n.BufferAttribute(new Float32Array(this.uvs),2),index:new n.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new n.BufferAttribute(new Float32Array(this.counters),1)},this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()},c.prototype.advance=function(t){let e=this._attributes.position.array,i=this._attributes.previous.array,r=this._attributes.next.array,n=e.length;d(e,0,i,0,n),d(e,6,e,0,n-6),e[n-6]=t.x,e[n-5]=t.y,e[n-4]=t.z,e[n-3]=t.x,e[n-2]=t.y,e[n-1]=t.z,d(e,6,r,0,n-6),r[n-6]=t.x,r[n-5]=t.y,r[n-4]=t.z,r[n-3]=t.x,r[n-2]=t.y,r[n-1]=t.z,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0};const p={};function m(t){a.ShaderMaterial.call(this,{uniforms:Object.assign({},o.UniformsLib.fog,{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new u.Color(16777215)},opacity:{value:1},resolution:{value:new l.Vector2(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new l.Vector2(1,1)}}),precision:"mediump",vertexShader:p.meshline_vert,fragmentShader:p.meshline_frag}),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get:function(){return this.uniforms.lineWidth.value},set:function(t){this.uniforms.lineWidth.value=t}},map:{enumerable:!0,get:function(){return this.uniforms.map.value},set:function(t){this.uniforms.map.value=t}},useMap:{enumerable:!0,get:function(){return this.uniforms.useMap.value},set:function(t){this.uniforms.useMap.value=t}},alphaMap:{enumerable:!0,get:function(){return this.uniforms.alphaMap.value},set:function(t){this.uniforms.alphaMap.value=t}},useAlphaMap:{enumerable:!0,get:function(){return this.uniforms.useAlphaMap.value},set:function(t){this.uniforms.useAlphaMap.value=t}},color:{enumerable:!0,get:function(){return this.uniforms.color.value},set:function(t){this.uniforms.color.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},sizeAttenuation:{enumerable:!0,get:function(){return this.uniforms.sizeAttenuation.value},set:function(t){this.uniforms.sizeAttenuation.value=t}},dashArray:{enumerable:!0,get:function(){return this.uniforms.dashArray.value},set:function(t){this.uniforms.dashArray.value=t,this.useDash=0!==t?1:0}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},dashRatio:{enumerable:!0,get:function(){return this.uniforms.dashRatio.value},set:function(t){this.uniforms.dashRatio.value=t}},useDash:{enumerable:!0,get:function(){return this.uniforms.useDash.value},set:function(t){this.uniforms.useDash.value=t}},visibility:{enumerable:!0,get:function(){return this.uniforms.visibility.value},set:function(t){this.uniforms.visibility.value=t}},alphaTest:{enumerable:!0,get:function(){return this.uniforms.alphaTest.value},set:function(t){this.uniforms.alphaTest.value=t}},repeat:{enumerable:!0,get:function(){return this.uniforms.repeat.value},set:function(t){this.uniforms.repeat.value.copy(t)}}}),this.setValues(t)}p.meshline_vert="\n#version 300 es\n#define attribute in\n#define varying out\nprecision mediump float;\nprecision mediump int;\n#define MEDIUM_PRECISION\n#define SHADER_NAME MeshLineMaterial\n#define VERTEX_TEXTURES\n#define GAMMA_FACTOR 2\n#define MAX_BONES 0\n#define BONE_TEXTURE\n#define USE_SIZEATTENUATION\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nuniform bool isOrthographic;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nattribute vec3 previous;\nattribute vec3 next;\nattribute float side;\nattribute float width;\nattribute float counters;\n\nuniform vec2 resolution;\nuniform float lineWidth;\nuniform vec3 color;\nuniform float opacity;\nuniform float sizeAttenuation;\n\nvarying vec2 vUV;\nvarying vec4 vColor;\nvarying float vCounters;\n\nvec2 fix( vec4 i, float aspect ) {\n    vec2 res = i.xy / i.w;\n    res.x *= aspect;\n    vCounters = counters;\n    return res;\n}\n\nvoid main() {\n    float aspect = resolution.x / resolution.y;\n\n    vColor = vec4( color, opacity );\n    vUV = uv;\n\n    mat4 m = projectionMatrix * modelViewMatrix;\n    vec4 finalPosition = m * vec4( position, 1.0 );\n    vec4 prevPos = m * vec4( previous, 1.0 );\n    vec4 nextPos = m * vec4( next, 1.0 );\n\n    vec2 currentP = fix( finalPosition, aspect );\n    vec2 prevP = fix( prevPos, aspect );\n    vec2 nextP = fix( nextPos, aspect );\n\n    float w = lineWidth * width;\n\n    vec2 dir;\n    if( nextP == currentP ) dir = normalize( currentP - prevP );\n    else if( prevP == currentP ) dir = normalize( nextP - currentP );\n    else {\n        vec2 dir1 = normalize( currentP - prevP );\n        vec2 dir2 = normalize( nextP - currentP );\n        dir = normalize( dir1 + dir2 );\n\n        vec2 perp = vec2( -dir1.y, dir1.x );\n        vec2 miter = vec2( -dir.y, dir.x );\n        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );\n    }\n\n    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;\n    vec4 normal = vec4( -dir.y, dir.x, 0., 1. );\n    normal.xy *= .5 * w;\n    normal *= projectionMatrix;\n    if( sizeAttenuation == 0. ) {\n        normal.xy *= finalPosition.w;\n        normal.xy /= ( vec4( resolution, 0., 1. ) * projectionMatrix ).xy;\n    }\n\n    finalPosition.xy += normal.xy * side;\n\n    gl_Position = finalPosition;\n\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n}\n".trim(),p.meshline_frag="\n#version 300 es\n#define varying in\nout mediump vec4 pc_fragColor;\nprecision mediump float;\nprecision mediump int;\n#define MEDIUM_PRECISION\n#define SHADER_NAME MeshLineMaterial\n#define GAMMA_FACTOR 2\nuniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\nuniform bool isOrthographic;\n\nuniform sampler2D map;\nuniform sampler2D alphaMap;\nuniform float useMap;\nuniform float useAlphaMap;\nuniform float useDash;\nuniform float dashArray;\nuniform float dashOffset;\nuniform float dashRatio;\nuniform float visibility;\nuniform float alphaTest;\nuniform vec2 repeat;\n\nvarying vec2 vUV;\nvarying vec4 vColor;\nvarying float vCounters;\n\nvoid main() {\nvec4 c = vColor;\n    if( useMap == 1. ) c *= texture( map, vUV * repeat );\n    if( useAlphaMap == 1. ) c.a *= texture( alphaMap, vUV * repeat ).a;\n    if( c.a < alphaTest ) discard;\n    if( useDash == 1. ){\n        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));\n    }\n    pc_fragColor = c;\n    pc_fragColor.a *= step(vCounters, visibility);\n}\n".trim(),m.prototype=Object.create(a.ShaderMaterial.prototype),m.prototype.constructor=m,m.prototype.isMeshLineMaterial=!0,m.prototype.copy=function(t){return a.ShaderMaterial.prototype.copy.call(this,t),this.lineWidth=t.lineWidth,this.map=t.map,this.useMap=t.useMap,this.alphaMap=t.alphaMap,this.useAlphaMap=t.useAlphaMap,this.color.copy(t.color),this.opacity=t.opacity,this.resolution.copy(t.resolution),this.sizeAttenuation=t.sizeAttenuation,this.dashArray.copy(t.dashArray),this.dashOffset.copy(t.dashOffset),this.dashRatio.copy(t.dashRatio),this.useDash=t.useDash,this.visibility=t.visibility,this.alphaTest=t.alphaTest,this.repeat.copy(t.repeat),this}},function(t,e,i){"use strict";e.default=((t,e)=>Math.floor(Math.random()*(e-t+1))+t)},function(t,e,i){"use strict";var r=i(38);e.default=(t=>t[Object(r.default)(0,t.length-1)])},function(t,e,i){"use strict";i.d(e,"Geometry",function(){return y});var r=i(15),n=i(26),s=i(10),a=i(23),o=i(20),h=i(1),u=i(9),l=i(3),c=i(5),d=i(8),p=i(6);let m=0;const f=new u.Matrix4,g=new d.Object3D,x=new h.Vector3;function y(){Object.defineProperty(this,"id",{value:m+=2}),this.uuid=p.MathUtils.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}y.prototype=Object.assign(Object.create(r.EventDispatcher.prototype),{constructor:y,isGeometry:!0,applyMatrix4:function(t){const e=(new s.Matrix3).getNormalMatrix(t);for(let e=0,i=this.vertices.length;e<i;e++){this.vertices[e].applyMatrix4(t)}for(let t=0,i=this.faces.length;t<i;t++){const i=this.faces[t];i.normal.applyMatrix3(e).normalize();for(let t=0,r=i.vertexNormals.length;t<r;t++)i.vertexNormals[t].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return f.makeRotationX(t),this.applyMatrix4(f),this},rotateY:function(t){return f.makeRotationY(t),this.applyMatrix4(f),this},rotateZ:function(t){return f.makeRotationZ(t),this.applyMatrix4(f),this},translate:function(t,e,i){return f.makeTranslation(t,e,i),this.applyMatrix4(f),this},scale:function(t,e,i){return f.makeScale(t,e,i),this.applyMatrix4(f),this},lookAt:function(t){return g.lookAt(t),g.updateMatrix(),this.applyMatrix4(g.matrix),this},fromBufferGeometry:function(t){const e=this,i=null!==t.index?t.index:void 0,r=t.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const s=r.position,a=r.normal,o=r.color,u=r.uv,d=r.uv2;void 0!==d&&(this.faceVertexUvs[1]=[]);for(let t=0;t<s.count;t++)e.vertices.push((new h.Vector3).fromBufferAttribute(s,t)),void 0!==o&&e.colors.push((new c.Color).fromBufferAttribute(o,t));function p(t,i,r,s){const c=void 0===o?[]:[e.colors[t].clone(),e.colors[i].clone(),e.colors[r].clone()],p=void 0===a?[]:[(new h.Vector3).fromBufferAttribute(a,t),(new h.Vector3).fromBufferAttribute(a,i),(new h.Vector3).fromBufferAttribute(a,r)],m=new n.Face3(t,i,r,p,c,s);e.faces.push(m),void 0!==u&&e.faceVertexUvs[0].push([(new l.Vector2).fromBufferAttribute(u,t),(new l.Vector2).fromBufferAttribute(u,i),(new l.Vector2).fromBufferAttribute(u,r)]),void 0!==d&&e.faceVertexUvs[1].push([(new l.Vector2).fromBufferAttribute(d,t),(new l.Vector2).fromBufferAttribute(d,i),(new l.Vector2).fromBufferAttribute(d,r)])}const m=t.groups;if(m.length>0)for(let t=0;t<m.length;t++){const e=m[t],r=e.start;for(let t=r,n=r+e.count;t<n;t+=3)void 0!==i?p(i.getX(t),i.getX(t+1),i.getX(t+2),e.materialIndex):p(t,t+1,t+2,e.materialIndex)}else if(void 0!==i)for(let t=0;t<i.count;t+=3)p(i.getX(t),i.getX(t+1),i.getX(t+2));else for(let t=0;t<s.count;t+=3)p(t,t+1,t+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(x).negate(),this.translate(x.x,x.y,x.z),this},normalize:function(){this.computeBoundingSphere();const t=this.boundingSphere.center,e=this.boundingSphere.radius,i=0===e?1:1/e,r=new u.Matrix4;return r.set(i,0,0,-i*t.x,0,i,0,-i*t.y,0,0,i,-i*t.z,0,0,0,1),this.applyMatrix4(r),this},computeFaceNormals:function(){const t=new h.Vector3,e=new h.Vector3;for(let i=0,r=this.faces.length;i<r;i++){const r=this.faces[i],n=this.vertices[r.a],s=this.vertices[r.b],a=this.vertices[r.c];t.subVectors(a,s),e.subVectors(n,s),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);const e=new Array(this.vertices.length);for(let t=0,i=this.vertices.length;t<i;t++)e[t]=new h.Vector3;if(t){const t=new h.Vector3,i=new h.Vector3;for(let r=0,n=this.faces.length;r<n;r++){const n=this.faces[r],s=this.vertices[n.a],a=this.vertices[n.b],o=this.vertices[n.c];t.subVectors(o,a),i.subVectors(s,a),t.cross(i),e[n.a].add(t),e[n.b].add(t),e[n.c].add(t)}}else{this.computeFaceNormals();for(let t=0,i=this.faces.length;t<i;t++){const i=this.faces[t];e[i.a].add(i.normal),e[i.b].add(i.normal),e[i.c].add(i.normal)}}for(let t=0,i=this.vertices.length;t<i;t++)e[t].normalize();for(let t=0,i=this.faces.length;t<i;t++){const i=this.faces[t],r=i.vertexNormals;3===r.length?(r[0].copy(e[i.a]),r[1].copy(e[i.b]),r[2].copy(e[i.c])):(r[0]=e[i.a].clone(),r[1]=e[i.b].clone(),r[2]=e[i.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t],i=e.vertexNormals;3===i.length?(i[0].copy(e.normal),i[1].copy(e.normal),i[2].copy(e.normal)):(i[0]=e.normal.clone(),i[1]=e.normal.clone(),i[2]=e.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t];e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]);for(let t=0,i=e.vertexNormals.length;t<i;t++)e.__originalVertexNormals[t]?e.__originalVertexNormals[t].copy(e.vertexNormals[t]):e.__originalVertexNormals[t]=e.vertexNormals[t].clone()}const t=new y;t.faces=this.faces;for(let e=0,i=this.morphTargets.length;e<i;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];const t=this.morphNormals[e].faceNormals,i=this.morphNormals[e].vertexNormals;for(let e=0,r=this.faces.length;e<r;e++){const e=new h.Vector3,r={a:new h.Vector3,b:new h.Vector3,c:new h.Vector3};t.push(e),i.push(r)}}const i=this.morphNormals[e];t.vertices=this.morphTargets[e].vertices,t.computeFaceNormals(),t.computeVertexNormals();for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t],r=i.faceNormals[t],n=i.vertexNormals[t];r.copy(e.normal),n.a.copy(e.vertexNormals[0]),n.b.copy(e.vertexNormals[1]),n.c.copy(e.vertexNormals[2])}}for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t];e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new o.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new a.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(!t||!t.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);let r;const a=this.vertices.length,o=this.vertices,h=t.vertices,u=this.faces,l=t.faces,c=this.colors,d=t.colors;void 0===i&&(i=0),void 0!==e&&(r=(new s.Matrix3).getNormalMatrix(e));for(let t=0,i=h.length;t<i;t++){const i=h[t].clone();void 0!==e&&i.applyMatrix4(e),o.push(i)}for(let t=0,e=d.length;t<e;t++)c.push(d[t].clone());for(let t=0,e=l.length;t<e;t++){const e=l[t];let s,o;const h=e.vertexNormals,c=e.vertexColors,d=new n.Face3(e.a+a,e.b+a,e.c+a);d.normal.copy(e.normal),void 0!==r&&d.normal.applyMatrix3(r).normalize();for(let t=0,e=h.length;t<e;t++)s=h[t].clone(),void 0!==r&&s.applyMatrix3(r).normalize(),d.vertexNormals.push(s);d.color.copy(e.color);for(let t=0,e=c.length;t<e;t++)o=c[t],d.vertexColors.push(o.clone());d.materialIndex=e.materialIndex+i,u.push(d)}for(let e=0,i=t.faceVertexUvs.length;e<i;e++){const i=t.faceVertexUvs[e];void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]);for(let t=0,r=i.length;t<r;t++){const r=i[t],n=[];for(let t=0,e=r.length;t<e;t++)n.push(r[t].clone());this.faceVertexUvs[e].push(n)}}},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){const t={},e=[],i=[],r=Math.pow(10,4);for(let n=0,s=this.vertices.length;n<s;n++){const s=this.vertices[n],a=Math.round(s.x*r)+"_"+Math.round(s.y*r)+"_"+Math.round(s.z*r);void 0===t[a]?(t[a]=n,e.push(this.vertices[n]),i[n]=e.length-1):i[n]=i[t[a]]}const n=[];for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t];e.a=i[e.a],e.b=i[e.b],e.c=i[e.c];const r=[e.a,e.b,e.c];for(let e=0;e<3;e++)if(r[e]===r[(e+1)%3]){n.push(t);break}}for(let t=n.length-1;t>=0;t--){const e=n[t];this.faces.splice(e,1);for(let t=0,i=this.faceVertexUvs.length;t<i;t++)this.faceVertexUvs[t].splice(e,1)}const s=this.vertices.length-e.length;return this.vertices=e,s},setFromPoints:function(t){this.vertices=[];for(let e=0,i=t.length;e<i;e++){const i=t[e];this.vertices.push(new h.Vector3(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){const t=this.faces,e=t.length;for(let i=0;i<e;i++)t[i]._id=i;t.sort(function(t,e){return t.materialIndex-e.materialIndex});const i=this.faceVertexUvs[0],r=this.faceVertexUvs[1];let n,s;i&&i.length===e&&(n=[]),r&&r.length===e&&(s=[]);for(let a=0;a<e;a++){const e=t[a]._id;n&&n.push(i[e]),s&&s.push(r[e])}n&&(this.faceVertexUvs[0]=n),s&&(this.faceVertexUvs[1]=s)},toJSON:function(){const t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){const e=this.parameters;for(const i in e)void 0!==e[i]&&(t[i]=e[i]);return t}const e=[];for(let t=0;t<this.vertices.length;t++){const i=this.vertices[t];e.push(i.x,i.y,i.z)}const i=[],r=[],n={},s=[],a={},o=[],h={};for(let t=0;t<this.faces.length;t++){const e=this.faces[t],r=!0,n=!1,s=void 0!==this.faceVertexUvs[0][t],a=e.normal.length()>0,o=e.vertexNormals.length>0,h=1!==e.color.r||1!==e.color.g||1!==e.color.b,p=e.vertexColors.length>0;let m=0;if(m=u(m,0,0),m=u(m,1,r),m=u(m,2,n),m=u(m,3,s),m=u(m,4,a),m=u(m,5,o),m=u(m,6,h),m=u(m,7,p),i.push(m),i.push(e.a,e.b,e.c),i.push(e.materialIndex),s){const e=this.faceVertexUvs[0][t];i.push(d(e[0]),d(e[1]),d(e[2]))}if(a&&i.push(l(e.normal)),o){const t=e.vertexNormals;i.push(l(t[0]),l(t[1]),l(t[2]))}if(h&&i.push(c(e.color)),p){const t=e.vertexColors;i.push(c(t[0]),c(t[1]),c(t[2]))}}function u(t,e,i){return i?t|1<<e:t&~(1<<e)}function l(t){const e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==n[e]?n[e]:(n[e]=r.length/3,r.push(t.x,t.y,t.z),n[e])}function c(t){const e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==a[e]?a[e]:(a[e]=s.length,s.push(t.getHex()),a[e])}function d(t){const e=t.x.toString()+t.y.toString();return void 0!==h[e]?h[e]:(h[e]=o.length/2,o.push(t.x,t.y),h[e])}return t.data={},t.data.vertices=e,t.data.normals=r,s.length>0&&(t.data.colors=s),o.length>0&&(t.data.uvs=[o]),t.data.faces=i,t},clone:function(){return(new y).copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;const e=t.vertices;for(let t=0,i=e.length;t<i;t++)this.vertices.push(e[t].clone());const i=t.colors;for(let t=0,e=i.length;t<e;t++)this.colors.push(i[t].clone());const r=t.faces;for(let t=0,e=r.length;t<e;t++)this.faces.push(r[t].clone());for(let e=0,i=t.faceVertexUvs.length;e<i;e++){const i=t.faceVertexUvs[e];void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]);for(let t=0,r=i.length;t<r;t++){const r=i[t],n=[];for(let t=0,e=r.length;t<e;t++){const e=r[t];n.push(e.clone())}this.faceVertexUvs[e].push(n)}}const n=t.morphTargets;for(let t=0,e=n.length;t<e;t++){const e={};if(e.name=n[t].name,void 0!==n[t].vertices){e.vertices=[];for(let i=0,r=n[t].vertices.length;i<r;i++)e.vertices.push(n[t].vertices[i].clone())}if(void 0!==n[t].normals){e.normals=[];for(let i=0,r=n[t].normals.length;i<r;i++)e.normals.push(n[t].normals[i].clone())}this.morphTargets.push(e)}const s=t.morphNormals;for(let t=0,e=s.length;t<e;t++){const e={};if(void 0!==s[t].vertexNormals){e.vertexNormals=[];for(let i=0,r=s[t].vertexNormals.length;i<r;i++){const r=s[t].vertexNormals[i],n={};n.a=r.a.clone(),n.b=r.b.clone(),n.c=r.c.clone(),e.vertexNormals.push(n)}}if(void 0!==s[t].faceNormals){e.faceNormals=[];for(let i=0,r=s[t].faceNormals.length;i<r;i++)e.faceNormals.push(s[t].faceNormals[i].clone())}this.morphNormals.push(e)}const a=t.skinWeights;for(let t=0,e=a.length;t<e;t++)this.skinWeights.push(a[t].clone());const o=t.skinIndices;for(let t=0,e=o.length;t<e;t++)this.skinIndices.push(o[t].clone());const h=t.lineDistances;for(let t=0,e=h.length;t<e;t++)this.lineDistances.push(h[t]);const u=t.boundingBox;null!==u&&(this.boundingBox=u.clone());const l=t.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}})},function(t,e,i){"use strict";i.d(e,"default",function(){return o});var r=i(34),n=i(5),s=i(1),a=i(19);class o extends a.Mesh{constructor({width:t=.1,speed:e=.01,visibleLength:i=.5,color:a=new n.Color("#000000"),opacity:o=1,position:h=new s.Vector3(0,0,0),points:u=!1,transformLineMethod:l=!1}={}){let c=[];u&&(c=u);const d=new r.MeshLine;d.setGeometry(c,l);const p=1-.5*i;super(d.geometry,new r.MeshLineMaterial({lineWidth:t,dashArray:2,dashOffset:0,dashRatio:p,opacity:o,transparent:!0,depthWrite:!1,color:a})),this.position.copy(h),this.speed=e,this.voidLength=2*p,this.dashLength=2-this.voidLength,this.dyingAt=1,this.diedAt=this.dyingAt+this.dashLength,this.update=this.update.bind(this)}update(){this.material.uniforms.dashOffset.value-=this.speed,this.isDying()&&(this.material.uniforms.opacity.value=.9+(this.material.uniforms.dashOffset.value+1)/this.dashLength)}isDied(){return this.material.uniforms.dashOffset.value<-this.diedAt}isDying(){return this.material.uniforms.dashOffset.value<-this.dyingAt}}},function(t,e,i){"use strict";i.d(e,"default",function(){return s});var r=i(8),n=i(41);class s extends r.Object3D{constructor({frequency:t=.1}={},e){super(),this.frequency=t,this.lineStaticProps=e,this.isStarted=!1,this.i=0,this.lines=[],this.nbrOfLines=-1,this.update=this.update.bind(this),this.start=this.start.bind(this),this.stop=this.stop.bind(this)}start(){this.isStarted=!0}stop(t){this.isStarted=!1}addLine(t){const e=new n.default(Object.assign({},this.lineStaticProps,t));return this.lines.push(e),this.add(e),this.nbrOfLines++,e}removeLine(t){this.remove(t),this.nbrOfLines--}update(){for(this.isStarted&&Math.random()<this.frequency&&this.addLine(),this.i=this.nbrOfLines;this.i>=0;this.i--)this.lines[this.i].update();const t=[];for(this.i=this.nbrOfLines;this.i>=0;this.i--)this.lines[this.i].isDied()?this.removeLine(this.lines[this.i]):t.push(this.lines[this.i]);this.lines=t}}},function(t,e,i){"use strict";i.d(e,"default",function(){return f});var r=i(5),n=i(42),s=i(27),a=i(39);const o=.3,h=.1,u=-1,l=.08,c=.025,d=.02,p=["#794F98","#3D15B9","#53486E","#2B2148","#27155E"].map(t=>new r.Color(t)),m={x:0,y:0,z:0};class f extends n.default{constructor(t,e,{engine:i}){super(t,e),this.engine=i}destroy(){this.engine=null}addLine(){if(this.lines.length>200)return;let t=u,e=Math.random()>.8?h:o,i=Object(s.default)(0,2*Math.PI);const r=[];for(;t<this.engine.camera.position.z;)m.x=Math.cos(i)*e,m.y=Math.sin(i)*e,m.z=t,t+=l,i+=c,e+=d,r.push(m.x,m.y,m.z);super.addLine({visibleLength:Object(s.default)(.1,.4),points:r,speed:Object(s.default)(.005,.01),color:Object(a.default)(p),width:Object(s.default)(.01,.06)})}}},function(t,e,i){"use strict";i.d(e,"Scene",function(){return n});var r=i(8);class n extends r.Object3D{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}},function(t,e,i){"use strict";i.d(e,"WebGLMaterials",function(){return n});var r=i(0);function n(t){function e(e,i){e.opacity.value=i.opacity,i.color&&e.diffuse.value.copy(i.color),i.emissive&&e.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(e.map.value=i.map),i.alphaMap&&(e.alphaMap.value=i.alphaMap),i.specularMap&&(e.specularMap.value=i.specularMap);const r=t.get(i).envMap;if(r){e.envMap.value=r,e.flipEnvMap.value=r.isCubeTexture&&r._needsFlipEnvMap?-1:1,e.reflectivity.value=i.reflectivity,e.refractionRatio.value=i.refractionRatio;const n=t.get(r).__maxMipLevel;void 0!==n&&(e.maxMipLevel.value=n)}let n,s;i.lightMap&&(e.lightMap.value=i.lightMap,e.lightMapIntensity.value=i.lightMapIntensity),i.aoMap&&(e.aoMap.value=i.aoMap,e.aoMapIntensity.value=i.aoMapIntensity),i.map?n=i.map:i.specularMap?n=i.specularMap:i.displacementMap?n=i.displacementMap:i.normalMap?n=i.normalMap:i.bumpMap?n=i.bumpMap:i.roughnessMap?n=i.roughnessMap:i.metalnessMap?n=i.metalnessMap:i.alphaMap?n=i.alphaMap:i.emissiveMap?n=i.emissiveMap:i.clearcoatMap?n=i.clearcoatMap:i.clearcoatNormalMap?n=i.clearcoatNormalMap:i.clearcoatRoughnessMap&&(n=i.clearcoatRoughnessMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix)),i.aoMap?s=i.aoMap:i.lightMap&&(s=i.lightMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),e.uv2Transform.value.copy(s.matrix))}function i(e,i){e.roughness.value=i.roughness,e.metalness.value=i.metalness,i.roughnessMap&&(e.roughnessMap.value=i.roughnessMap),i.metalnessMap&&(e.metalnessMap.value=i.metalnessMap),i.emissiveMap&&(e.emissiveMap.value=i.emissiveMap),i.bumpMap&&(e.bumpMap.value=i.bumpMap,e.bumpScale.value=i.bumpScale,i.side===r.BackSide&&(e.bumpScale.value*=-1)),i.normalMap&&(e.normalMap.value=i.normalMap,e.normalScale.value.copy(i.normalScale),i.side===r.BackSide&&e.normalScale.value.negate()),i.displacementMap&&(e.displacementMap.value=i.displacementMap,e.displacementScale.value=i.displacementScale,e.displacementBias.value=i.displacementBias),t.get(i).envMap&&(e.envMapIntensity.value=i.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,n,s,a){n.isMeshBasicMaterial?e(t,n):n.isMeshLambertMaterial?(e(t,n),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,n)):n.isMeshToonMaterial?(e(t,n),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===r.BackSide&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===r.BackSide&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,n)):n.isMeshPhongMaterial?(e(t,n),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===r.BackSide&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===r.BackSide&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,n)):n.isMeshStandardMaterial?(e(t,n),n.isMeshPhysicalMaterial?function(t,e){i(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen),e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===r.BackSide&&t.clearcoatNormalScale.value.negate()),t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap)}(t,n):i(t,n)):n.isMeshMatcapMaterial?(e(t,n),function(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===r.BackSide&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===r.BackSide&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,n)):n.isMeshDepthMaterial?(e(t,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,n)):n.isMeshDistanceMaterial?(e(t,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,n)):n.isMeshNormalMaterial?(e(t,n),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===r.BackSide&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===r.BackSide&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,n)):n.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,n),n.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,n)):n.isPointsMaterial?function(t,e,i,r){let n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*i,t.scale.value=.5*r,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,n,s,a):n.isSpriteMaterial?function(t,e){let i;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?i=e.map:e.alphaMap&&(i=e.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}(t,n):n.isShadowMaterial?(t.color.value.copy(n.color),t.opacity.value=n.opacity):n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)}}}},function(t,e,i){"use strict";i.d(e,"WebGLUtils",function(){return n});var r=i(0);function n(t,e,i){const n=i.isWebGL2;return{convert:function(i){let s;if(i===r.UnsignedByteType)return t.UNSIGNED_BYTE;if(i===r.UnsignedShort4444Type)return t.UNSIGNED_SHORT_4_4_4_4;if(i===r.UnsignedShort5551Type)return t.UNSIGNED_SHORT_5_5_5_1;if(i===r.UnsignedShort565Type)return t.UNSIGNED_SHORT_5_6_5;if(i===r.ByteType)return t.BYTE;if(i===r.ShortType)return t.SHORT;if(i===r.UnsignedShortType)return t.UNSIGNED_SHORT;if(i===r.IntType)return t.INT;if(i===r.UnsignedIntType)return t.UNSIGNED_INT;if(i===r.FloatType)return t.FLOAT;if(i===r.HalfFloatType)return n?t.HALF_FLOAT:null!==(s=e.get("OES_texture_half_float"))?s.HALF_FLOAT_OES:null;if(i===r.AlphaFormat)return t.ALPHA;if(i===r.RGBFormat)return t.RGB;if(i===r.RGBAFormat)return t.RGBA;if(i===r.LuminanceFormat)return t.LUMINANCE;if(i===r.LuminanceAlphaFormat)return t.LUMINANCE_ALPHA;if(i===r.DepthFormat)return t.DEPTH_COMPONENT;if(i===r.DepthStencilFormat)return t.DEPTH_STENCIL;if(i===r.RedFormat)return t.RED;if(i===r.RedIntegerFormat)return t.RED_INTEGER;if(i===r.RGFormat)return t.RG;if(i===r.RGIntegerFormat)return t.RG_INTEGER;if(i===r.RGBIntegerFormat)return t.RGB_INTEGER;if(i===r.RGBAIntegerFormat)return t.RGBA_INTEGER;if(i===r.RGB_S3TC_DXT1_Format||i===r.RGBA_S3TC_DXT1_Format||i===r.RGBA_S3TC_DXT3_Format||i===r.RGBA_S3TC_DXT5_Format){if(null===(s=e.get("WEBGL_compressed_texture_s3tc")))return null;if(i===r.RGB_S3TC_DXT1_Format)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===r.RGBA_S3TC_DXT1_Format)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===r.RGBA_S3TC_DXT3_Format)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===r.RGBA_S3TC_DXT5_Format)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(i===r.RGB_PVRTC_4BPPV1_Format||i===r.RGB_PVRTC_2BPPV1_Format||i===r.RGBA_PVRTC_4BPPV1_Format||i===r.RGBA_PVRTC_2BPPV1_Format){if(null===(s=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(i===r.RGB_PVRTC_4BPPV1_Format)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===r.RGB_PVRTC_2BPPV1_Format)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===r.RGBA_PVRTC_4BPPV1_Format)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===r.RGBA_PVRTC_2BPPV1_Format)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===r.RGB_ETC1_Format)return null!==(s=e.get("WEBGL_compressed_texture_etc1"))?s.COMPRESSED_RGB_ETC1_WEBGL:null;if((i===r.RGB_ETC2_Format||i===r.RGBA_ETC2_EAC_Format)&&null!==(s=e.get("WEBGL_compressed_texture_etc"))){if(i===r.RGB_ETC2_Format)return s.COMPRESSED_RGB8_ETC2;if(i===r.RGBA_ETC2_EAC_Format)return s.COMPRESSED_RGBA8_ETC2_EAC}return i===r.RGBA_ASTC_4x4_Format||i===r.RGBA_ASTC_5x4_Format||i===r.RGBA_ASTC_5x5_Format||i===r.RGBA_ASTC_6x5_Format||i===r.RGBA_ASTC_6x6_Format||i===r.RGBA_ASTC_8x5_Format||i===r.RGBA_ASTC_8x6_Format||i===r.RGBA_ASTC_8x8_Format||i===r.RGBA_ASTC_10x5_Format||i===r.RGBA_ASTC_10x6_Format||i===r.RGBA_ASTC_10x8_Format||i===r.RGBA_ASTC_10x10_Format||i===r.RGBA_ASTC_12x10_Format||i===r.RGBA_ASTC_12x12_Format||i===r.SRGB8_ALPHA8_ASTC_4x4_Format||i===r.SRGB8_ALPHA8_ASTC_5x4_Format||i===r.SRGB8_ALPHA8_ASTC_5x5_Format||i===r.SRGB8_ALPHA8_ASTC_6x5_Format||i===r.SRGB8_ALPHA8_ASTC_6x6_Format||i===r.SRGB8_ALPHA8_ASTC_8x5_Format||i===r.SRGB8_ALPHA8_ASTC_8x6_Format||i===r.SRGB8_ALPHA8_ASTC_8x8_Format||i===r.SRGB8_ALPHA8_ASTC_10x5_Format||i===r.SRGB8_ALPHA8_ASTC_10x6_Format||i===r.SRGB8_ALPHA8_ASTC_10x8_Format||i===r.SRGB8_ALPHA8_ASTC_10x10_Format||i===r.SRGB8_ALPHA8_ASTC_12x10_Format||i===r.SRGB8_ALPHA8_ASTC_12x12_Format?null!==(s=e.get("WEBGL_compressed_texture_astc"))?i:null:i===r.RGBA_BPTC_Format?null!==(s=e.get("EXT_texture_compression_bptc"))?i:null:i===r.UnsignedInt248Type?n?t.UNSIGNED_INT_24_8:null!==(s=e.get("WEBGL_depth_texture"))?s.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}},function(t,e,i){"use strict";i.d(e,"WebGLTextures",function(){return s});var r=i(0),n=i(6);function s(t,e,i,s,a,o,h){const u=a.isWebGL2,l=a.maxTextures,c=a.maxCubemapSize,d=a.maxTextureSize,p=a.maxSamples,m=new WeakMap;let f,g=!1;try{g="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function x(t,e){return g?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function y(t,e,i,r){let s=1;if((t.width>r||t.height>r)&&(s=r/Math.max(t.width,t.height)),s<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const r=e?n.MathUtils.floorPowerOfTwo:Math.floor,a=r(s*t.width),o=r(s*t.height);void 0===f&&(f=x(a,o));const h=i?x(a,o):f;return h.width=a,h.height=o,h.getContext("2d").drawImage(t,0,0,a,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a+"x"+o+")."),h}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function b(t){return n.MathUtils.isPowerOfTwo(t.width)&&n.MathUtils.isPowerOfTwo(t.height)}function M(t,e){return t.generateMipmaps&&e&&t.minFilter!==r.NearestFilter&&t.minFilter!==r.LinearFilter}function v(e,i,r,n){t.generateMipmap(e),s.get(i).__maxMipLevel=Math.log(Math.max(r,n))*Math.LOG2E}function _(i,r,n){if(!1===u)return r;if(null!==i){if(void 0!==t[i])return t[i];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+i+"'")}let s=r;return r===t.RED&&(n===t.FLOAT&&(s=t.R32F),n===t.HALF_FLOAT&&(s=t.R16F),n===t.UNSIGNED_BYTE&&(s=t.R8)),r===t.RGB&&(n===t.FLOAT&&(s=t.RGB32F),n===t.HALF_FLOAT&&(s=t.RGB16F),n===t.UNSIGNED_BYTE&&(s=t.RGB8)),r===t.RGBA&&(n===t.FLOAT&&(s=t.RGBA32F),n===t.HALF_FLOAT&&(s=t.RGBA16F),n===t.UNSIGNED_BYTE&&(s=t.RGBA8)),s!==t.R16F&&s!==t.R32F&&s!==t.RGBA16F&&s!==t.RGBA32F||e.get("EXT_color_buffer_float"),s}function w(e){return e===r.NearestFilter||e===r.NearestMipmapNearestFilter||e===r.NearestMipmapLinearFilter?t.NEAREST:t.LINEAR}function T(e){const i=e.target;i.removeEventListener("dispose",T),function(e){const i=s.get(e);if(void 0===i.__webglInit)return;t.deleteTexture(i.__webglTexture),s.remove(e)}(i),i.isVideoTexture&&m.delete(i),h.memory.textures--}function S(e){const i=e.target;i.removeEventListener("dispose",S),function(e){const i=s.get(e),r=s.get(e.texture);if(!e)return;void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(i.__webglFramebuffer[e]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[e]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&t.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer);s.remove(e.texture),s.remove(e)}(i),h.memory.textures--}let E=0;function A(e,r){const n=s.get(e);if(e.isVideoTexture&&function(t){const e=h.render.frame;m.get(t)!==e&&(m.set(t,e),t.update())}(e),e.version>0&&n.__version!==e.version){const t=e.image;if(void 0===t)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==t.complete)return void U(n,e,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.activeTexture(t.TEXTURE0+r),i.bindTexture(t.TEXTURE_2D,n.__webglTexture)}function R(e,n){const a=s.get(e);e.version>0&&a.__version!==e.version?function(e,n,s){if(6!==n.image.length)return;C(e,n),i.activeTexture(t.TEXTURE0+s),i.bindTexture(t.TEXTURE_CUBE_MAP,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,n.flipY);const a=n&&(n.isCompressedTexture||n.image[0].isCompressedTexture),h=n.image[0]&&n.image[0].isDataTexture,l=[];for(let t=0;t<6;t++)l[t]=a||h?h?n.image[t].image:n.image[t]:y(n.image[t],!1,!0,c);const d=l[0],p=b(d)||u,m=o.convert(n.format),f=o.convert(n.type),g=_(n.internalFormat,m,f);let x;if(B(t.TEXTURE_CUBE_MAP,n,p),a){for(let e=0;e<6;e++){x=l[e].mipmaps;for(let s=0;s<x.length;s++){const a=x[s];n.format!==r.RGBAFormat&&n.format!==r.RGBFormat?null!==m?i.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,s,g,a.width,a.height,0,a.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,s,g,a.width,a.height,0,m,f,a.data)}}e.__maxMipLevel=x.length-1}else{x=n.mipmaps;for(let e=0;e<6;e++)if(h){i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,g,l[e].width,l[e].height,0,m,f,l[e].data);for(let r=0;r<x.length;r++){const n=x[r],s=n.image[e].image;i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,g,s.width,s.height,0,m,f,s.data)}}else{i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,g,m,f,l[e]);for(let r=0;r<x.length;r++){const n=x[r];i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,g,m,f,n.image[e])}}e.__maxMipLevel=x.length}M(n,p)&&v(t.TEXTURE_CUBE_MAP,n,d.width,d.height);e.__version=n.version,n.onUpdate&&n.onUpdate(n)}(a,e,n):(i.activeTexture(t.TEXTURE0+n),i.bindTexture(t.TEXTURE_CUBE_MAP,a.__webglTexture))}const F={[r.RepeatWrapping]:t.REPEAT,[r.ClampToEdgeWrapping]:t.CLAMP_TO_EDGE,[r.MirroredRepeatWrapping]:t.MIRRORED_REPEAT},L={[r.NearestFilter]:t.NEAREST,[r.NearestMipmapNearestFilter]:t.NEAREST_MIPMAP_NEAREST,[r.NearestMipmapLinearFilter]:t.NEAREST_MIPMAP_LINEAR,[r.LinearFilter]:t.LINEAR,[r.LinearMipmapNearestFilter]:t.LINEAR_MIPMAP_NEAREST,[r.LinearMipmapLinearFilter]:t.LINEAR_MIPMAP_LINEAR};function B(i,n,o){o?(t.texParameteri(i,t.TEXTURE_WRAP_S,F[n.wrapS]),t.texParameteri(i,t.TEXTURE_WRAP_T,F[n.wrapT]),i!==t.TEXTURE_3D&&i!==t.TEXTURE_2D_ARRAY||t.texParameteri(i,t.TEXTURE_WRAP_R,F[n.wrapR]),t.texParameteri(i,t.TEXTURE_MAG_FILTER,L[n.magFilter]),t.texParameteri(i,t.TEXTURE_MIN_FILTER,L[n.minFilter])):(t.texParameteri(i,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(i,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i!==t.TEXTURE_3D&&i!==t.TEXTURE_2D_ARRAY||t.texParameteri(i,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),n.wrapS===r.ClampToEdgeWrapping&&n.wrapT===r.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(i,t.TEXTURE_MAG_FILTER,w(n.magFilter)),t.texParameteri(i,t.TEXTURE_MIN_FILTER,w(n.minFilter)),n.minFilter!==r.NearestFilter&&n.minFilter!==r.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const h=e.get("EXT_texture_filter_anisotropic");if(h){if(n.type===r.FloatType&&null===e.get("OES_texture_float_linear"))return;if(n.type===r.HalfFloatType&&null===(u||e.get("OES_texture_half_float_linear")))return;(n.anisotropy>1||s.get(n).__currentAnisotropy)&&(t.texParameterf(i,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(n.anisotropy,a.getMaxAnisotropy())),s.get(n).__currentAnisotropy=n.anisotropy)}}function C(e,i){void 0===e.__webglInit&&(e.__webglInit=!0,i.addEventListener("dispose",T),e.__webglTexture=t.createTexture(),h.memory.textures++)}function U(e,n,s){let a=t.TEXTURE_2D;n.isDataTexture2DArray&&(a=t.TEXTURE_2D_ARRAY),n.isDataTexture3D&&(a=t.TEXTURE_3D),C(e,n),i.activeTexture(t.TEXTURE0+s),i.bindTexture(a,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,n.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,n.unpackAlignment);const h=function(t){return!u&&(t.wrapS!==r.ClampToEdgeWrapping||t.wrapT!==r.ClampToEdgeWrapping||t.minFilter!==r.NearestFilter&&t.minFilter!==r.LinearFilter)}(n)&&!1===b(n.image),l=y(n.image,h,!1,d),c=b(l)||u,p=o.convert(n.format);let m,f=o.convert(n.type),g=_(n.internalFormat,p,f);B(a,n,c);const x=n.mipmaps;if(n.isDepthTexture)g=t.DEPTH_COMPONENT,u?g=n.type===r.FloatType?t.DEPTH_COMPONENT32F:n.type===r.UnsignedIntType?t.DEPTH_COMPONENT24:n.type===r.UnsignedInt248Type?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT16:n.type===r.FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),n.format===r.DepthFormat&&g===t.DEPTH_COMPONENT&&n.type!==r.UnsignedShortType&&n.type!==r.UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=r.UnsignedShortType,f=o.convert(n.type)),n.format===r.DepthStencilFormat&&g===t.DEPTH_COMPONENT&&(g=t.DEPTH_STENCIL,n.type!==r.UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=r.UnsignedInt248Type,f=o.convert(n.type))),i.texImage2D(t.TEXTURE_2D,0,g,l.width,l.height,0,p,f,null);else if(n.isDataTexture)if(x.length>0&&c){for(let e=0,r=x.length;e<r;e++)m=x[e],i.texImage2D(t.TEXTURE_2D,e,g,m.width,m.height,0,p,f,m.data);n.generateMipmaps=!1,e.__maxMipLevel=x.length-1}else i.texImage2D(t.TEXTURE_2D,0,g,l.width,l.height,0,p,f,l.data),e.__maxMipLevel=0;else if(n.isCompressedTexture){for(let e=0,s=x.length;e<s;e++)m=x[e],n.format!==r.RGBAFormat&&n.format!==r.RGBFormat?null!==p?i.compressedTexImage2D(t.TEXTURE_2D,e,g,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(t.TEXTURE_2D,e,g,m.width,m.height,0,p,f,m.data);e.__maxMipLevel=x.length-1}else if(n.isDataTexture2DArray)i.texImage3D(t.TEXTURE_2D_ARRAY,0,g,l.width,l.height,l.depth,0,p,f,l.data),e.__maxMipLevel=0;else if(n.isDataTexture3D)i.texImage3D(t.TEXTURE_3D,0,g,l.width,l.height,l.depth,0,p,f,l.data),e.__maxMipLevel=0;else if(x.length>0&&c){for(let e=0,r=x.length;e<r;e++)m=x[e],i.texImage2D(t.TEXTURE_2D,e,g,p,f,m);n.generateMipmaps=!1,e.__maxMipLevel=x.length-1}else i.texImage2D(t.TEXTURE_2D,0,g,p,f,l),e.__maxMipLevel=0;M(n,c)&&v(a,n,l.width,l.height),e.__version=n.version,n.onUpdate&&n.onUpdate(n)}function P(e,r,n,a){const h=o.convert(r.texture.format),u=o.convert(r.texture.type),l=_(r.texture.internalFormat,h,u);i.texImage2D(a,0,l,r.width,r.height,0,h,u,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,n,a,s.get(r.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function N(e,i,n){if(t.bindRenderbuffer(t.RENDERBUFFER,e),i.depthBuffer&&!i.stencilBuffer){let s=t.DEPTH_COMPONENT16;if(n){const e=i.depthTexture;e&&e.isDepthTexture&&(e.type===r.FloatType?s=t.DEPTH_COMPONENT32F:e.type===r.UnsignedIntType&&(s=t.DEPTH_COMPONENT24));const n=z(i);t.renderbufferStorageMultisample(t.RENDERBUFFER,n,s,i.width,i.height)}else t.renderbufferStorage(t.RENDERBUFFER,s,i.width,i.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)}else if(i.depthBuffer&&i.stencilBuffer){if(n){const e=z(i);t.renderbufferStorageMultisample(t.RENDERBUFFER,e,t.DEPTH24_STENCIL8,i.width,i.height)}else t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.width,i.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)}else{const e=o.convert(i.texture.format),r=o.convert(i.texture.type),s=_(i.texture.internalFormat,e,r);if(n){const e=z(i);t.renderbufferStorageMultisample(t.RENDERBUFFER,e,s,i.width,i.height)}else t.renderbufferStorage(t.RENDERBUFFER,s,i.width,i.height)}t.bindRenderbuffer(t.RENDERBUFFER,null)}function O(e){const i=s.get(e),n=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(n)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");s.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),A(i.depthTexture,0);const n=s.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===r.DepthFormat)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,n,0);else{if(i.depthTexture.format!==r.DepthStencilFormat)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,n,0)}}(i.__webglFramebuffer,e)}else if(n){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=t.createRenderbuffer(),N(i.__webglDepthbuffer[r],e,!1)}else t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),N(i.__webglDepthbuffer,e,!1);t.bindFramebuffer(t.FRAMEBUFFER,null)}function z(t){return u&&t.isWebGLMultisampleRenderTarget?Math.min(p,t.samples):0}let V=!1,G=!1;this.allocateTextureUnit=function(){const t=E;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),E+=1,t},this.resetTextureUnits=function(){E=0},this.setTexture2D=A,this.setTexture2DArray=function(e,r){const n=s.get(e);e.version>0&&n.__version!==e.version?U(n,e,r):(i.activeTexture(t.TEXTURE0+r),i.bindTexture(t.TEXTURE_2D_ARRAY,n.__webglTexture))},this.setTexture3D=function(e,r){const n=s.get(e);e.version>0&&n.__version!==e.version?U(n,e,r):(i.activeTexture(t.TEXTURE0+r),i.bindTexture(t.TEXTURE_3D,n.__webglTexture))},this.setTextureCube=R,this.setupRenderTarget=function(e){const n=s.get(e),a=s.get(e.texture);e.addEventListener("dispose",S),a.__webglTexture=t.createTexture(),h.memory.textures++;const l=!0===e.isWebGLCubeRenderTarget,c=!0===e.isWebGLMultisampleRenderTarget,d=b(e)||u;if(!u||e.texture.format!==r.RGBFormat||e.texture.type!==r.FloatType&&e.texture.type!==r.HalfFloatType||(e.texture.format=r.RGBAFormat,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),l){n.__webglFramebuffer=[];for(let e=0;e<6;e++)n.__webglFramebuffer[e]=t.createFramebuffer()}else if(n.__webglFramebuffer=t.createFramebuffer(),c)if(u){n.__webglMultisampledFramebuffer=t.createFramebuffer(),n.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,n.__webglColorRenderbuffer);const i=o.convert(e.texture.format),r=o.convert(e.texture.type),s=_(e.texture.internalFormat,i,r),a=z(e);t.renderbufferStorageMultisample(t.RENDERBUFFER,a,s,e.width,e.height),t.bindFramebuffer(t.FRAMEBUFFER,n.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,n.__webglColorRenderbuffer),t.bindRenderbuffer(t.RENDERBUFFER,null),e.depthBuffer&&(n.__webglDepthRenderbuffer=t.createRenderbuffer(),N(n.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(t.FRAMEBUFFER,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(l){i.bindTexture(t.TEXTURE_CUBE_MAP,a.__webglTexture),B(t.TEXTURE_CUBE_MAP,e.texture,d);for(let i=0;i<6;i++)P(n.__webglFramebuffer[i],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+i);M(e.texture,d)&&v(t.TEXTURE_CUBE_MAP,e.texture,e.width,e.height),i.bindTexture(t.TEXTURE_CUBE_MAP,null)}else i.bindTexture(t.TEXTURE_2D,a.__webglTexture),B(t.TEXTURE_2D,e.texture,d),P(n.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),M(e.texture,d)&&v(t.TEXTURE_2D,e.texture,e.width,e.height),i.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&O(e)},this.updateRenderTargetMipmap=function(e){const r=e.texture;if(M(r,b(e)||u)){const n=e.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,a=s.get(r).__webglTexture;i.bindTexture(n,a),v(n,r,e.width,e.height),i.bindTexture(n,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(u){const i=s.get(e);t.bindFramebuffer(t.READ_FRAMEBUFFER,i.__webglMultisampledFramebuffer),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i.__webglFramebuffer);const r=e.width,n=e.height;let a=t.COLOR_BUFFER_BIT;e.depthBuffer&&(a|=t.DEPTH_BUFFER_BIT),e.stencilBuffer&&(a|=t.STENCIL_BUFFER_BIT),t.blitFramebuffer(0,0,r,n,0,0,r,n,a,t.NEAREST),t.bindFramebuffer(t.FRAMEBUFFER,i.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===V&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),V=!0),t=t.texture),A(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===G&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),G=!0),t=t.texture),R(t,e)}}},function(t,e,i){"use strict";i.d(e,"WebGLState",function(){return s});var r=i(0),n=i(11);function s(t,e,i){const s=i.isWebGL2;const a=new function(){let e=!1;const i=new n.Vector4;let r=null;const s=new n.Vector4(0,0,0,0);return{setMask:function(i){r===i||e||(t.colorMask(i,i,i,i),r=i)},setLocked:function(t){e=t},setClear:function(e,r,n,a,o){!0===o&&(e*=a,r*=a,n*=a),i.set(e,r,n,a),!1===s.equals(i)&&(t.clearColor(e,r,n,a),s.copy(i))},reset:function(){e=!1,r=null,s.set(-1,0,0,0)}}},o=new function(){let e=!1,i=null,n=null,s=null;return{setTest:function(e){e?N(t.DEPTH_TEST):O(t.DEPTH_TEST)},setMask:function(r){i===r||e||(t.depthMask(r),i=r)},setFunc:function(e){if(n!==e){if(e)switch(e){case r.NeverDepth:t.depthFunc(t.NEVER);break;case r.AlwaysDepth:t.depthFunc(t.ALWAYS);break;case r.LessDepth:t.depthFunc(t.LESS);break;case r.LessEqualDepth:t.depthFunc(t.LEQUAL);break;case r.EqualDepth:t.depthFunc(t.EQUAL);break;case r.GreaterEqualDepth:t.depthFunc(t.GEQUAL);break;case r.GreaterDepth:t.depthFunc(t.GREATER);break;case r.NotEqualDepth:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);n=e}},setLocked:function(t){e=t},setClear:function(e){s!==e&&(t.clearDepth(e),s=e)},reset:function(){e=!1,i=null,n=null,s=null}}},h=new function(){let e=!1,i=null,r=null,n=null,s=null,a=null,o=null,h=null,u=null;return{setTest:function(i){e||(i?N(t.STENCIL_TEST):O(t.STENCIL_TEST))},setMask:function(r){i===r||e||(t.stencilMask(r),i=r)},setFunc:function(e,i,a){r===e&&n===i&&s===a||(t.stencilFunc(e,i,a),r=e,n=i,s=a)},setOp:function(e,i,r){a===e&&o===i&&h===r||(t.stencilOp(e,i,r),a=e,o=i,h=r)},setLocked:function(t){e=t},setClear:function(e){u!==e&&(t.clearStencil(e),u=e)},reset:function(){e=!1,i=null,r=null,n=null,s=null,a=null,o=null,h=null,u=null}}};let u={},l=null,c=null,d=null,p=null,m=null,f=null,g=null,x=null,y=null,b=!1,M=null,v=null,_=null,w=null,T=null;const S=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let E=!1,A=0;const R=t.getParameter(t.VERSION);-1!==R.indexOf("WebGL")?(A=parseFloat(/^WebGL\ ([0-9])/.exec(R)[1]),E=A>=1):-1!==R.indexOf("OpenGL ES")&&(A=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(R)[1]),E=A>=2);let F=null,L={};const B=new n.Vector4,C=new n.Vector4;function U(e,i,r){const n=new Uint8Array(4),s=t.createTexture();t.bindTexture(e,s),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let e=0;e<r;e++)t.texImage2D(i+e,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,n);return s}const P={};function N(e){!0!==u[e]&&(t.enable(e),u[e]=!0)}function O(e){!1!==u[e]&&(t.disable(e),u[e]=!1)}P[t.TEXTURE_2D]=U(t.TEXTURE_2D,t.TEXTURE_2D,1),P[t.TEXTURE_CUBE_MAP]=U(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),a.setClear(0,0,0,1),o.setClear(1),h.setClear(0),N(t.DEPTH_TEST),o.setFunc(r.LessEqualDepth),D(!1),I(r.CullFaceBack),N(t.CULL_FACE),G(r.NoBlending);const z={[r.AddEquation]:t.FUNC_ADD,[r.SubtractEquation]:t.FUNC_SUBTRACT,[r.ReverseSubtractEquation]:t.FUNC_REVERSE_SUBTRACT};if(s)z[r.MinEquation]=t.MIN,z[r.MaxEquation]=t.MAX;else{const t=e.get("EXT_blend_minmax");null!==t&&(z[r.MinEquation]=t.MIN_EXT,z[r.MaxEquation]=t.MAX_EXT)}const V={[r.ZeroFactor]:t.ZERO,[r.OneFactor]:t.ONE,[r.SrcColorFactor]:t.SRC_COLOR,[r.SrcAlphaFactor]:t.SRC_ALPHA,[r.SrcAlphaSaturateFactor]:t.SRC_ALPHA_SATURATE,[r.DstColorFactor]:t.DST_COLOR,[r.DstAlphaFactor]:t.DST_ALPHA,[r.OneMinusSrcColorFactor]:t.ONE_MINUS_SRC_COLOR,[r.OneMinusSrcAlphaFactor]:t.ONE_MINUS_SRC_ALPHA,[r.OneMinusDstColorFactor]:t.ONE_MINUS_DST_COLOR,[r.OneMinusDstAlphaFactor]:t.ONE_MINUS_DST_ALPHA};function G(e,i,n,s,a,o,h,u){if(e!==r.NoBlending){if(c||(N(t.BLEND),c=!0),e===r.CustomBlending)a=a||i,o=o||n,h=h||s,i===p&&a===g||(t.blendEquationSeparate(z[i],z[a]),p=i,g=a),n===m&&s===f&&o===x&&h===y||(t.blendFuncSeparate(V[n],V[s],V[o],V[h]),m=n,f=s,x=o,y=h),d=e,b=null;else if(e!==d||u!==b){if(p===r.AddEquation&&g===r.AddEquation||(t.blendEquation(t.FUNC_ADD),p=r.AddEquation,g=r.AddEquation),u)switch(e){case r.NormalBlending:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case r.AdditiveBlending:t.blendFunc(t.ONE,t.ONE);break;case r.SubtractiveBlending:t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA);break;case r.MultiplyBlending:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case r.NormalBlending:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case r.AdditiveBlending:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case r.SubtractiveBlending:t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR);break;case r.MultiplyBlending:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}m=null,f=null,x=null,y=null,d=e,b=u}}else c&&(O(t.BLEND),c=!1)}function D(e){M!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),M=e)}function I(e){e!==r.CullFaceNone?(N(t.CULL_FACE),e!==v&&(e===r.CullFaceBack?t.cullFace(t.BACK):e===r.CullFaceFront?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):O(t.CULL_FACE),v=e}function W(e,i,r){e?(N(t.POLYGON_OFFSET_FILL),w===i&&T===r||(t.polygonOffset(i,r),w=i,T=r)):O(t.POLYGON_OFFSET_FILL)}function k(e){void 0===e&&(e=t.TEXTURE0+S-1),F!==e&&(t.activeTexture(e),F=e)}return{buffers:{color:a,depth:o,stencil:h},enable:N,disable:O,useProgram:function(e){return l!==e&&(t.useProgram(e),l=e,!0)},setBlending:G,setMaterial:function(e,i){e.side===r.DoubleSide?O(t.CULL_FACE):N(t.CULL_FACE);let n=e.side===r.BackSide;i&&(n=!n),D(n),e.blending===r.NormalBlending&&!1===e.transparent?G(r.NoBlending):G(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),a.setMask(e.colorWrite);const s=e.stencilWrite;h.setTest(s),s&&(h.setMask(e.stencilWriteMask),h.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),h.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),W(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:D,setCullFace:I,setLineWidth:function(e){e!==_&&(E&&t.lineWidth(e),_=e)},setPolygonOffset:W,setScissorTest:function(e){e?N(t.SCISSOR_TEST):O(t.SCISSOR_TEST)},activeTexture:k,bindTexture:function(e,i){null===F&&k();let r=L[F];void 0===r&&(r={type:void 0,texture:void 0},L[F]=r),r.type===e&&r.texture===i||(t.bindTexture(e,i||P[e]),r.type=e,r.texture=i)},unbindTexture:function(){const e=L[F];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===B.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),B.copy(e))},viewport:function(e){!1===C.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),C.copy(e))},reset:function(){u={},F=null,L={},l=null,d=null,M=null,v=null,a.reset(),o.reset(),h.reset()}}}},function(t,e,i){"use strict";i.d(e,"MeshDistanceMaterial",function(){return s});var r=i(12),n=i(1);function s(t){r.Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new n.Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}s.prototype=Object.create(r.Material.prototype),s.prototype.constructor=s,s.prototype.isMeshDistanceMaterial=!0,s.prototype.copy=function(t){return r.Material.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}},function(t,e,i){"use strict";i.d(e,"MeshDepthMaterial",function(){return s});var r=i(12),n=i(0);function s(t){r.Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=n.BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}s.prototype=Object.create(r.Material.prototype),s.prototype.constructor=s,s.prototype.isMeshDepthMaterial=!0,s.prototype.copy=function(t){return r.Material.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}},function(t,e,i){"use strict";i.d(e,"WebGLShadowMap",function(){return m});var r=i(0),n=i(24),s=i(50),a=i(49),o=i(16),h=i(4),u=i(14),l=i(19),c=i(11),d=i(3),p=i(32);function m(t,e,i){let m=new p.Frustum;const f=new d.Vector2,g=new d.Vector2,x=new c.Vector4,y=[],b=[],M={},v={0:r.BackSide,1:r.FrontSide,2:r.DoubleSide},_=new o.ShaderMaterial({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new d.Vector2},radius:{value:4}},vertexShader:null,fragmentShader:null}),w=_.clone();w.defines.HORIZONAL_PASS=1;const T=new u.BufferGeometry;T.setAttribute("position",new h.BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new l.Mesh(T,_),E=this;function A(i,r){const n=e.update(S);_.uniforms.shadow_pass.value=i.map.texture,_.uniforms.resolution.value=i.mapSize,_.uniforms.radius.value=i.radius,t.setRenderTarget(i.mapPass),t.clear(),t.renderBufferDirect(r,null,n,_,S,null),w.uniforms.shadow_pass.value=i.mapPass.texture,w.uniforms.resolution.value=i.mapSize,w.uniforms.radius.value=i.radius,t.setRenderTarget(i.map),t.clear(),t.renderBufferDirect(r,null,n,w,S,null)}function R(t,e,i){const n=t<<0|e<<1|i<<2;let a=y[n];return void 0===a&&(a=new s.MeshDepthMaterial({depthPacking:r.RGBADepthPacking,morphTargets:t,skinning:e}),y[n]=a),a}function F(t,e,i){const r=t<<0|e<<1|i<<2;let n=b[r];return void 0===n&&(n=new a.MeshDistanceMaterial({morphTargets:t,skinning:e}),b[r]=n),n}function L(e,i,n,s,a,o,h){let u=null,l=R,c=e.customDepthMaterial;if(!0===s.isPointLight&&(l=F,c=e.customDistanceMaterial),void 0===c){let t=!1;!0===n.morphTargets&&(t=i.morphAttributes&&i.morphAttributes.position&&i.morphAttributes.position.length>0);let r=!1;!0===e.isSkinnedMesh&&(!0===n.skinning?r=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e)),u=l(t,r,!0===e.isInstancedMesh)}else u=c;if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){const t=u.uuid,e=n.uuid;let i=M[t];void 0===i&&(i={},M[t]=i);let r=i[e];void 0===r&&(r=u.clone(),i[e]=r),u=r}return u.visible=n.visible,u.wireframe=n.wireframe,h===r.VSMShadowMap?u.side=null!==n.shadowSide?n.shadowSide:n.side:u.side=null!==n.shadowSide?n.shadowSide:v[n.side],u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===s.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(s.matrixWorld),u.nearDistance=a,u.farDistance=o),u}function B(i,n,s,a,o){if(!1===i.visible)return;if(i.layers.test(n.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&o===r.VSMShadowMap)&&(!i.frustumCulled||m.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,i.matrixWorld);const r=e.update(i),n=i.material;if(Array.isArray(n)){const e=r.groups;for(let h=0,u=e.length;h<u;h++){const u=e[h],l=n[u.materialIndex];if(l&&l.visible){const e=L(i,r,l,a,s.near,s.far,o);t.renderBufferDirect(s,null,r,e,i,u)}}}else if(n.visible){const e=L(i,r,n,a,s.near,s.far,o);t.renderBufferDirect(s,null,r,e,i,null)}}const h=i.children;for(let t=0,e=h.length;t<e;t++)B(h[t],n,s,a,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=r.PCFShadowMap,this.render=function(e,s,a){if(!1===E.enabled)return;if(!1===E.autoUpdate&&!1===E.needsUpdate)return;if(0===e.length)return;const o=t.getRenderTarget(),h=t.getActiveCubeFace(),u=t.getActiveMipmapLevel(),l=t.state;l.setBlending(r.NoBlending),l.buffers.color.setClear(1,1,1,1),l.buffers.depth.setTest(!0),l.setScissorTest(!1);for(let o=0,h=e.length;o<h;o++){const h=e[o],u=h.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",h,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;f.copy(u.mapSize);const c=u.getFrameExtents();if(f.multiply(c),g.copy(u.mapSize),(f.x>i||f.y>i)&&(f.x>i&&(g.x=Math.floor(i/c.x),f.x=g.x*c.x,u.mapSize.x=g.x),f.y>i&&(g.y=Math.floor(i/c.y),f.y=g.y*c.y,u.mapSize.y=g.y)),null===u.map&&!u.isPointLightShadow&&this.type===r.VSMShadowMap){const t={minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBAFormat};u.map=new n.WebGLRenderTarget(f.x,f.y,t),u.map.texture.name=h.name+".shadowMap",u.mapPass=new n.WebGLRenderTarget(f.x,f.y,t),u.camera.updateProjectionMatrix()}if(null===u.map){const t={minFilter:r.NearestFilter,magFilter:r.NearestFilter,format:r.RGBAFormat};u.map=new n.WebGLRenderTarget(f.x,f.y,t),u.map.texture.name=h.name+".shadowMap",u.camera.updateProjectionMatrix()}t.setRenderTarget(u.map),t.clear();const d=u.getViewportCount();for(let t=0;t<d;t++){const e=u.getViewport(t);x.set(g.x*e.x,g.y*e.y,g.x*e.z,g.y*e.w),l.viewport(x),u.updateMatrices(h,t),m=u.getFrustum(),B(s,a,u.camera,h,this.type)}u.isPointLightShadow||this.type!==r.VSMShadowMap||A(u,a),u.needsUpdate=!1}E.needsUpdate=!1,t.setRenderTarget(o,h,u)}}},function(t,e,i){"use strict";i.d(e,"WebGLLights",function(){return c});var r=i(5),n=i(9),s=i(3),a=i(1),o=i(2);function h(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let i;switch(e.type){case"DirectionalLight":i={direction:new a.Vector3,color:new r.Color};break;case"SpotLight":i={position:new a.Vector3,direction:new a.Vector3,color:new r.Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new a.Vector3,color:new r.Color,distance:0,decay:0};break;case"HemisphereLight":i={direction:new a.Vector3,skyColor:new r.Color,groundColor:new r.Color};break;case"RectAreaLight":i={color:new r.Color,position:new a.Vector3,halfWidth:new a.Vector3,halfHeight:new a.Vector3}}return t[e.id]=i,i}}}let u=0;function l(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function c(){const t=new h,e=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let i;switch(e.type){case"DirectionalLight":case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new s.Vector2};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new s.Vector2,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=i,i}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let t=0;t<9;t++)i.probe.push(new a.Vector3);const r=new a.Vector3,c=new n.Matrix4,d=new n.Matrix4;return{setup:function(n,s,a){let h=0,p=0,m=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let f=0,g=0,x=0,y=0,b=0,M=0,v=0,_=0;const w=a.matrixWorldInverse;n.sort(l);for(let s=0,a=n.length;s<a;s++){const a=n[s],o=a.color,u=a.intensity,l=a.distance,T=a.shadow&&a.shadow.map?a.shadow.map.texture:null;if(a.isAmbientLight)h+=o.r*u,p+=o.g*u,m+=o.b*u;else if(a.isLightProbe)for(let t=0;t<9;t++)i.probe[t].addScaledVector(a.sh.coefficients[t],u);else if(a.isDirectionalLight){const n=t.get(a);if(n.color.copy(a.color).multiplyScalar(a.intensity),n.direction.setFromMatrixPosition(a.matrixWorld),r.setFromMatrixPosition(a.target.matrixWorld),n.direction.sub(r),n.direction.transformDirection(w),a.castShadow){const t=a.shadow,r=e.get(a);r.shadowBias=t.bias,r.shadowNormalBias=t.normalBias,r.shadowRadius=t.radius,r.shadowMapSize=t.mapSize,i.directionalShadow[f]=r,i.directionalShadowMap[f]=T,i.directionalShadowMatrix[f]=a.shadow.matrix,M++}i.directional[f]=n,f++}else if(a.isSpotLight){const n=t.get(a);if(n.position.setFromMatrixPosition(a.matrixWorld),n.position.applyMatrix4(w),n.color.copy(o).multiplyScalar(u),n.distance=l,n.direction.setFromMatrixPosition(a.matrixWorld),r.setFromMatrixPosition(a.target.matrixWorld),n.direction.sub(r),n.direction.transformDirection(w),n.coneCos=Math.cos(a.angle),n.penumbraCos=Math.cos(a.angle*(1-a.penumbra)),n.decay=a.decay,a.castShadow){const t=a.shadow,r=e.get(a);r.shadowBias=t.bias,r.shadowNormalBias=t.normalBias,r.shadowRadius=t.radius,r.shadowMapSize=t.mapSize,i.spotShadow[x]=r,i.spotShadowMap[x]=T,i.spotShadowMatrix[x]=a.shadow.matrix,_++}i.spot[x]=n,x++}else if(a.isRectAreaLight){const e=t.get(a);e.color.copy(o).multiplyScalar(u),e.position.setFromMatrixPosition(a.matrixWorld),e.position.applyMatrix4(w),d.identity(),c.copy(a.matrixWorld),c.premultiply(w),d.extractRotation(c),e.halfWidth.set(.5*a.width,0,0),e.halfHeight.set(0,.5*a.height,0),e.halfWidth.applyMatrix4(d),e.halfHeight.applyMatrix4(d),i.rectArea[y]=e,y++}else if(a.isPointLight){const r=t.get(a);if(r.position.setFromMatrixPosition(a.matrixWorld),r.position.applyMatrix4(w),r.color.copy(a.color).multiplyScalar(a.intensity),r.distance=a.distance,r.decay=a.decay,a.castShadow){const t=a.shadow,r=e.get(a);r.shadowBias=t.bias,r.shadowNormalBias=t.normalBias,r.shadowRadius=t.radius,r.shadowMapSize=t.mapSize,r.shadowCameraNear=t.camera.near,r.shadowCameraFar=t.camera.far,i.pointShadow[g]=r,i.pointShadowMap[g]=T,i.pointShadowMatrix[g]=a.shadow.matrix,v++}i.point[g]=r,g++}else if(a.isHemisphereLight){const e=t.get(a);e.direction.setFromMatrixPosition(a.matrixWorld),e.direction.transformDirection(w),e.direction.normalize(),e.skyColor.copy(a.color).multiplyScalar(u),e.groundColor.copy(a.groundColor).multiplyScalar(u),i.hemi[b]=e,b++}}y>0&&(i.rectAreaLTC1=o.UniformsLib.LTC_1,i.rectAreaLTC2=o.UniformsLib.LTC_2),i.ambient[0]=h,i.ambient[1]=p,i.ambient[2]=m;const T=i.hash;T.directionalLength===f&&T.pointLength===g&&T.spotLength===x&&T.rectAreaLength===y&&T.hemiLength===b&&T.numDirectionalShadows===M&&T.numPointShadows===v&&T.numSpotShadows===_||(i.directional.length=f,i.spot.length=x,i.rectArea.length=y,i.point.length=g,i.hemi.length=b,i.directionalShadow.length=M,i.directionalShadowMap.length=M,i.pointShadow.length=v,i.pointShadowMap.length=v,i.spotShadow.length=_,i.spotShadowMap.length=_,i.directionalShadowMatrix.length=M,i.pointShadowMatrix.length=v,i.spotShadowMatrix.length=_,T.directionalLength=f,T.pointLength=g,T.spotLength=x,T.rectAreaLength=y,T.hemiLength=b,T.numDirectionalShadows=M,T.numPointShadows=v,T.numSpotShadows=_,i.version=u++)},state:i}}},function(t,e,i){"use strict";i.d(e,"WebGLRenderStates",function(){return s});var r=i(52);function n(){const t=new r.WebGLLights,e=[],i=[];return{init:function(){e.length=0,i.length=0},state:{lightsArray:e,shadowsArray:i,lights:t},setupLights:function(r){t.setup(e,i,r)},pushLight:function(t){e.push(t)},pushShadow:function(t){i.push(t)}}}function s(){let t=new WeakMap;return{get:function(e,i){let r;return!1===t.has(e)?(r=new n,t.set(e,new WeakMap),t.get(e).set(i,r)):!1===t.get(e).has(i)?(r=new n,t.get(e).set(i,r)):r=t.get(e).get(i),r},dispose:function(){t=new WeakMap}}}},function(t,e,i){"use strict";function r(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function n(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function s(t){const e=[];let i=0;const s=[],a=[],o={id:-1};function h(r,n,s,a,h,u){let l=e[i];const c=t.get(s);return void 0===l?(l={id:r.id,object:r,geometry:n,material:s,program:c.program||o,groupOrder:a,renderOrder:r.renderOrder,z:h,group:u},e[i]=l):(l.id=r.id,l.object=r,l.geometry=n,l.material=s,l.program=c.program||o,l.groupOrder=a,l.renderOrder=r.renderOrder,l.z=h,l.group=u),i++,l}return{opaque:s,transparent:a,init:function(){i=0,s.length=0,a.length=0},push:function(t,e,i,r,n,o){const u=h(t,e,i,r,n,o);(!0===i.transparent?a:s).push(u)},unshift:function(t,e,i,r,n,o){const u=h(t,e,i,r,n,o);(!0===i.transparent?a:s).unshift(u)},finish:function(){for(let t=i,r=e.length;t<r;t++){const i=e[t];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(t,e){s.length>1&&s.sort(t||r),a.length>1&&a.sort(e||n)}}}function a(t){let e=new WeakMap;return{get:function(i,r){const n=e.get(i);let a;return void 0===n?(a=new s(t),e.set(i,new WeakMap),e.get(i).set(r,a)):void 0===(a=n.get(r))&&(a=new s(t),n.set(r,a)),a},dispose:function(){e=new WeakMap}}}i.d(e,"WebGLRenderLists",function(){return a})},function(t,e,i){"use strict";function r(){let t=new WeakMap;return{get:function(e){let i=t.get(e);return void 0===i&&(i={},t.set(e,i)),i},remove:function(e){t.delete(e)},update:function(e,i,r){t.get(e)[i]=r},dispose:function(){t=new WeakMap}}}i.d(e,"WebGLProperties",function(){return r})},function(t,e,i){"use strict";i.d(e,"DataTexture3D",function(){return s});var r=i(13),n=i(0);function s(t,e,i,s){r.Texture.call(this,null),this.image={data:t||null,width:e||1,height:i||1,depth:s||1},this.magFilter=n.NearestFilter,this.minFilter=n.NearestFilter,this.wrapR=n.ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}s.prototype=Object.create(r.Texture.prototype),s.prototype.constructor=s,s.prototype.isDataTexture3D=!0},function(t,e,i){"use strict";i.d(e,"DataTexture2DArray",function(){return s});var r=i(13),n=i(0);function s(t,e,i,s){r.Texture.call(this,null),this.image={data:t||null,width:e||1,height:i||1,depth:s||1},this.magFilter=n.NearestFilter,this.minFilter=n.NearestFilter,this.wrapR=n.ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}s.prototype=Object.create(r.Texture.prototype),s.prototype.constructor=s,s.prototype.isDataTexture2DArray=!0},function(t,e,i){"use strict";i.d(e,"WebGLProgram",function(){return o});var r=i(25),n=i(35);let s=0;function a(t,e,i){const r=t.getShaderParameter(e,t.COMPILE_STATUS),n=t.getShaderInfoLog(e).trim();return r&&""===n?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+i+"\n"+n+function(t){const e=t.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(t.getShaderSource(e))}function o(t,e,i,o){const h=t.getContext();i.vertexShader,i.fragmentShader;const u=h.createProgram(),l=i.vertexShader,c=i.fragmentShader,d=/(^|\n)\s*#version \d/;if(!d.test(l||"")||!d.test(c||""))throw new Error("Shaders should be pre-built in this fork and include GLSL version");const p=Object(n.WebGLShader)(h,h.VERTEX_SHADER,l),m=Object(n.WebGLShader)(h,h.FRAGMENT_SHADER,c);if(h.attachShader(u,p),h.attachShader(u,m),void 0!==i.index0AttributeName?h.bindAttribLocation(u,0,i.index0AttributeName):!0===i.morphTargets&&h.bindAttribLocation(u,0,"position"),h.linkProgram(u),t.debug.checkShaderErrors){const t=h.getProgramInfoLog(u).trim(),e=h.getShaderInfoLog(p).trim(),i=h.getShaderInfoLog(m).trim();let r=!0,n=!0;if(!1===h.getProgramParameter(u,h.LINK_STATUS)){r=!1;const e=a(h,p,"vertex"),i=a(h,m,"fragment");console.error("THREE.WebGLProgram: shader error: ",h.getError(),"gl.VALIDATE_STATUS",h.getProgramParameter(u,h.VALIDATE_STATUS),"gl.getProgramInfoLog",t,e,i)}else""!==t?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",t):""!==e&&""!==i||(n=!1);n&&(this.diagnostics={runnable:r,programLog:t,vertexShader:{log:e},fragmentShader:{log:i}})}let f,g;return h.deleteShader(p),h.deleteShader(m),this.getUniforms=function(){return void 0===f&&(f=new r.WebGLUniforms(h,u)),f},this.getAttributes=function(){return void 0===g&&(g=function(t,e){const i={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let n=0;n<r;n++){const r=t.getActiveAttrib(e,n).name;i[r]=t.getAttribLocation(e,r)}return i}(h,u)),g},this.destroy=function(){o.releaseStatesOfProgram(this),h.deleteProgram(u),this.program=void 0},this.name=i.shaderName,this.id=s++,this.cacheKey=e,this.usedTimes=1,this.program=u,this.vertexShader=p,this.fragmentShader=m,this}},function(t,e,i){"use strict";i.d(e,"WebGLPrograms",function(){return o});var r=i(0),n=i(58),s=i(18),a=i(7);function o(t,e,i,o,h,u){const l=[],c=o.isWebGL2,d=o.logarithmicDepthBuffer,p=o.floatVertexTextures,m=o.maxVertexUniforms,f=o.vertexTextures;let g=o.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},y=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function b(t){let e;return t?t.isTexture?e=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=r.LinearEncoding,e}return{getParameters:function(n,a,h,l,y){const M=l.fog,v=n.isMeshStandardMaterial?l.environment:null,_=e.get(n.envMap||v),w=x[n.type],T=y.isSkinnedMesh?function(t){const e=t.skeleton.bones;if(p)return 1024;{const t=m,i=Math.floor((t-20)/4),r=Math.min(i,e.length);return r<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+r+"."),0):r}}(y):0;let S,E;if(null!==n.precision&&(g=o.getMaxPrecision(n.precision))!==n.precision&&console.warn("THREE.WebGLProgram.getParameters:",n.precision,"not supported, using",g,"instead."),w){const t=s.ShaderLib[w];S=t.vertexShader,E=t.fragmentShader}else S=n.vertexShader,E=n.fragmentShader;const A=t.getRenderTarget();return{isWebGL2:c,shaderID:w,shaderName:n.type,vertexShader:S,fragmentShader:E,defines:n.defines,isRawShaderMaterial:!0===n.isRawShaderMaterial,glslVersion:n.glslVersion,precision:g,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:f,outputEncoding:null!==A?b(A.texture):t.outputEncoding,map:!!n.map,mapEncoding:b(n.map),matcap:!!n.matcap,matcapEncoding:b(n.matcap),envMap:!!_,envMapMode:_&&_.mapping,envMapEncoding:b(_),envMapCubeUV:!!_&&(_.mapping===r.CubeUVReflectionMapping||_.mapping===r.CubeUVRefractionMapping),lightMap:!!n.lightMap,lightMapEncoding:b(n.lightMap),aoMap:!!n.aoMap,emissiveMap:!!n.emissiveMap,emissiveMapEncoding:b(n.emissiveMap),bumpMap:!!n.bumpMap,normalMap:!!n.normalMap,objectSpaceNormalMap:n.normalMapType===r.ObjectSpaceNormalMap,tangentSpaceNormalMap:n.normalMapType===r.TangentSpaceNormalMap,clearcoatMap:!!n.clearcoatMap,clearcoatRoughnessMap:!!n.clearcoatRoughnessMap,clearcoatNormalMap:!!n.clearcoatNormalMap,displacementMap:!!n.displacementMap,roughnessMap:!!n.roughnessMap,metalnessMap:!!n.metalnessMap,specularMap:!!n.specularMap,alphaMap:!!n.alphaMap,gradientMap:!!n.gradientMap,sheen:!!n.sheen,transmissionMap:!!n.transmissionMap,combine:n.combine,vertexTangents:n.normalMap&&n.vertexTangents,vertexColors:n.vertexColors,vertexUvs:!!(n.map||n.bumpMap||n.normalMap||n.specularMap||n.alphaMap||n.emissiveMap||n.roughnessMap||n.metalnessMap||n.clearcoatMap||n.clearcoatRoughnessMap||n.clearcoatNormalMap||n.displacementMap||n.transmissionMap),uvsVertexOnly:!(n.map||n.bumpMap||n.normalMap||n.specularMap||n.alphaMap||n.emissiveMap||n.roughnessMap||n.metalnessMap||n.clearcoatNormalMap||n.transmissionMap||!n.displacementMap),fog:!!M,useFog:n.fog,fogExp2:M&&M.isFogExp2,flatShading:n.flatShading,sizeAttenuation:n.sizeAttenuation,logarithmicDepthBuffer:d,skinning:n.skinning&&T>0,maxBones:T,useVertexTexture:p,morphTargets:n.morphTargets,morphNormals:n.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,dithering:n.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.length>0,shadowMapType:t.shadowMap.type,toneMapping:n.toneMapped?t.toneMapping:r.NoToneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:n.premultipliedAlpha,alphaTest:n.alphaTest,doubleSided:n.side===r.DoubleSide,flipSided:n.side===r.BackSide,depthPacking:void 0!==n.depthPacking&&n.depthPacking,index0AttributeName:n.index0AttributeName,extensionDerivatives:n.extensions&&n.extensions.derivatives,extensionFragDepth:n.extensions&&n.extensions.fragDepth,extensionDrawBuffers:n.extensions&&n.extensions.drawBuffers,extensionShaderTextureLOD:n.extensions&&n.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||i.has("EXT_shader_texture_lod"),customProgramCacheKey:n.customProgramCacheKey()}},getProgramCacheKey:function(e){const i=[];if(e.shaderID?i.push(e.shaderID):(i.push(e.fragmentShader),i.push(e.vertexShader)),void 0!==e.defines)for(const t in e.defines)i.push(t),i.push(e.defines[t]);if(!1===e.isRawShaderMaterial){for(let t=0;t<y.length;t++)i.push(e[y[t]]);i.push(t.outputEncoding),i.push(t.gammaFactor)}return i.push(e.customProgramCacheKey),i.join()},getUniforms:function(t){const e=x[t.type];let i;if(e){const t=s.ShaderLib[e];i=a.UniformsUtils.clone(t.uniforms)}else i=t.uniforms;return i},acquireProgram:function(e,i){let r;for(let t=0,e=l.length;t<e;t++){const e=l[t];if(e.cacheKey===i){++(r=e).usedTimes;break}}return void 0===r&&(r=new n.WebGLProgram(t,i,e,h),l.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){const e=l.indexOf(t);l[e]=l[l.length-1],l.pop(),t.destroy()}},programs:l}}},function(t,e,i){"use strict";function r(t,e,i,r){let n=new WeakMap;return{update:function(s){const a=r.render.frame,o=s.geometry,h=e.get(s,o);return n.get(h)!==a&&(o.isGeometry&&h.updateFromObject(s),e.update(h),n.set(h,a)),s.isInstancedMesh&&(i.update(s.instanceMatrix,t.ARRAY_BUFFER),null!==s.instanceColor&&i.update(s.instanceColor,t.ARRAY_BUFFER)),h},dispose:function(){n=new WeakMap}}}i.d(e,"WebGLObjects",function(){return r})},function(t,e,i){"use strict";function r(t,e){return t[0]-e[0]}function n(t,e){return Math.abs(e[1])-Math.abs(t[1])}function s(t){const e={},i=new Float32Array(8),s=[];for(let t=0;t<8;t++)s[t]=[t,0];return{update:function(a,o,h,u){const l=a.morphTargetInfluences,c=void 0===l?0:l.length;let d=e[o.id];if(void 0===d){d=[];for(let t=0;t<c;t++)d[t]=[t,0];e[o.id]=d}for(let t=0;t<c;t++){const e=d[t];e[0]=t,e[1]=l[t]}d.sort(n);for(let t=0;t<8;t++)t<c&&d[t][1]?(s[t][0]=d[t][0],s[t][1]=d[t][1]):(s[t][0]=Number.MAX_SAFE_INTEGER,s[t][1]=0);s.sort(r);const p=h.morphTargets&&o.morphAttributes.position,m=h.morphNormals&&o.morphAttributes.normal;let f=0;for(let t=0;t<8;t++){const e=s[t],r=e[0],n=e[1];r!==Number.MAX_SAFE_INTEGER&&n?(p&&o.getAttribute("morphTarget"+t)!==p[r]&&o.setAttribute("morphTarget"+t,p[r]),m&&o.getAttribute("morphNormal"+t)!==m[r]&&o.setAttribute("morphNormal"+t,m[r]),i[t]=n,f+=n):(p&&void 0!==o.getAttribute("morphTarget"+t)&&o.deleteAttribute("morphTarget"+t),m&&void 0!==o.getAttribute("morphNormal"+t)&&o.deleteAttribute("morphNormal"+t),i[t]=0)}const g=o.morphTargetsRelative?1:1-f;u.getUniforms().setValue(t,"morphTargetBaseInfluence",g),u.getUniforms().setValue(t,"morphTargetInfluences",i)}}}i.d(e,"WebGLMorphtargets",function(){return s})},function(t,e,i){"use strict";function r(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(i,r,n){switch(e.calls++,r){case t.TRIANGLES:e.triangles+=n*(i/3);break;case t.LINES:e.lines+=n*(i/2);break;case t.LINE_STRIP:e.lines+=n*(i-1);break;case t.LINE_LOOP:e.lines+=n*i;break;case t.POINTS:e.points+=n*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}i.d(e,"WebGLInfo",function(){return r})},function(t,e,i){"use strict";function r(t,e,i,r){const n=r.isWebGL2;let s,a,o;this.setMode=function(t){s=t},this.setIndex=function(t){a=t.type,o=t.bytesPerElement},this.render=function(e,r){t.drawElements(s,r,a,e*o),i.update(r,s,1)},this.renderInstances=function(r,h,u){if(0===u)return;let l,c;if(n)l=t,c="drawElementsInstanced";else if(c="drawElementsInstancedANGLE",null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](s,h,a,r*o,u),i.update(h,s,u)}}i.d(e,"WebGLIndexedBufferRenderer",function(){return r})},function(t,e,i){"use strict";i.d(e,"WebGLGeometries",function(){return a});var r=i(4),n=i(14),s=i(30);function a(t,e,i,a){const o=new WeakMap,h=new WeakMap;function u(t){const r=t.target,n=o.get(r);null!==n.index&&e.remove(n.index);for(const t in n.attributes)e.remove(n.attributes[t]);r.removeEventListener("dispose",u),o.delete(r);const s=h.get(n);s&&(e.remove(s),h.delete(n)),a.releaseStatesOfGeometry(n),!0===r.isInstancedBufferGeometry&&delete r._maxInstanceCount,i.memory.geometries--}function l(t){const i=[],n=t.index,a=t.attributes.position;let o=0;if(null!==n){const t=n.array;o=n.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],n=t[e+1],s=t[e+2];i.push(r,n,n,s,s,r)}}else{const t=a.array;o=a.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,n=e+2;i.push(t,r,r,n,n,t)}}const u=new(Object(s.arrayMax)(i)>65535?r.Uint32BufferAttribute:r.Uint16BufferAttribute)(i,1);u.version=o;const l=h.get(t);l&&e.remove(l),h.set(t,u)}return{get:function(t,e){let r=o.get(e);return r||(e.addEventListener("dispose",u),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new n.BufferGeometry).setFromObject(t)),r=e._bufferGeometry),o.set(e,r),i.memory.geometries++,r)},update:function(i){const r=i.attributes;for(const i in r)e.update(r[i],t.ARRAY_BUFFER);const n=i.morphAttributes;for(const i in n){const r=n[i];for(let i=0,n=r.length;i<n;i++)e.update(r[i],t.ARRAY_BUFFER)}},getWireframeAttribute:function(t){const e=h.get(t);if(e){const i=t.index;null!==i&&e.version<i.version&&l(t)}else l(t);return h.get(t)}}}},function(t,e,i){"use strict";function r(t){const e={};return{has:function(i){if(void 0!==e[i])return null!==e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,null!==r},get:function(t){return this.has(t)||console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e[t]}}}i.d(e,"WebGLExtensions",function(){return r})},function(t,e,i){"use strict";i.d(e,"CubeCamera",function(){return h});var r=i(8),n=i(1),s=i(22);const a=90,o=1;function h(t,e,i){if(r.Object3D.call(this),this.type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=i;const h=new s.PerspectiveCamera(a,o,t,e);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new n.Vector3(1,0,0)),this.add(h);const u=new s.PerspectiveCamera(a,o,t,e);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new n.Vector3(-1,0,0)),this.add(u);const l=new s.PerspectiveCamera(a,o,t,e);l.layers=this.layers,l.up.set(0,0,1),l.lookAt(new n.Vector3(0,1,0)),this.add(l);const c=new s.PerspectiveCamera(a,o,t,e);c.layers=this.layers,c.up.set(0,0,-1),c.lookAt(new n.Vector3(0,-1,0)),this.add(c);const d=new s.PerspectiveCamera(a,o,t,e);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new n.Vector3(0,0,1)),this.add(d);const p=new s.PerspectiveCamera(a,o,t,e);p.layers=this.layers,p.up.set(0,-1,0),p.lookAt(new n.Vector3(0,0,-1)),this.add(p),this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();const r=t.xr.enabled,n=t.getRenderTarget();t.xr.enabled=!1;const s=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,h),t.setRenderTarget(i,1),t.render(e,u),t.setRenderTarget(i,2),t.render(e,l),t.setRenderTarget(i,3),t.render(e,c),t.setRenderTarget(i,4),t.render(e,d),i.texture.generateMipmaps=s,t.setRenderTarget(i,5),t.render(e,p),t.setRenderTarget(n),t.xr.enabled=r},this.clear=function(t,e,r,n){const s=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(i,s),t.clear(e,r,n);t.setRenderTarget(s)}}h.prototype=Object.create(r.Object3D.prototype),h.prototype.constructor=h},function(t,e,i){"use strict";i.d(e,"WebGLCubeRenderTarget",function(){return c});var r=i(0),n=i(19),s=i(31),a=i(16),o=i(7),h=i(24),u=i(66),l=i(29);function c(t,e,i){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=i),h.WebGLRenderTarget.call(this,t,t,e),e=e||{},this.texture=new l.CubeTexture(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture._needsFlipEnvMap=!1}c.prototype=Object.create(h.WebGLRenderTarget.prototype),c.prototype.constructor=c,c.prototype.isWebGLCubeRenderTarget=!0,c.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=r.RGBAFormat,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i={tEquirect:{value:null}},h=null,l=null,c=new s.BoxBufferGeometry(5,5,5),d=new a.ShaderMaterial({name:"CubemapFromEquirect",uniforms:Object(o.cloneUniforms)(i),vertexShader:h,fragmentShader:l,side:r.BackSide,blending:r.NoBlending});d.uniforms.tEquirect.value=e;const p=new n.Mesh(c,d),m=e.minFilter;return e.minFilter===r.LinearMipmapLinearFilter&&(e.minFilter=r.LinearFilter),new u.CubeCamera(1,10,this).update(t,p),e.minFilter=m,p.geometry.dispose(),p.material.dispose(),this}},function(t,e,i){"use strict";i.d(e,"WebGLCubeMaps",function(){return s});var r=i(0),n=i(67);function s(t){let e=new WeakMap;function i(t,e){return e===r.EquirectangularReflectionMapping?t.mapping=r.CubeReflectionMapping:e===r.EquirectangularRefractionMapping&&(t.mapping=r.CubeRefractionMapping),t}function s(t){const i=t.target;i.removeEventListener("dispose",s);const r=e.get(i);void 0!==r&&(e.delete(i),r.dispose())}return{get:function(a){if(a&&a.isTexture){const o=a.mapping;if(o===r.EquirectangularReflectionMapping||o===r.EquirectangularRefractionMapping){if(e.has(a))return i(e.get(a).texture,a.mapping);{const r=a.image;if(r&&r.height>0){const o=t.getRenderList(),h=t.getRenderTarget(),u=t.getRenderState(),l=new n.WebGLCubeRenderTarget(r.height/2);return l.fromEquirectangularTexture(t,a),e.set(a,l),t.setRenderTarget(h),t.setRenderList(o),t.setRenderState(u),a.addEventListener("dispose",s),i(l.texture,a.mapping)}return null}}}return a},dispose:function(){e=new WeakMap}}}},function(t,e,i){"use strict";i.d(e,"WebGLClipping",function(){return s});var r=i(10),n=i(17);function s(t){const e=this;let i=null,s=0,a=!1,o=!1;const h=new n.Plane,u=new r.Matrix3,l={value:null,needsUpdate:!1};function c(){l.value!==i&&(l.value=i,l.needsUpdate=s>0),e.numPlanes=s,e.numIntersection=0}function d(t,i,r,n){const s=null!==t?t.length:0;let a=null;if(0!==s){if(a=l.value,!0!==n||null===a){const e=r+4*s,n=i.matrixWorldInverse;u.getNormalMatrix(n),(null===a||a.length<e)&&(a=new Float32Array(e));for(let e=0,i=r;e!==s;++e,i+=4)h.copy(t[e]).applyMatrix4(n,u),h.normal.toArray(a,i),a[i+3]=h.constant}l.value=a,l.needsUpdate=!0}return e.numPlanes=s,e.numIntersection=0,a}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,r){const n=0!==t.length||e||0!==s||a;return a=e,i=d(t,r,0),s=t.length,n},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1,c()},this.setState=function(e,r,n){const h=e.clippingPlanes,u=e.clipIntersection,p=e.clipShadows,m=t.get(e);if(!a||null===h||0===h.length||o&&!p)o?d(null):c();else{const t=o?0:s,e=4*t;let a=m.clippingState||null;l.value=a,a=d(h,r,e,n);for(let t=0;t!==e;++t)a[t]=i[t];m.clippingState=a,this.numIntersection=u?this.numPlanes:0,this.numPlanes+=t}}}},function(t,e,i){"use strict";function r(t,e,i){let r;function n(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let a=void 0!==i.precision?i.precision:"highp";const o=n(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);const h=!0===i.logarithmicDepthBuffer,u=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),l=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),c=t.getParameter(t.MAX_TEXTURE_SIZE),d=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),p=t.getParameter(t.MAX_VERTEX_ATTRIBS),m=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),f=t.getParameter(t.MAX_VARYING_VECTORS),g=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),x=l>0,y=s||!!e.get("OES_texture_float");return{isWebGL2:s,getMaxAnisotropy:function(){if(void 0!==r)return r;const i=e.get("EXT_texture_filter_anisotropic");return r=null!==i?t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:n,precision:a,logarithmicDepthBuffer:h,maxTextures:u,maxVertexTextures:l,maxTextureSize:c,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:m,maxVaryings:f,maxFragmentUniforms:g,vertexTextures:x,floatFragmentTextures:y,floatVertexTextures:x&&y,maxSamples:s?t.getParameter(t.MAX_SAMPLES):0}}i.d(e,"WebGLCapabilities",function(){return r})},function(t,e,i){"use strict";function r(t,e,i,r){const n=r.isWebGL2;let s;this.setMode=function(t){s=t},this.render=function(e,r){t.drawArrays(s,e,r),i.update(r,s,1)},this.renderInstances=function(r,a,o){if(0===o)return;let h,u;if(n)h=t,u="drawArraysInstanced";else if(u="drawArraysInstancedANGLE",null===(h=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[u](s,r,a,o),i.update(a,s,o)}}i.d(e,"WebGLBufferRenderer",function(){return r})},function(t,e,i){"use strict";function r(t,e,i,r){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||null!==s,o={},h=d(null);let u=h;function l(e){return r.isWebGL2?t.bindVertexArray(e):s.bindVertexArrayOES(e)}function c(e){return r.isWebGL2?t.deleteVertexArray(e):s.deleteVertexArrayOES(e)}function d(t){const e=[],i=[],r=[];for(let t=0;t<n;t++)e[t]=0,i[t]=0,r[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:i,attributeDivisors:r,object:t,attributes:{},index:null}}function p(){const t=u.newAttributes;for(let e=0,i=t.length;e<i;e++)t[e]=0}function m(t){f(t,0)}function f(i,n){const s=u.newAttributes,a=u.enabledAttributes,o=u.attributeDivisors;if(s[i]=1,0===a[i]&&(t.enableVertexAttribArray(i),a[i]=1),o[i]!==n){(r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,n),o[i]=n}}function g(){const e=u.newAttributes,i=u.enabledAttributes;for(let r=0,n=i.length;r<n;r++)i[r]!==e[r]&&(t.disableVertexAttribArray(r),i[r]=0)}function x(e,i,n,s,a,o){!0!==r.isWebGL2||n!==t.INT&&n!==t.UNSIGNED_INT?t.vertexAttribPointer(e,i,n,s,a,o):t.vertexAttribIPointer(e,i,n,a,o)}function y(){b(),u!==h&&l((u=h).object)}function b(){h.geometry=null,h.program=null,h.wireframe=!1}return{setup:function(n,h,c,y,b){let M=!1;if(a){const e=function(e,i,n){const a=!0===n.wireframe;let h=o[e.id];void 0===h&&(h={},o[e.id]=h);let u=h[i.id];void 0===u&&(u={},h[i.id]=u);let l=u[a];return void 0===l&&(l=d(r.isWebGL2?t.createVertexArray():s.createVertexArrayOES()),u[a]=l),l}(y,c,h);u!==e&&l((u=e).object),(M=function(t,e){const i=u.attributes,r=t.attributes;if(Object.keys(i).length!==Object.keys(r).length)return!0;for(const t in r){const e=i[t],n=r[t];if(void 0===e)return!0;if(e.attribute!==n)return!0;if(e.data!==n.data)return!0}return u.index!==e}(y,b))&&function(t,e){const i={},r=t.attributes;for(const t in r){const e=r[t],n={};n.attribute=e,e.data&&(n.data=e.data),i[t]=n}u.attributes=i,u.index=e}(y,b)}else{const t=!0===h.wireframe;u.geometry===y.id&&u.program===c.id&&u.wireframe===t||(u.geometry=y.id,u.program=c.id,u.wireframe=t,M=!0)}!0===n.isInstancedMesh&&(M=!0),null!==b&&i.update(b,t.ELEMENT_ARRAY_BUFFER),M&&(function(n,s,a,o){if(!1===r.isWebGL2&&(n.isInstancedMesh||o.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;p();const h=o.attributes,u=a.getAttributes(),l=s.defaultAttributeValues;for(const e in u){const r=u[e];if(r>=0){const s=h[e];if(void 0!==s){const e=s.normalized,n=s.itemSize,a=i.get(s);if(void 0===a)continue;const h=a.buffer,u=a.type,l=a.bytesPerElement;if(s.isInterleavedBufferAttribute){const i=s.data,a=i.stride,c=s.offset;i&&i.isInstancedInterleavedBuffer?(f(r,i.meshPerAttribute),void 0===o._maxInstanceCount&&(o._maxInstanceCount=i.meshPerAttribute*i.count)):m(r),t.bindBuffer(t.ARRAY_BUFFER,h),x(r,n,u,e,a*l,c*l)}else s.isInstancedBufferAttribute?(f(r,s.meshPerAttribute),void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)):m(r),t.bindBuffer(t.ARRAY_BUFFER,h),x(r,n,u,e,0,0)}else if("instanceMatrix"===e){const e=i.get(n.instanceMatrix);if(void 0===e)continue;const s=e.buffer,a=e.type;f(r+0,1),f(r+1,1),f(r+2,1),f(r+3,1),t.bindBuffer(t.ARRAY_BUFFER,s),t.vertexAttribPointer(r+0,4,a,!1,64,0),t.vertexAttribPointer(r+1,4,a,!1,64,16),t.vertexAttribPointer(r+2,4,a,!1,64,32),t.vertexAttribPointer(r+3,4,a,!1,64,48)}else if("instanceColor"===e){const e=i.get(n.instanceColor);if(void 0===e)continue;const s=e.buffer,a=e.type;f(r,1),t.bindBuffer(t.ARRAY_BUFFER,s),t.vertexAttribPointer(r,3,a,!1,12,0)}else if(void 0!==l){const i=l[e];if(void 0!==i)switch(i.length){case 2:t.vertexAttrib2fv(r,i);break;case 3:t.vertexAttrib3fv(r,i);break;case 4:t.vertexAttrib4fv(r,i);break;default:t.vertexAttrib1fv(r,i)}}}}g()}(n,h,c,y),null!==b&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){y();for(const t in o){const e=o[t];for(const t in e){const i=e[t];for(const t in i)c(i[t].object),delete i[t];delete e[t]}delete o[t]}},releaseStatesOfGeometry:function(t){if(void 0===o[t.id])return;const e=o[t.id];for(const t in e){const i=e[t];for(const t in i)c(i[t].object),delete i[t];delete e[t]}delete o[t.id]},releaseStatesOfProgram:function(t){for(const e in o){const i=o[e];if(void 0===i[t.id])continue;const r=i[t.id];for(const t in r)c(r[t].object),delete r[t];delete i[t.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:g}}i.d(e,"WebGLBindingStates",function(){return r})},function(t,e,i){"use strict";i.d(e,"MeshBasicMaterial",function(){return a});var r=i(12),n=i(0),s=i(5);function a(t){r.Material.call(this),this.type="MeshBasicMaterial",this.color=new s.Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=n.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}a.prototype=Object.create(r.Material.prototype),a.prototype.constructor=a,a.prototype.isMeshBasicMaterial=!0,a.prototype.copy=function(t){return r.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this}},function(t,e,i){"use strict";i.d(e,"Ray",function(){return c});var r=i(1);const n=new r.Vector3,s=new r.Vector3,a=new r.Vector3,o=new r.Vector3,h=new r.Vector3,u=new r.Vector3,l=new r.Vector3;class c{constructor(t,e){this.origin=void 0!==t?t:new r.Vector3,this.direction=void 0!==e?e:new r.Vector3(0,0,-1)}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new r.Vector3),e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,n)),this}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new r.Vector3),e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=n.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(n.copy(this.direction).multiplyScalar(e).add(this.origin),n.distanceToSquared(t))}distanceSqToSegment(t,e,i,r){s.copy(t).add(e).multiplyScalar(.5),a.copy(e).sub(t).normalize(),o.copy(this.origin).sub(s);const n=.5*t.distanceTo(e),h=-this.direction.dot(a),u=o.dot(this.direction),l=-o.dot(a),c=o.lengthSq(),d=Math.abs(1-h*h);let p,m,f,g;if(d>0)if(m=h*u-l,g=n*d,(p=h*l-u)>=0)if(m>=-g)if(m<=g){const t=1/d;f=(p*=t)*(p+h*(m*=t)+2*u)+m*(h*p+m+2*l)+c}else m=n,f=-(p=Math.max(0,-(h*m+u)))*p+m*(m+2*l)+c;else m=-n,f=-(p=Math.max(0,-(h*m+u)))*p+m*(m+2*l)+c;else m<=-g?f=-(p=Math.max(0,-(-h*n+u)))*p+(m=p>0?-n:Math.min(Math.max(-n,-l),n))*(m+2*l)+c:m<=g?(p=0,f=(m=Math.min(Math.max(-n,-l),n))*(m+2*l)+c):f=-(p=Math.max(0,-(h*n+u)))*p+(m=p>0?n:Math.min(Math.max(-n,-l),n))*(m+2*l)+c;else m=h>0?-n:n,f=-(p=Math.max(0,-(h*m+u)))*p+m*(m+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(p).add(this.origin),r&&r.copy(a).multiplyScalar(m).add(s),f}intersectSphere(t,e){n.subVectors(t.center,this.origin);const i=n.dot(this.direction),r=n.dot(n)-i*i,s=t.radius*t.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,h=i+a;return o<0&&h<0?null:o<0?this.at(h,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return null===i?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,r,n,s,a,o;const h=1/this.direction.x,u=1/this.direction.y,l=1/this.direction.z,c=this.origin;return h>=0?(i=(t.min.x-c.x)*h,r=(t.max.x-c.x)*h):(i=(t.max.x-c.x)*h,r=(t.min.x-c.x)*h),u>=0?(n=(t.min.y-c.y)*u,s=(t.max.y-c.y)*u):(n=(t.max.y-c.y)*u,s=(t.min.y-c.y)*u),i>s||n>r?null:((n>i||i!=i)&&(i=n),(s<r||r!=r)&&(r=s),l>=0?(a=(t.min.z-c.z)*l,o=(t.max.z-c.z)*l):(a=(t.max.z-c.z)*l,o=(t.min.z-c.z)*l),i>o||a>r?null:((a>i||i!=i)&&(i=a),(o<r||r!=r)&&(r=o),r<0?null:this.at(i>=0?i:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,n)}intersectTriangle(t,e,i,r,n){h.subVectors(e,t),u.subVectors(i,t),l.crossVectors(h,u);let s,a=this.direction.dot(l);if(a>0){if(r)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}o.subVectors(this.origin,t);const c=s*this.direction.dot(u.crossVectors(o,u));if(c<0)return null;const d=s*this.direction.dot(h.cross(o));if(d<0)return null;if(c+d>a)return null;const p=-s*o.dot(l);return p<0?null:this.at(p/a,n)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}},function(t,e,i){"use strict";i.d(e,"PlaneBufferGeometry",function(){return s});var r=i(14),n=i(4);class s extends r.BufferGeometry{constructor(t,e,i,r){super(),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};const s=(t=t||1)/2,a=(e=e||1)/2,o=Math.floor(i)||1,h=Math.floor(r)||1,u=o+1,l=h+1,c=t/o,d=e/h,p=[],m=[],f=[],g=[];for(let t=0;t<l;t++){const e=t*d-a;for(let i=0;i<u;i++){const r=i*c-s;m.push(r,-e,0),f.push(0,0,1),g.push(i/o),g.push(1-t/h)}}for(let t=0;t<h;t++)for(let e=0;e<o;e++){const i=e+u*t,r=e+u*(t+1),n=e+1+u*(t+1),s=e+1+u*t;p.push(i,r,s),p.push(r,n,s)}this.setIndex(p),this.setAttribute("position",new n.Float32BufferAttribute(m,3)),this.setAttribute("normal",new n.Float32BufferAttribute(f,3)),this.setAttribute("uv",new n.Float32BufferAttribute(g,2))}}},function(t,e,i){"use strict";i.d(e,"DirectGeometry",function(){return n});var r=i(3);class n{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(t){const e=[];let i,r,n=void 0;const s=t.faces;for(r=0;r<s.length;r++){const t=s[r];t.materialIndex!==n&&(n=t.materialIndex,void 0!==i&&(i.count=3*r-i.start,e.push(i)),i={start:3*r,materialIndex:n})}void 0!==i&&(i.count=3*r-i.start,e.push(i)),this.groups=e}fromGeometry(t){const e=t.faces,i=t.vertices,n=t.faceVertexUvs,s=n[0]&&n[0].length>0,a=n[1]&&n[1].length>0,o=t.morphTargets,h=o.length;let u;if(h>0){u=[];for(let t=0;t<h;t++)u[t]={name:o[t].name,data:[]};this.morphTargets.position=u}const l=t.morphNormals,c=l.length;let d;if(c>0){d=[];for(let t=0;t<c;t++)d[t]={name:l[t].name,data:[]};this.morphTargets.normal=d}const p=t.skinIndices,m=t.skinWeights,f=p.length===i.length,g=m.length===i.length;i.length>0&&0===e.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let t=0;t<e.length;t++){const x=e[t];this.vertices.push(i[x.a],i[x.b],i[x.c]);const y=x.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{const t=x.normal;this.normals.push(t,t,t)}const b=x.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{const t=x.color;this.colors.push(t,t,t)}if(!0===s){const e=n[0][t];void 0!==e?this.uvs.push(e[0],e[1],e[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",t),this.uvs.push(new r.Vector2,new r.Vector2,new r.Vector2))}if(!0===a){const e=n[1][t];void 0!==e?this.uvs2.push(e[0],e[1],e[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",t),this.uvs2.push(new r.Vector2,new r.Vector2,new r.Vector2))}for(let t=0;t<h;t++){const e=o[t].vertices;u[t].data.push(e[x.a],e[x.b],e[x.c])}for(let e=0;e<c;e++){const i=l[e].vertexNormals[t];d[e].data.push(i.a,i.b,i.c)}f&&this.skinIndices.push(p[x.a],p[x.b],p[x.c]),g&&this.skinWeights.push(m[x.a],m[x.b],m[x.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}}},function(t,e,i){"use strict";i.d(e,"WebGLBackground",function(){return c});var r=i(0),n=i(31),s=i(75),a=i(16),o=i(5),h=i(19),u=i(18),l=i(7);function c(t,e,i,c,d){const p=new o.Color(0);let m,f,g=0,x=null,y=0,b=null;function M(t,e){i.buffers.color.setClear(t.r,t.g,t.b,e,d)}return{getClearColor:function(){return p},setClearColor:function(t,e){p.set(t),M(p,g=void 0!==e?e:1)},getClearAlpha:function(){return g},setClearAlpha:function(t){M(p,g=t)},render:function(i,o,d,v){let _=!0===o.isScene?o.background:null;_&&_.isTexture&&(_=e.get(_));const w=t.xr,T=w.getSession&&w.getSession();T&&"additive"===T.environmentBlendMode&&(_=null),null===_?M(p,g):_&&_.isColor&&(M(_,1),v=!0),(t.autoClear||v)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),_&&(_.isCubeTexture||_.isWebGLCubeRenderTarget||_.mapping===r.CubeUVReflectionMapping)?(void 0===f&&((f=new h.Mesh(new n.BoxBufferGeometry(1,1,1),new a.ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:Object(l.cloneUniforms)(u.ShaderLib.cube.uniforms),vertexShader:u.ShaderLib.cube.vertexShader,fragmentShader:u.ShaderLib.cube.fragmentShader,side:r.BackSide,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),c.update(f)),_.isWebGLCubeRenderTarget&&(_=_.texture),f.material.uniforms.envMap.value=_,f.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_._needsFlipEnvMap?-1:1,x===_&&y===_.version&&b===t.toneMapping||(f.material.needsUpdate=!0,x=_,y=_.version,b=t.toneMapping),i.unshift(f,f.geometry,f.material,0,0,null)):_&&_.isTexture&&(void 0===m&&((m=new h.Mesh(new s.PlaneBufferGeometry(2,2),new a.ShaderMaterial({name:"BackgroundMaterial",uniforms:Object(l.cloneUniforms)(u.ShaderLib.background.uniforms),vertexShader:u.ShaderLib.background.vertexShader,fragmentShader:u.ShaderLib.background.fragmentShader,side:r.FrontSide,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(m.material,"map",{get:function(){return this.uniforms.t2D.value}}),c.update(m)),m.material.uniforms.t2D.value=_,!0===_.matrixAutoUpdate&&_.updateMatrix(),m.material.uniforms.uvTransform.value.copy(_.matrix),x===_&&y===_.version&&b===t.toneMapping||(m.material.needsUpdate=!0,x=_,y=_.version,b=t.toneMapping),i.unshift(m,m.geometry,m.material,0,0,null))}}}},function(t,e,i){"use strict";function r(t,e){const i=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const i=r.get(e);i&&(t.deleteBuffer(i.buffer),r.delete(e))},update:function(e,n){if(e.isGLBufferAttribute){var s=r.get(e);return void((!s||s.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const a=r.get(e);void 0===a?r.set(e,function(e,i){const r=e.array,n=e.usage,s=t.createBuffer();t.bindBuffer(i,s),t.bufferData(i,r,n),e.onUploadCallback();let a=t.FLOAT;return r instanceof Float32Array?a=t.FLOAT:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=t.UNSIGNED_SHORT:r instanceof Int16Array?a=t.SHORT:r instanceof Uint32Array?a=t.UNSIGNED_INT:r instanceof Int32Array?a=t.INT:r instanceof Int8Array?a=t.BYTE:r instanceof Uint8Array&&(a=t.UNSIGNED_BYTE),{buffer:s,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(e,n)):a.version<e.version&&(function(e,r,n){const s=r.array,a=r.updateRange;t.bindBuffer(n,e),-1===a.count?t.bufferSubData(n,0,s):(i?t.bufferSubData(n,a.offset*s.BYTES_PER_ELEMENT,s,a.offset,a.count):t.bufferSubData(n,a.offset*s.BYTES_PER_ELEMENT,s.subarray(a.offset,a.offset+a.count)),a.count=-1)}(a.buffer,e,n),a.version=e.version)}}}i.d(e,"WebGLAttributes",function(){return r})},function(t,e,i){"use strict";function r(){let t=null,e=!1,i=null,r=null;function n(e,s){i(e,s),r=t.requestAnimationFrame(n)}return{start:function(){!0!==e&&null!==i&&(r=t.requestAnimationFrame(n),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){i=t},setContext:function(e){t=e}}}i.d(e,"WebGLAnimation",function(){return r})},function(t,e,i){"use strict";i.d(e,"DataTexture",function(){return s});var r=i(13),n=i(0);function s(t,e,i,s,a,o,h,u,l,c,d,p){r.Texture.call(this,null,o,h,u,l,c,s,a,d,p),this.image={data:t||null,width:e||1,height:i||1},this.magFilter=void 0!==l?l:n.NearestFilter,this.minFilter=void 0!==c?c:n.NearestFilter,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}s.prototype=Object.create(r.Texture.prototype),s.prototype.constructor=s,s.prototype.isDataTexture=!0},function(t,e,i){"use strict";i.d(e,"WebGLRenderer",function(){return N});var r=i(0),n=i(6),s=i(80),a=i(32),o=i(9),h=i(3),u=i(1),l=i(11),c=i(79),d=i(78),p=i(77),m=i(72),f=i(71),g=i(70),x=i(69),y=i(68),b=i(65),M=i(64),v=i(63),_=i(62),w=i(61),T=i(60),S=i(59),E=i(55),A=i(54),R=i(53),F=i(51),L=i(48),B=i(47),C=i(25),U=i(46),P=i(45);function N(t){const e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),i=void 0!==t.context?t.context:null,N=void 0!==t.alpha&&t.alpha,O=void 0===t.depth||t.depth,z=void 0===t.stencil||t.stencil,V=void 0!==t.antialias&&t.antialias,G=void 0===t.premultipliedAlpha||t.premultipliedAlpha,D=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,I=void 0!==t.powerPreference?t.powerPreference:"default",W=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let k=null,H=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=r.LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=r.NoToneMapping,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const j=this;let X=!1,q=null,Y=0,Z=0,J=null,Q=null,K=-1,$=null,tt=null;const et=new l.Vector4,it=new l.Vector4;let rt=null,nt=e.width,st=e.height,at=1,ot=null,ht=null;const ut=new l.Vector4(0,0,nt,st),lt=new l.Vector4(0,0,nt,st);let ct=!1;const dt=new a.Frustum;let pt=!1,mt=!1;const ft=new o.Matrix4,gt=new u.Vector3,xt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function yt(){return null===J?at:1}let bt,Mt,vt,_t,wt,Tt,St,Et,At,Rt,Ft,Lt,Bt,Ct,Ut,Pt,Nt,Ot,zt,Vt,Gt,Dt=i;function It(t,i){for(let r=0;r<t.length;r++){const n=t[r],s=e.getContext(n,i);if(null!==s)return s}return null}try{const t={alpha:N,depth:O,stencil:z,antialias:V,premultipliedAlpha:G,preserveDrawingBuffer:D,powerPreference:I,failIfMajorPerformanceCaveat:W};if(e.addEventListener("webglcontextlost",jt,!1),e.addEventListener("webglcontextrestored",Xt,!1),null===Dt){const e=["webgl2","webgl","experimental-webgl"];if(!0===j.isWebGL1Renderer&&e.shift(),null===(Dt=It(e,t)))throw It(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Dt.getShaderPrecisionFormat&&(Dt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function Wt(){bt=new b.WebGLExtensions(Dt),!1===(Mt=new g.WebGLCapabilities(Dt,bt,t)).isWebGL2&&(bt.get("WEBGL_depth_texture"),bt.get("OES_texture_float"),bt.get("OES_texture_half_float"),bt.get("OES_texture_half_float_linear"),bt.get("OES_standard_derivatives"),bt.get("OES_element_index_uint"),bt.get("OES_vertex_array_object"),bt.get("ANGLE_instanced_arrays")),bt.get("OES_texture_float_linear"),Vt=new U.WebGLUtils(Dt,bt,Mt),(vt=new L.WebGLState(Dt,bt,Mt)).scissor(it.copy(lt).multiplyScalar(at).floor()),vt.viewport(et.copy(ut).multiplyScalar(at).floor()),_t=new _.WebGLInfo(Dt),wt=new E.WebGLProperties,Tt=new B.WebGLTextures(Dt,bt,vt,wt,Mt,Vt,_t),St=new y.WebGLCubeMaps(j),Et=new d.WebGLAttributes(Dt,Mt),Gt=new m.WebGLBindingStates(Dt,bt,Et,Mt),At=new M.WebGLGeometries(Dt,Et,_t,Gt),Rt=new T.WebGLObjects(Dt,At,Et,_t),Nt=new w.WebGLMorphtargets(Dt),Ut=new x.WebGLClipping(wt),Ft=new S.WebGLPrograms(j,St,bt,Mt,Gt,Ut),Lt=new P.WebGLMaterials(wt),Bt=new A.WebGLRenderLists(wt),Ct=new R.WebGLRenderStates,Pt=new p.WebGLBackground(j,St,vt,Rt,G),Ot=new f.WebGLBufferRenderer(Dt,bt,_t,Mt),zt=new v.WebGLIndexedBufferRenderer(Dt,bt,_t,Mt),_t.programs=Ft.programs,j.capabilities=Mt,j.extensions=bt,j.properties=wt,j.renderLists=Bt,j.state=vt,j.info=_t}Wt();const kt={dispose:()=>{},setAnimationLoop:()=>{}};this.xr=kt;const Ht=new F.WebGLShadowMap(j,Rt,Mt.maxTextureSize);function jt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),X=!0}function Xt(){console.log("THREE.WebGLRenderer: Context Restored."),X=!1,Wt()}function qt(t){const e=t.target;e.removeEventListener("dispose",qt),function(t){Yt(t),wt.remove(t)}(e)}function Yt(t){const e=wt.get(t).program;void 0!==e&&Ft.releaseProgram(e)}this.shadowMap=Ht,this.getContext=function(){return Dt},this.getContextAttributes=function(){return Dt.getContextAttributes()},this.forceContextLoss=function(){const t=bt.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=bt.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return at},this.setPixelRatio=function(t){void 0!==t&&(at=t,this.setSize(nt,st,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new h.Vector2),t.set(nt,st)},this.setSize=function(t,i,r){kt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(nt=t,st=i,e.width=Math.floor(t*at),e.height=Math.floor(i*at),!1!==r&&(e.style.width=t+"px",e.style.height=i+"px"),this.setViewport(0,0,t,i))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new h.Vector2),t.set(nt*at,st*at).floor()},this.setDrawingBufferSize=function(t,i,r){nt=t,st=i,at=r,e.width=Math.floor(t*r),e.height=Math.floor(i*r),this.setViewport(0,0,t,i)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new l.Vector4),t.copy(et)},this.getViewport=function(t){return t.copy(ut)},this.setViewport=function(t,e,i,r){t.isVector4?ut.set(t.x,t.y,t.z,t.w):ut.set(t,e,i,r),vt.viewport(et.copy(ut).multiplyScalar(at).floor())},this.getScissor=function(t){return t.copy(lt)},this.setScissor=function(t,e,i,r){t.isVector4?lt.set(t.x,t.y,t.z,t.w):lt.set(t,e,i,r),vt.scissor(it.copy(lt).multiplyScalar(at).floor())},this.getScissorTest=function(){return ct},this.setScissorTest=function(t){vt.setScissorTest(ct=t)},this.setOpaqueSort=function(t){ot=t},this.setTransparentSort=function(t){ht=t},this.getClearColor=function(){return Pt.getClearColor()},this.setClearColor=function(){Pt.setClearColor.apply(Pt,arguments)},this.getClearAlpha=function(){return Pt.getClearAlpha()},this.setClearAlpha=function(){Pt.setClearAlpha.apply(Pt,arguments)},this.clear=function(t,e,i){let r=0;(void 0===t||t)&&(r|=Dt.COLOR_BUFFER_BIT),(void 0===e||e)&&(r|=Dt.DEPTH_BUFFER_BIT),(void 0===i||i)&&(r|=Dt.STENCIL_BUFFER_BIT),Dt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",jt,!1),e.removeEventListener("webglcontextrestored",Xt,!1),Bt.dispose(),Ct.dispose(),wt.dispose(),St.dispose(),Rt.dispose(),Gt.dispose(),kt.dispose(),Jt.stop()},this.renderBufferImmediate=function(t,e){Gt.initAttributes();const i=wt.get(t);t.hasPositions&&!i.position&&(i.position=Dt.createBuffer()),t.hasNormals&&!i.normal&&(i.normal=Dt.createBuffer()),t.hasUvs&&!i.uv&&(i.uv=Dt.createBuffer()),t.hasColors&&!i.color&&(i.color=Dt.createBuffer());const r=e.getAttributes();t.hasPositions&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,i.position),Dt.bufferData(Dt.ARRAY_BUFFER,t.positionArray,Dt.DYNAMIC_DRAW),Gt.enableAttribute(r.position),Dt.vertexAttribPointer(r.position,3,Dt.FLOAT,!1,0,0)),t.hasNormals&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,i.normal),Dt.bufferData(Dt.ARRAY_BUFFER,t.normalArray,Dt.DYNAMIC_DRAW),Gt.enableAttribute(r.normal),Dt.vertexAttribPointer(r.normal,3,Dt.FLOAT,!1,0,0)),t.hasUvs&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,i.uv),Dt.bufferData(Dt.ARRAY_BUFFER,t.uvArray,Dt.DYNAMIC_DRAW),Gt.enableAttribute(r.uv),Dt.vertexAttribPointer(r.uv,2,Dt.FLOAT,!1,0,0)),t.hasColors&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,i.color),Dt.bufferData(Dt.ARRAY_BUFFER,t.colorArray,Dt.DYNAMIC_DRAW),Gt.enableAttribute(r.color),Dt.vertexAttribPointer(r.color,3,Dt.FLOAT,!1,0,0)),Gt.disableUnusedAttributes(),Dt.drawArrays(Dt.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,i,r,n,s){null===e&&(e=xt);const a=n.isMesh&&n.matrixWorld.determinant()<0,o=te(t,e,r,n);vt.setMaterial(r,a);let h=i.index;const u=i.attributes.position;if(null===h){if(void 0===u||0===u.count)return}else if(0===h.count)return;let l,c=1;!0===r.wireframe&&(h=At.getWireframeAttribute(i),c=2),(r.morphTargets||r.morphNormals)&&Nt.update(n,i,r,o),Gt.setup(n,r,o,i,h);let d=Ot;null!==h&&(l=Et.get(h),(d=zt).setIndex(l));const p=null!==h?h.count:u.count,m=i.drawRange.start*c,f=i.drawRange.count*c,g=null!==s?s.start*c:0,x=null!==s?s.count*c:1/0,y=Math.max(m,g),b=Math.min(p,m+f,g+x)-1,M=Math.max(0,b-y+1);if(0!==M){if(n.isMesh)!0===r.wireframe?(vt.setLineWidth(r.wireframeLinewidth*yt()),d.setMode(Dt.LINES)):d.setMode(Dt.TRIANGLES);else if(n.isLine){let t=r.linewidth;void 0===t&&(t=1),vt.setLineWidth(t*yt()),n.isLineSegments?d.setMode(Dt.LINES):n.isLineLoop?d.setMode(Dt.LINE_LOOP):d.setMode(Dt.LINE_STRIP)}else n.isPoints?d.setMode(Dt.POINTS):n.isSprite&&d.setMode(Dt.TRIANGLES);if(n.isInstancedMesh)d.renderInstances(y,M,n.count);else if(i.isInstancedBufferGeometry){const t=Math.min(i.instanceCount,i._maxInstanceCount);d.renderInstances(y,M,t)}else d.render(y,M)}},this.compile=function(t,e){(H=Ct.get(t,e)).init(),t.traverseVisible(function(t){t.isLight&&t.layers.test(e.layers)&&(H.pushLight(t),t.castShadow&&H.pushShadow(t))}),H.setupLights(e);const i=new WeakMap;t.traverse(function(e){const r=e.material;if(r)if(Array.isArray(r))for(let n=0;n<r.length;n++){const s=r[n];!1===i.has(s)&&($t(s,t,e),i.set(s))}else!1===i.has(r)&&($t(r,t,e),i.set(r))})};let Zt=null;const Jt=new c.WebGLAnimation;function Qt(t,e,i){const r=!0===e.isScene?e.overrideMaterial:null;for(let n=0,s=t.length;n<s;n++){const s=t[n],a=s.object,o=s.geometry,h=null===r?s.material:r,u=s.group;if(i.isArrayCamera){tt=i;const t=i.cameras;for(let i=0,r=t.length;i<r;i++){const r=t[i];a.layers.test(r.layers)&&(vt.viewport(et.copy(r.viewport)),H.setupLights(r),Kt(a,e,r,o,h,u))}}else tt=null,Kt(a,e,i,o,h,u)}}function Kt(t,e,i,r,n,s){if(t.onBeforeRender(j,e,i,r,n,s),H=Ct.get(e,tt||i),t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){const r=te(i,e,n,t);vt.setMaterial(n),Gt.reset(),function(t,e){t.render(function(t){j.renderBufferImmediate(t,e)})}(t,r)}else j.renderBufferDirect(i,e,r,n,t,s);t.onAfterRender(j,e,i,r,n,s),H=Ct.get(e,tt||i)}function $t(t,e,i){!0!==e.isScene&&(e=xt);const r=wt.get(t),n=H.state.lights,s=H.state.shadowsArray,a=n.state.version,o=Ft.getParameters(t,n.state,s,e,i),h=Ft.getProgramCacheKey(o);let u=r.program,l=!0;if(void 0===u)t.addEventListener("dispose",qt);else if(u.cacheKey!==h)Yt(t);else if(r.lightsStateVersion!==a)l=!1;else{if(void 0!==o.shaderID){const i=t.isMeshStandardMaterial?e.environment:null;return void(r.envMap=St.get(t.envMap||i))}l=!1}l&&(o.uniforms=Ft.getUniforms(t),t.onBeforeCompile(o,j),u=Ft.acquireProgram(o,h),r.program=u,r.uniforms=o.uniforms,r.outputEncoding=o.outputEncoding);const c=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(r.numClippingPlanes=Ut.numPlanes,r.numIntersection=Ut.numIntersection,c.clippingPlanes=Ut.uniform),r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=St.get(t.envMap||r.environment),r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=a,r.needsLights&&(c.ambientLightColor.value=n.state.ambient,c.lightProbe.value=n.state.probe,c.directionalLights.value=n.state.directional,c.directionalLightShadows.value=n.state.directionalShadow,c.spotLights.value=n.state.spot,c.spotLightShadows.value=n.state.spotShadow,c.rectAreaLights.value=n.state.rectArea,c.ltc_1.value=n.state.rectAreaLTC1,c.ltc_2.value=n.state.rectAreaLTC2,c.pointLights.value=n.state.point,c.pointLightShadows.value=n.state.pointShadow,c.hemisphereLights.value=n.state.hemi,c.directionalShadowMap.value=n.state.directionalShadowMap,c.directionalShadowMatrix.value=n.state.directionalShadowMatrix,c.spotShadowMap.value=n.state.spotShadowMap,c.spotShadowMatrix.value=n.state.spotShadowMatrix,c.pointShadowMap.value=n.state.pointShadowMap,c.pointShadowMatrix.value=n.state.pointShadowMatrix);const d=r.program.getUniforms(),p=C.WebGLUniforms.seqWithValue(d.seq,c);r.uniformsList=p}function te(t,e,i,a){!0!==e.isScene&&(e=xt),Tt.resetTextureUnits();const o=e.fog,h=i.isMeshStandardMaterial?e.environment:null,u=null===J?j.outputEncoding:J.texture.encoding,l=St.get(i.envMap||h),c=wt.get(i),d=H.state.lights;if(!0===pt&&(!0===mt||t!==$)){const e=t===$&&i.id===K;Ut.setState(i,t,e)}i.version===c.__version?i.fog&&c.fog!==o?$t(i,e,a):c.environment!==h?$t(i,e,a):c.needsLights&&c.lightsStateVersion!==d.state.version?$t(i,e,a):void 0===c.numClippingPlanes||c.numClippingPlanes===Ut.numPlanes&&c.numIntersection===Ut.numIntersection?c.outputEncoding!==u?$t(i,e,a):c.envMap!==l&&$t(i,e,a):$t(i,e,a):($t(i,e,a),c.__version=i.version);let p=!1,m=!1,f=!1;const g=c.program,x=g.getUniforms(),y=c.uniforms;if(vt.useProgram(g.program)&&(p=!0,m=!0,f=!0),i.id!==K&&(K=i.id,m=!0),p||$!==t){if(x.setValue(Dt,"projectionMatrix",t.projectionMatrix),Mt.logarithmicDepthBuffer&&x.setValue(Dt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),$!==t&&($=t,m=!0,f=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const e=x.map.cameraPosition;void 0!==e&&e.setValue(Dt,gt.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&x.setValue(Dt,"isOrthographic",!0===t.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||i.skinning)&&x.setValue(Dt,"viewMatrix",t.matrixWorldInverse)}if(i.skinning){x.setOptional(Dt,a,"bindMatrix"),x.setOptional(Dt,a,"bindMatrixInverse");const t=a.skeleton;if(t){const e=t.bones;if(Mt.floatVertexTextures){if(void 0===t.boneTexture){let i=Math.sqrt(4*e.length);i=n.MathUtils.ceilPowerOfTwo(i),i=Math.max(i,4);const a=new Float32Array(i*i*4);a.set(t.boneMatrices);const o=new s.DataTexture(a,i,i,r.RGBAFormat,r.FloatType);t.boneMatrices=a,t.boneTexture=o,t.boneTextureSize=i}x.setValue(Dt,"boneTexture",t.boneTexture,Tt),x.setValue(Dt,"boneTextureSize",t.boneTextureSize)}else x.setOptional(Dt,t,"boneMatrices")}}var b,M;return(m||c.receiveShadow!==a.receiveShadow)&&(c.receiveShadow=a.receiveShadow,x.setValue(Dt,"receiveShadow",a.receiveShadow)),m&&(x.setValue(Dt,"toneMappingExposure",j.toneMappingExposure),c.needsLights&&(M=f,(b=y).ambientLightColor.needsUpdate=M,b.lightProbe.needsUpdate=M,b.directionalLights.needsUpdate=M,b.directionalLightShadows.needsUpdate=M,b.pointLights.needsUpdate=M,b.pointLightShadows.needsUpdate=M,b.spotLights.needsUpdate=M,b.spotLightShadows.needsUpdate=M,b.rectAreaLights.needsUpdate=M,b.hemisphereLights.needsUpdate=M),o&&i.fog&&Lt.refreshFogUniforms(y,o),Lt.refreshMaterialUniforms(y,i,at,st),C.WebGLUniforms.upload(Dt,c.uniformsList,y,Tt)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(C.WebGLUniforms.upload(Dt,c.uniformsList,y,Tt),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&x.setValue(Dt,"center",a.center),x.setValue(Dt,"modelViewMatrix",a.modelViewMatrix),x.setValue(Dt,"normalMatrix",a.normalMatrix),x.setValue(Dt,"modelMatrix",a.matrixWorld),g}Jt.setAnimationLoop(function(t){kt.isPresenting||Zt&&Zt(t)}),this.setAnimationLoop=function(t){Zt=t,kt.setAnimationLoop(t),null===t?Jt.stop():Jt.start()},this.render=function(t,e){let i,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),i=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===X)return;Gt.resetDefaultState(),K=-1,$=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===kt.enabled&&!0===kt.isPresenting&&(e=kt.getCamera(e)),!0===t.isScene&&t.onBeforeRender(j,t,e,i||J),(H=Ct.get(t,e)).init(),ft.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),dt.setFromProjectionMatrix(ft),mt=this.localClippingEnabled,pt=Ut.init(this.clippingPlanes,mt,e),(k=Bt.get(t,e)).init(),function t(e,i,r,n){if(!1===e.visible)return;const s=e.layers.test(i.layers);if(s)if(e.isGroup)r=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(i);else if(e.isLight)H.pushLight(e),e.castShadow&&H.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||dt.intersectsSprite(e)){n&&gt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ft);const t=Rt.update(e),i=e.material;i.visible&&k.push(e,t,i,r,gt.z,null)}}else if(e.isImmediateRenderObject)n&&gt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ft),k.push(e,null,e.material,r,gt.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==_t.render.frame&&(e.skeleton.update(),e.skeleton.frame=_t.render.frame),!e.frustumCulled||dt.intersectsObject(e))){n&&gt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ft);const t=Rt.update(e),i=e.material;if(Array.isArray(i)){const n=t.groups;for(let s=0,a=n.length;s<a;s++){const a=n[s],o=i[a.materialIndex];o&&o.visible&&k.push(e,t,o,r,gt.z,a)}}else i.visible&&k.push(e,t,i,r,gt.z,null)}const a=e.children;for(let e=0,s=a.length;e<s;e++)t(a[e],i,r,n)}(t,e,0,j.sortObjects),k.finish(),!0===j.sortObjects&&k.sort(ot,ht),!0===pt&&Ut.beginShadows();const n=H.state.shadowsArray;Ht.render(n,t,e),H.setupLights(e),!0===pt&&Ut.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==i&&this.setRenderTarget(i),Pt.render(k,t,e,r);const s=k.opaque,a=k.transparent;s.length>0&&Qt(s,t,e),a.length>0&&Qt(a,t,e),!0===t.isScene&&t.onAfterRender(j,t,e),null!==J&&(Tt.updateRenderTargetMipmap(J),Tt.updateMultisampleRenderTarget(J)),vt.buffers.depth.setTest(!0),vt.buffers.depth.setMask(!0),vt.buffers.color.setMask(!0),vt.setPolygonOffset(!1),k=null,H=null},this.setFramebuffer=function(t){q!==t&&null===J&&Dt.bindFramebuffer(Dt.FRAMEBUFFER,t),q=t},this.getActiveCubeFace=function(){return Y},this.getActiveMipmapLevel=function(){return Z},this.getRenderList=function(){return k},this.setRenderList=function(t){k=t},this.getRenderState=function(){return H},this.setRenderState=function(t){H=t},this.getRenderTarget=function(){return J},this.setRenderTarget=function(t,e=0,i=0){J=t,Y=e,Z=i,t&&void 0===wt.get(t).__webglFramebuffer&&Tt.setupRenderTarget(t);let r=q,n=!1;if(t){const i=wt.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=i[e],n=!0):r=t.isWebGLMultisampleRenderTarget?wt.get(t).__webglMultisampledFramebuffer:i,et.copy(t.viewport),it.copy(t.scissor),rt=t.scissorTest}else et.copy(ut).multiplyScalar(at).floor(),it.copy(lt).multiplyScalar(at).floor(),rt=ct;if(Q!==r&&(Dt.bindFramebuffer(Dt.FRAMEBUFFER,r),Q=r),vt.viewport(et),vt.scissor(it),vt.setScissorTest(rt),n){const r=wt.get(t.texture);Dt.framebufferTexture2D(Dt.FRAMEBUFFER,Dt.COLOR_ATTACHMENT0,Dt.TEXTURE_CUBE_MAP_POSITIVE_X+e,r.__webglTexture,i)}},this.readRenderTargetPixels=function(t,e,i,n,s,a,o){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let h=wt.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(h=h[o]),h){let o=!1;h!==Q&&(Dt.bindFramebuffer(Dt.FRAMEBUFFER,h),o=!0);try{const h=t.texture,u=h.format,l=h.type;if(u!==r.RGBAFormat&&Vt.convert(u)!==Dt.getParameter(Dt.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l===r.UnsignedByteType||Vt.convert(l)===Dt.getParameter(Dt.IMPLEMENTATION_COLOR_READ_TYPE)||l===r.FloatType&&(Mt.isWebGL2||bt.get("OES_texture_float")||bt.get("WEBGL_color_buffer_float"))||l===r.HalfFloatType&&(Mt.isWebGL2?bt.get("EXT_color_buffer_float"):bt.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Dt.checkFramebufferStatus(Dt.FRAMEBUFFER)===Dt.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-n&&i>=0&&i<=t.height-s&&Dt.readPixels(e,i,n,s,Vt.convert(u),Vt.convert(l),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{o&&Dt.bindFramebuffer(Dt.FRAMEBUFFER,Q)}}},this.copyFramebufferToTexture=function(t,e,i){void 0===i&&(i=0);const r=Math.pow(2,-i),n=Math.floor(e.image.width*r),s=Math.floor(e.image.height*r),a=Vt.convert(e.format);Tt.setTexture2D(e,0),Dt.copyTexImage2D(Dt.TEXTURE_2D,i,a,t.x,t.y,n,s,0),vt.unbindTexture()},this.copyTextureToTexture=function(t,e,i,r){void 0===r&&(r=0);const n=e.image.width,s=e.image.height,a=Vt.convert(i.format),o=Vt.convert(i.type);Tt.setTexture2D(i,0),Dt.pixelStorei(Dt.UNPACK_FLIP_Y_WEBGL,i.flipY),Dt.pixelStorei(Dt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),Dt.pixelStorei(Dt.UNPACK_ALIGNMENT,i.unpackAlignment),e.isDataTexture?Dt.texSubImage2D(Dt.TEXTURE_2D,r,t.x,t.y,n,s,a,o,e.image.data):e.isCompressedTexture?Dt.compressedTexSubImage2D(Dt.TEXTURE_2D,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):Dt.texSubImage2D(Dt.TEXTURE_2D,r,t.x,t.y,a,o,e.image),0===r&&i.generateMipmaps&&Dt.generateMipmap(Dt.TEXTURE_2D),vt.unbindTexture()},this.initTexture=function(t){Tt.setTexture2D(t,0),vt.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}},function(t,e,i){"use strict";i.d(e,"Layers",function(){return r});class r{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}}},function(t,e,i){"use strict";i.d(e,"Euler",function(){return o});var r=i(21),n=i(1),s=i(9),a=i(6);class o{constructor(t=0,e=0,i=0,r=o.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=t,this._y=e,this._z=i,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e,i){const r=a.MathUtils.clamp,n=t.elements,s=n[0],o=n[4],h=n[8],u=n[1],l=n[5],c=n[9],d=n[2],p=n[6],m=n[10];switch(e=e||this._order){case"XYZ":this._y=Math.asin(r(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-c,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,l),this._z=0);break;case"YXZ":this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(h,m),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(r(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-r(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(h,m));break;case"XZY":this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,l),this._y=Math.atan2(h,s)):(this._x=Math.atan2(-c,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!1!==i&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return h.makeRotationFromQuaternion(t),this.setFromRotationMatrix(h,e,i)}setFromVector3(t,e){return this.set(t.x,t.y,t.z,e||this._order)}reorder(t){return u.setFromEuler(this),this.setFromQuaternion(u,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new n.Vector3(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}o.DefaultOrder="XYZ",o.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const h=new s.Matrix4,u=new r.Quaternion},function(t,e,i){"use strict";i.d(e,"default",function(){return o});var r=i(22),n=i(5),s=i(81),a=i(44);class o{constructor({width:t,height:e,backgroundColor:i,z:o,pixelRatio:h,canvas:u}){this.width=t,this.height=e,this.meshCount=0,this.meshListeners=[],this.devicePixelRatio=h?Math.min(1.6,h):1,this.renderer=new s.WebGLRenderer({antialias:!0,alpha:!0,canvas:u,failIfMajorPerformanceCaveat:!0}),this.renderer.setPixelRatio(this.devicePixelRatio),void 0!==i&&this.renderer.setClearColor(new n.Color(i)),this.scene=new a.Scene,this.camera=new r.PerspectiveCamera(50,this.width/this.height,1,20),this.camera.position.set(0,0,o),this.update=this.update.bind(this),this.resize=this.resize.bind(this),this.resize(t,e)}add(t){this.scene.add(t),t.update&&(this.meshListeners.push(t.update),this.meshCount++)}remove(t){if(this.scene.remove(t),!t.update)return;const e=this.meshListeners.indexOf(t.update);e>-1&&this.meshListeners.splice(e,1),this.meshCount--}start(){this.update()}update(){let t=this.meshCount;for(;--t>=0;)this.meshListeners[t].apply(this,null);this.render(),this.animationFrame=requestAnimationFrame(this.update)}render(){this.renderer.render(this.scene,this.camera)}resize(t,e){this.width=t,this.height=e,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.resizeRender()}resizeRender(){this.renderer.setSize(this.width,this.height,!1)}pause(){this.animationFrame&&cancelAnimationFrame(this.animationFrame)}destroy(){this.pause(),this.scene=null,this.renderer=null,this.meshListeners=[]}}},function(t,e,i){"use strict";i.d(e,"default",function(){return n});var r=i(84);class n extends r.default{}},function(t,e,i){"use strict";var r=i(1),n=i(85),s=i(43);const a={transformLineMethod:t=>1.5*t};e.default=class{constructor({width:t,height:e,offsetY:i,pixelRatio:o,canvas:h}){this.updateLookAt=(t=>this.engine.lookAt=new r.Vector3(0,t,0));const u=new n.default({width:t,height:e,pixelRatio:o,canvas:h,z:6});this.engine=u,this.updateLookAt(i),this.lineGenerator=new s.default({frequency:.9},a,{engine:u}),u.add(this.lineGenerator)}start(){this.engine.start(),this.lineGenerator.start()}destroy(){this.lineGenerator.destroy(),this.engine.destroy(),this.engine=null,this.lineGenerator=null}resize({width:t,height:e}){this.engine.resize(t,e)}moveCamera({x:t,y:e,velocity:i}){const r=this.engine.lookAt;this.engine.camera.position.x+=(t-this.engine.camera.position.x)*i,this.engine.camera.position.y+=(e-this.engine.camera.position.y)*i,this.engine.camera.lookAt(r)}}},function(t,e,i){const{toObject:r}=i(88);t.exports={installHandler:function(t){self.onmessage=(async e=>{try{const{method:i,args:n}=e.data,s=await t(i,n);postMessage({result:s,id:e.data.id})}catch(t){postMessage({error:r(t),id:e.data.id})}})}}},function(t,e){function i(t){return t instanceof Error?{...t,name:t.name,message:t.message,stack:r(t.stack)}:{name:t.name||"UNKNOWN",message:JSON.stringify(t)}}function r(t){return t.replace(/\/Users\/[^/]+/g,"").replace(/\\Users\\[^\\]+/g,"").replace(/\/home\/[^/]+/g,"")}t.exports={toObject:i,JSONReplacer:function(t,e){return e instanceof Error?i(e):e},cleanStack:r}},function(t,e,i){"use strict";i.r(e);var r=i(87),n=i(86);let s=0;const a=()=>s++;const o=new class{constructor(){this.init=(({name:t,...e})=>{switch(t){case"spiral":const i=a();return this[i]=new n.default(e),i;case"default":throw new Error("expected name for CanvasHandler, received -",t)}}),this.start=(t=>{this[t].start()}),this.destroy=(t=>{this[t].destroy(),this[t]=null}),this.call=(({method:t,payload:e,id:i})=>{this[i][t](e)})}};Object(r.installHandler)(async(t,e)=>{if(!o.hasOwnProperty(t))throw new Error("invalid worker method",t);return o[t](...e)})},function(t,e,i){if(void 0!==globalThis.Buffer&&globalThis.Buffer){const Buffer=globalThis.Buffer;if(Buffer.poolSize=0,Buffer.allocUnsafe=function(t){return Buffer.alloc(t)},Buffer.allocUnsafeSlow=Buffer.allocUnsafe,Buffer.TYPED_ARRAY_SUPPORT){const{isBuffer:t}=Buffer;Buffer.isBuffer=(e=>e instanceof Uint8Array&&t(e))}Object.freeze(Buffer)}const r=Object.getPrototypeOf(Int8Array);for(const t of[...[Object,Array,Number,String,Function,Set,Map,WeakSet,WeakMap],...[Reflect,TypeError,BigInt,URL,Date,JSON,Math],...[Int8Array,Int16Array,Int32Array,DataView],...[Uint8Array,Uint16Array,Uint32Array,r]])Object.freeze(t);crypto&&crypto.subtle&&(Object.freeze(crypto),Object.freeze(crypto.subtle))},function(t,e){const i=(...t)=>{const e=t.reduce((t,e)=>t.concat((t=>t instanceof Error&&t.stack)(e)?e.stack:e,"\n"),"").trim();console._errorOriginal(e)};console._errorOriginal||(console._errorOriginal=console.error.bind(console),console.error=i)},function(t,e,i){i(91),i(90)},function(t,e,i){i(92),i(89)}]);